(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[13],{295:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return O}));var s=a(36),l=a(42),i=a(43),n=a(44),r=a(0),o=a.n(r),c=a(13),d=a.n(c),m=a(282),u=a(289),h=a(285),g=a(296),f=a(146),v=a(51),p=a(10),b=a(72),E=a(277),_=a(75),y=a(16),x=a(280),S=Object(r.lazy)((function(){return a.e(15).then(a.bind(null,287))})),C=Object(r.lazy)((function(){return a.e(10).then(a.bind(null,297))})),R=["text","date","number"],F=function(e){Object(i.a)(a,e);var t=Object(n.a)(a);function a(e){var l;return Object(s.a)(this,a),(l=t.call(this,e)).state={checked:"Both"},l}return Object(l.a)(a,[{key:"onChangeHandler",value:function(e){this.setState({checked:e}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=["Backed Up","Archived","Both"];return o.a.createElement("div",{className:"slds-p-bottom_medium"},o.a.createElement("div",{className:"slds-clearfix"},o.a.createElement("div",{className:"slds-float_left slds-p-right_xx-small"},o.a.createElement(g.a,{onChange:function(t){return e.onChangeHandler(t.target.value)},required:this.props.required,name:this.props.name,errorId:this.props.errorId,disabled:!0===this.props.disabled},d.a.map(t,function(e,t){return o.a.createElement(f.a,{key:"option"+t,id:"option"+t,label:e,value:e,checked:this.state.checked===e,variant:"button-group"})}.bind(this)))),o.a.createElement("div",{className:"slds-float_left",style:{margin:"0.41rem"}},o.a.createElement(v.a,{align:"top left",content:'Select one of the options, "Backed Up", "Archived", or "Both", below to display these records.',variant:"learnMore"}))))}}]),a}(o.a.Component),O=function(e){Object(i.a)(a,e);var t=Object(n.a)(a);function a(e){var l;return Object(s.a)(this,a),(l=t.call(this,e)).state={selectedDataIndex:null,retrieved:!1,retrievedCounter:0,_sfRequestsDisabled:!0,_restoreChildrens:!1,_checkIsUserActive:!0,_useGRAXHistoryOnly:!1,_updateRecordIfExist:!1,_sendNotification:!1,_currentOrgRecords:!0,_graxFields:null,_graxFieldsSelection:null,_graxFieldsSelectionList:null,_filterFunction:function(e){return e},_getFilterQuery:function(){return null},_filterValuesFields:[],_graxSortableFields:null,objectHasCustomMapping:!1,_archiveFilterQuery:null},l}return Object(l.a)(a,[{key:"hasFieldSelected",value:function(){return null!=this.state._graxFields&&null!=this.state._graxFieldsSelectionList&&this.state._graxFieldsSelectionList.length>0}},{key:"getFilterQuery",value:function(){var e=d.a.concat(this.state._getFilterQuery(),this.state._archiveFilterQuery);return this.state._currentOrgRecords&&e.push('(doc.graxorgid.keyword: "'+x.d+'")'),(e=d.a.remove(e,(function(e){return null!=e})))&&e.length>0?e.join(" AND "):null}},{key:"render",value:function(){var e=this;return o.a.createElement("div",null,o.a.createElement(m.a,{isCollapsible:!0,isOpen:!0,title:"Disclaimers"},o.a.createElement("ol",null,o.a.createElement("li",null,"When restoring records in an environment please confirm that the following is true:"),o.a.createElement("ol",{className:"slds-list_ordered"},o.a.createElement("li",null,"Ensure that the destination environment has the same customizations and metadata as the source environment"),o.a.createElement("li",null,"Ensure that all workflows, APEX triggers, validation rules, process builders, duplication rules, etc. are disabled in the destination environment"),o.a.createElement("li",null,"If restoring in a partial or developer Sandbox, ensure that there is ample storage space for the data you are intending to restore in the destination environment"),o.a.createElement("li",null,'Ensure that your user has "modify all data" permission in the destination environment'),o.a.createElement("li",null,'If you are attempting to restore records where the owner is inactive, ensure that your user has the permission "Update records with inactive owners" set to true in the destination environment'))),o.a.createElement("div",{className:"slds-m-bottom_large"})),o.a.createElement(m.a,{isCollapsible:!0,isOpen:!0,title:"Settings"},o.a.createElement("div",{className:"slds-grid slds-wrap"},o.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},o.a.createElement("div",{className:"slds-p-bottom_small"},o.a.createElement(v.a,{align:"top left",content:"When disabled, only the parent record will be restored. When enabled, the parent and all related children will be enabled."},o.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},o.a.createElement(p.a,{assistiveText:{label:"Restore Child Records?"},category:"utility",name:"info",size:"x-small"}))),o.a.createElement(b.a,{className:"inline-block",defaultChecked:this.state._restoreChildrens,onChange:function(t){e.setState({_restoreChildrens:t})},assistiveText:{label:"Restore Child Records?"},variant:"toggle",labels:{toggleDisabled:"Restore Parent Record Only",toggleEnabled:"Restore Child Records"}}))),o.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},o.a.createElement("div",{className:"slds-p-bottom_small"},o.a.createElement(v.a,{align:"top left",content:"When disabled, the restore process queries your storage facility to determine if this record exists already in this SF environment. When enabled the process queries SF to see if this record already exists and will not create a duplicate."},o.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},o.a.createElement(p.a,{assistiveText:{label:"Skip Salesforce Queries?"},category:"utility",name:"info",size:"x-small"}))),o.a.createElement(b.a,{className:"inline-block",defaultChecked:!this.state._sfRequestsDisabled,onChange:function(t){e.setState({_sfRequestsDisabled:!t})},assistiveText:{label:"Skip Salesforce Queries?"},variant:"toggle",labels:{toggleDisabled:"Query storage facility",toggleEnabled:"Query Salesforce"}}))),o.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},o.a.createElement("div",{className:"slds-p-bottom_small"},o.a.createElement(v.a,{align:"top left",content:'When enabled, the user must have the setting "Update Records with Inactive Owners" set to true otherwise records assigned to an inactive user will NOT be created.'},o.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},o.a.createElement(p.a,{assistiveText:{label:"Assign Records to Inactive Users?"},category:"utility",name:"info",size:"x-small"}))),o.a.createElement(b.a,{className:"inline-block",defaultChecked:!this.state._checkIsUserActive,onChange:function(t){e.setState({_checkIsUserActive:!t})},assistiveText:{label:"Assign Records to Inactive Users?"},variant:"toggle",labels:{toggleDisabled:"Assign records only to Active Users",toggleEnabled:"Assign records to Active or Inactive Users"}}))),o.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},o.a.createElement("div",{className:"slds-p-bottom_small"},o.a.createElement(v.a,{align:"top left",content:"Set it to TRUE if you don't want to double check that the restored records still exist in the destination Org."},o.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},o.a.createElement(p.a,{assistiveText:{label:"Use GRAXHistory only?"},category:"utility",name:"info",size:"x-small"}))),o.a.createElement(b.a,{className:"inline-block",defaultChecked:this.state._useGRAXHistoryOnly,onChange:function(t){e.setState({_useGRAXHistoryOnly:t})},assistiveText:{label:"Use GRAXHistory only?"},variant:"toggle",labels:{toggleDisabled:"Query SFDC to confirm record exists",toggleEnabled:"Query only GRAX History"}}))),o.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},o.a.createElement("div",{className:"slds-p-bottom_small"},o.a.createElement(v.a,{align:"top left",content:"Set it to TRUE if you want to update the previously restored records in the destination Org."},o.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},o.a.createElement(p.a,{assistiveText:{label:"Update records?"},category:"utility",name:"info",size:"x-small"}))),o.a.createElement(b.a,{className:"inline-block",defaultChecked:this.state._updateRecordIfExist,onChange:function(t){e.setState({_updateRecordIfExist:t})},assistiveText:{label:"Update records?"},variant:"toggle",labels:{toggleDisabled:"Only insert records",toggleEnabled:"Update records if exists"}}))),o.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},o.a.createElement("div",{className:"slds-p-bottom_small"},o.a.createElement(v.a,{align:"top left",content:"Notify User via Email when Process Completes"},o.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},o.a.createElement(p.a,{assistiveText:{label:"Send Notification?"},category:"utility",name:"info",size:"x-small"}))),o.a.createElement(b.a,{className:"inline-block",defaultChecked:this.state._sendNotification,onChange:function(t){e.setState({_sendNotification:t})},assistiveText:{label:"Send Notification?"},variant:"toggle",labels:{toggleDisabled:"Don't Send Notification",toggleEnabled:"Send Notification"}}))),o.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},o.a.createElement("div",{className:"slds-p-bottom_small"},o.a.createElement(v.a,{align:"top left",content:"Show records only from the current environment or all environments."},o.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},o.a.createElement(p.a,{assistiveText:{label:"Filter records?"},category:"utility",name:"info",size:"x-small"}))),o.a.createElement(b.a,{className:"inline-block",defaultChecked:!this.state._currentOrgRecords,onChange:function(t){e.setState({_currentOrgRecords:!t,retrievedCounter:e.state.retrievedCounter+1})},assistiveText:{label:"Show records from all environments?"},variant:"toggle",labels:{toggleDisabled:"Current Environment",toggleEnabled:"All connected SF environments"}})))),o.a.createElement("div",{className:"slds-m-bottom_large"})),o.a.createElement(m.a,{isCollapsible:!0,isOpen:!0,title:"Select the GRAX Table"},o.a.createElement(u.a,{onSelect:function(t,a){var s=!1,l=a[0];console.log(e.props.customMapping,l);var i=l.label;if(null!=e.props.customMapping){var n=e.props.customMapping[Object.keys(e.props.customMapping).find((function(e){return e.toLowerCase()===i.toLowerCase()}))];n&&Object.keys(n).length>0&&(s=!0)}e.setState({selectedDataIndex:l,objectHasCustomMapping:s})},excludeIds:["graxgrax_loggingindex"],onRequestRemoveSelectedOption:function(t,a){e.setState({retrieved:!1,selectedDataIndex:null,_graxFieldsSelection:null,_graxFieldsSelectionList:null,objectHasCustomMapping:!1})}}),this.state.objectHasCustomMapping?o.a.createElement("div",null,o.a.createElement(E.a,{dismissible:!0,labels:{heading:'The selected object has a custom mapping defined. To review this custom mapping, click on the "Restore Mapping" tab and then select the object.'},onRequestClose:function(){e.setState({objectHasCustomMapping:!1})}})):null,o.a.createElement("div",{className:"slds-m-bottom_large"})),o.a.createElement(m.a,{isCollapsible:!0,isOpen:!0,title:"Search GRAX Table"},null!=this.state.selectedDataIndex?o.a.createElement(r.Suspense,{fallback:o.a.createElement("div",{style:{position:"relative",height:"2rem"}},o.a.createElement(_.a,{size:"small",variant:"base"}))},o.a.createElement(S,{dataIndex:this.state.selectedDataIndex.id,onLoad:function(t,a,s,l){console.log("onLoad",a,l,s),e.setState({_graxFields:s,_graxFieldsSelection:a,_graxFieldsSelectionList:l,_graxSortableFields:d.a.reduce(s,(function(e,t,a){return-1!==R.indexOf(t.type)&&e.push(t.id),e}),[])})},onChange:function(t,a,s,l){console.log("onChange",a,l);var i=e.state.retrievedCounter;l.length>e.state._graxFieldsSelectionList.length&&i++,e.setState({retrievedCounter:i,_graxFieldsSelection:a,_graxFieldsSelectionList:l})}})):"No GRAX Table selected...",o.a.createElement("div",{className:"slds-m-bottom_large"})),o.a.createElement(m.a,{isCollapsible:!0,isOpen:!0,title:"Filter Records"},o.a.createElement(F,{onChange:function(t){var a;"Both"===t&&(a=null),"Backed Up"===t&&(a="(NOT doc.IsDeleted:true)"),"Archived"===t&&(a="(doc.IsDeleted:true)"),e.setState({_archiveFilterQuery:a,retrievedCounter:e.state.retrievedCounter+1})}}),null!=this.state._graxFieldsSelectionList&&o.a.createElement(h.a,{SObjectType:this.state.selectedDataIndex.label,filterableFieldOptions:this.state._graxFields,onFilterValueChangeHandler:function(t,a,s){e.setState({retrievedCounter:e.state.retrievedCounter,_filterFunction:t,_getFilterQuery:s,_graxFieldsSelectionList:e.state._graxFieldsSelectionList,_filterValuesFields:a})}}),o.a.createElement("div",{className:"slds-m-bottom_large"})),o.a.createElement(m.a,{isCollapsible:!0,isOpen:!0,title:"GRAX Stored Records"},o.a.createElement("div",{className:"-x-small-buttons--horizontal slds-p-bottom_small"},o.a.createElement(y.a,{label:"Retrieve",variant:"brand",onClick:function(){e.setState({retrieved:null!=e.state.selectedDataIndex,retrievedCounter:e.state.retrievedCounter+1})},disabled:!this.hasFieldSelected()})),this.state.retrieved&&this.state._graxFieldsSelectionList&&o.a.createElement(r.Suspense,{fallback:o.a.createElement("div",{style:{position:"relative",height:"2rem"}},o.a.createElement(_.a,{size:"small",variant:"base"}))},o.a.createElement(C,{key:"GRAXRestoreDataTable_"+this.state.retrievedCounter,renderKey:"GRAXRestoreDataTable_"+this.state.retrievedCounter,columns:this.state._graxFieldsSelectionList,_graxFieldsSelection:this.state._graxFieldsSelection,hiddenColumns:this.state._filterValuesFields,dataIndex:this.state.selectedDataIndex.id,sfRequestsDisabled:this.state._sfRequestsDisabled,restoreChildrens:this.state._restoreChildrens,checkIsUserActive:this.state._checkIsUserActive,useGRAXHistoryOnly:this.state._useGRAXHistoryOnly,updateRecordIfExist:this.state._updateRecordIfExist,sendNotification:this.state._sendNotification,filterFunction:this.state._filterFunction,filterQuery:this.getFilterQuery(),sortableColumns:this.state._graxSortableFields}))))}}]),a}(o.a.Component)},296:function(e,t,a){"use strict";var s=a(0),l=a.n(s),i=a(1),n=a.n(i),r=a(250),o=a(4);function c(){return(c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function d(e,t){if(null==e)return{};var a,s,l=function(e,t){if(null==e)return{};var a,s,l={},i=Object.keys(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var m={assistiveText:n.a.shape({label:n.a.string}),children:n.a.node.isRequired,className:n.a.oneOfType([n.a.array,n.a.object,n.a.string]),labels:n.a.shape({error:n.a.string,label:n.a.string}),onChange:n.a.func,disabled:n.a.bool,required:n.a.bool,name:n.a.string,errorId:n.a.string},u=function(e){e.variant;var t=d(e,["variant"]);return l.a.createElement(r.a,c({variant:"button-group"},t))};u.displayName=o.P,u.propTypes=m,u.defaultProps={labels:{},assistiveText:{}},t.a=u}}]);
//# sourceMappingURL=13.920cafc3.chunk.js.map