(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[15],{286:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return m}));var a,i=n(36),s=n(42),o=n(86),l=n(43),r=n(44),u=n(0),c=n.n(u),p=n(13),d=n.n(p),h=n(75),f=n(268),v=n(279),b=n(21),g="Fields",m=function(e){Object(l.a)(n,e);var t=Object(r.a)(n);function n(e){var a;return Object(i.a)(this,n),(a=t.call(this,e)).state={options:[],inputValue:"",selection:[{id:"Id",label:"Id",type:"text"}],isLoaded:!1,error:null},a.getMappedFieldList=a.getMappedFieldList.bind(Object(o.a)(a)),a}return Object(s.a)(n,[{key:"getMappedFieldList",value:function(e){return d.a.map(e||this.state.selection,(function(e){return e.id}))}},{key:"onLoadHandler",value:function(e,t){var n=this.getMappedFieldList(t);this.props.onLoad&&this.props.onLoad(e,t,this.state.options,n)}},{key:"onChangeHandler",value:function(e,t){var n=this.getMappedFieldList(t);this.props.onChange&&this.props.onChange(e,t,this.state.options,n),Object(b.n)(a+g,JSON.stringify(n))}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,a=this.props.dataIndex,this.props.cookieSubfix&&(g+=this.props.cookieSubfix),v.a.ajax({type:"GET",url:v.c+"/grax-app/grax-data-lake/getDataTypeFields/"+a+Object(v.b)({action:"load"}),data:{},success:function(t){if(e._isMounted){var n=d.a.map(t,(function(e,t){return{id:t,label:t,type:e}}));e.setState({options:n,isLoaded:!0});var i=Object(b.h)(a+g);i.startsWith("[")||(i="[]");var s=JSON.parse(i);e.setState({selection:s.length>0?d.a.sortBy(d.a.reduce(n,(function(e,t){return-1!==s.indexOf(t.id)&&e.push(t),e}),[]),(function(e){return s.indexOf(e.id)})):e.state.selection})}e.onLoadHandler(null,e.state.selection)},error:function(t,n,a){console.error(t,n,a),e._isMounted&&e.setState({isLoaded:!0,error:a.toString()})}})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return this.state.error?c.a.createElement("div",null,"Error: ",this.state.error):this.state.isLoaded?c.a.createElement(c.a.Fragment,null,c.a.createElement(f.a,{classNameMenu:"scrollable-GRAXFieldsCombobox",events:{onChange:function(t,n){var a=n.value;e.setState({inputValue:a})},onRequestRemoveSelectedOption:function(t,n){e.setState({inputValue:"",selection:n.selection}),e.onChangeHandler(t,n.selection)},onSelect:function(t,n){e.setState({inputValue:"",selection:n.selection}),e.onChangeHandler(t,n.selection)},onRequestClose:function(t,n){if(e.props.onSelect&&e.state.inputValue){var a=e.getMappedFieldList(n.selection);e.props.onSelect(t,[{id:e.state.inputValue,label:e.state.inputValue}],e.state.options,a)}}},labels:{placeholder:"Select Option"},options:Object(b.e)({inputValue:this.state.inputValue,limit:1e3,options:this.state.options,selection:this.state.selection}),selection:this.state.selection,value:this.state.inputValue,required:!0,multiple:!0})):c.a.createElement("div",{style:{position:"relative",height:"2rem"}},c.a.createElement(h.a,{size:"small",variant:"base"}))}}]),n}(c.a.Component)}}]);
//# sourceMappingURL=15.326cb6c8.chunk.js.map