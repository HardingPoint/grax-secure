(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[15],{196:function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));var s=a(48),r=a(49),i=a(52),n=a(50),l=a(54),o=a(51),c=a(1),d=a.n(c),m=a(7),u=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(n.a)(t).call(this,e))).state={isOpen:!0===e.isOpen||void 0===e.isCollapsible},a.handleToggle=a.handleToggle.bind(Object(l.a)(a)),a}return Object(o.a)(t,e),Object(r.a)(t,[{key:"handleToggle",value:function(e){var t=!this.state.isOpen;this.setState({isOpen:t}),this.props.onToggle&&this.props.onToggle(t),e.preventDefault()}},{key:"render",value:function(){var e=d.a.createElement("span",{className:"slds-truncate"+(this.props.isCollapsible?"":" slds-p-horizontal_small"),title:this.props.title},this.props.title);return d.a.createElement("div",{id:this.props.id||this.props.key,className:["slds-section",this.state.isOpen&&"slds-is-open",this.props.className].join(" ")},d.a.createElement("h3",{className:"slds-section__title slds-theme_shade"},this.props.isCollapsible?d.a.createElement("button",{className:"slds-button slds-section__title-action",onClick:this.handleToggle},d.a.createElement(m.a,{assistiveText:{label:this.props.title},category:"utility",name:"switch",size:"x-small",className:"slds-section__title-action-icon slds-button__icon slds-button__icon_left"}),e):e),this.state.isOpen&&d.a.createElement("div",{className:"slds-section__content"},this.props.children))}}]),t}(d.a.Component)},202:function(e,t,a){"use strict";var s=a(55);!function(e){var t="http://www.w3.org/2000/svg";e.fn.sldsTree=function(a){var s=e.extend(!0,{data:[],items:{id:"id",label:"label",childs:"childs"},attrs:{root:{class:"slds-tree_container"},ul:{class:"slds-tree"},li:{role:"treeitem","aria-level":"1","aria-expanded":"false"},div:{class:"slds-tree__item"},button:{class:"slds-button slds-button_icon slds-m-right_x-small","aria-hidden":"true",tabindex:"-1"}},expandButton:{disabled:"slds-is-disabled"},expandIcon:{class:"slds-button__icon slds-button__icon_small",path:"./assets/icons/utility-sprite/svg/symbols.svg#chevronright"},onUl:function(e,t,a){},onLi:function(e,t,a){},onDiv:function(e,t,a){e.append(t[a.items.label])},onButton:function(e,t,a){},onFinish:function(e,t,a){}},a),r=function(a,r,i,n){var l=e("<div>").attr(s.attrs.div);return l.append(function(a,r,i){var n=e("<button>").attr(s.attrs.button).toggleClass(s.expandButton.disabled,r),l=document.createElementNS(t,"svg");l.setAttribute("class",s.expandIcon.class),l.setAttribute("aria-hidden","true");var o=document.createElementNS(t,"use");return o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s.expandIcon.path),l.appendChild(o),n.append(l),n.on("click",(function(e){i.attr("aria-expanded",(function(e,t){return!("true"===t)})),e.preventDefault()})),s.onButton(n,a,s),n}(a,!a[s.items.childs]||a[s.items.childs].length<1,n)),s.onDiv(l,a,s),l},i=function(t,a,i){var l=e("<li>").attr(s.attrs.li);return l.attr({"aria-level":a}).append(r(t,0,0,l)),t[s.items.childs]&&l.append(n(t[s.items.childs],a+1)),s.onLi(l,t,s),l},n=function(t,a){var r=e("<ul>").attr(s.attrs.ul);return a>1&&r.attr({role:"group"}),e.each(t,(function(e,t){r.append(i(t,a))})),s.onUl(r,t,s),r};return this.attr(s.attrs.root).html(n(s.data,1)),s.onFinish(this,s.data,s),this}}(a.n(s).a)},224:function(e,t,a){"use strict";a.r(t);var s=a(48),r=a(49),i=a(52),n=a(50),l=a(51),o=a(1),c=a.n(o),d=a(70),m=a(191),u=a(188),h=a(56),g=a(8),p=a(75);function f(e,t,a){return(f=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,a){var s=[null];s.push.apply(s,t);var r=new(Function.bind.apply(e,s));return a&&Object(p.a)(r,a.prototype),r}).apply(null,arguments)}var b=a(71),v=a(196),S=a(223),y=a(63),D=a(15),_=a(173),w=a(53),E=a(55),T=a.n(E),C=a(11),O=function(e){function t(e){var a;Object(s.a)(this,t),a=Object(i.a)(this,Object(n.a)(t).call(this,e)),google.charts.load("current",{packages:["corechart"]}),google.charts.setOnLoadCallback(a.drawChart);var r=a.props.fromDate?a.props.fromDate:new Date,l=a.props.toDate?a.props.toDate:new Date;return r.setHours(0),r.setMinutes(0),l.setHours(23),l.setMinutes(59),a.state={isLoading:!0,summaryData:a.props.summaryData,defaultChartSettings:{width:"100%",height:600,chartArea:{width:"70%",left:"5%"}},showChartAttr:{showRecords:!0,showInserted:!0,showUpdated:!0,showArchived:!0},chartFromDate:r,chartToDate:l,showAttributeFilter:!0,hideChartOptions:!1},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.chartObjectTopTen=function(){var e,t=this.state.summaryData,a=0,s={},r=[],i=[],n=0,l=new Set;t.forEach((function(e){for(var t in e.summaryMap)l.add(t)})),(e=f(Array,Object(b.a)(l))).sort((function(e,t){return e>t?-1:e<t?1:0})),e.forEach((function(e){s[e]=n,n++})),n=0,t.forEach((function(e){for(var t in e.summaryMap){var s=e.summaryMap[t],l=r[t],o=s.records?s.records:0;if(l||0===l){var c=i[l][1]+o;i[l]=[t+" ["+c+"]",c]}else l=n,r[t]=n,i.push([t+" ["+o+"]",o]),n++;a+=o}})),i.sort((function(e,t){return-e[1]+t[1]}));for(var o=[["Object","Backed Up"]],c=0;c<10&&c<i.length;c++){var d=i[c];o.push(d),a-=d[1]}a>0&&o.push(["Others ["+a+"]",a]);var m=google.visualization.arrayToDataTable(o),u=JSON.parse(JSON.stringify(this.state.defaultChartSettings));return u.sliceVisibilityThreshold=0,[google.visualization.PieChart,m,u]}.bind(this),this.chartObjectByDate=function(){var e=this.state.summaryData,t=[],a=[],s={},r=new google.visualization.DataTable;r.addColumn("date","Start Time");var i,n,l,o=0,c=new Set;e.forEach((function(e){for(var t in e.summaryMap)c.add(t)})),(i=f(Array,Object(b.a)(c))).sort((function(e,t){return e>t?-1:e<t?1:0})),i.forEach((function(e){s[e]=o,o++})),o=0;var d={};if(e.forEach(function(e){for(var r in e.summaryMap){var c=e.summaryMap[r];if(c.startTime){var m=c.records?c.records:0,u=new Date(c.startTime),h=this.formatStartTime(u),g=a[u];(!n||n>=u)&&(n=new Date(u)).setHours(n.getHours()-1),(!l||l<=u)&&(l=new Date(u)).setHours(l.getHours()+1),g||0===g||(g=o,a[u]=o,t.push(new Array(i.length+1).fill(void 0)),o++),t[g][0]={v:u,f:h},t[g][s[r]+1]||(t[g][s[r]+1]=0),t[g][s[r]+1]+=m,d[r]||(d[r]=0),d[r]+=m}}}.bind(this)),0===t.length)return null;for(var m in s)r.addColumn("number",m+" ["+d[m]+"]");t.sort((function(e,t){return e[0].v>t[0].v?1:e[0].v<t[0].v?-1:0})),r.addRows(t);var u=JSON.parse(JSON.stringify(this.state.defaultChartSettings));return u.interpolateNulls=!0,u.pointSize=5,u.explorer={},u.hAxis={title:"Start Time",format:"YYYY-dd-MM\nhh:mm:ss",viewWindow:{min:n,max:l},viewWindowMode:"maximized"},u.vAxis={title:"Backed up objects"},[google.visualization.LineChart,r,u]}.bind(this),this.chartSummaryTopTen=function(){var e,t=this.state.summaryData,a=0,s={},r=[],i=[],n=0,l=new Set;t.forEach((function(e){l.add(e.spName)})),(e=f(Array,Object(b.a)(l))).sort((function(e,t){return e>t?-1:e<t?1:0})),e.forEach((function(e){s[e]=n,n++})),n=0,t.forEach((function(e){var t=r[e.spName],s=e.summaryResults.records?e.summaryResults.records:0;if(t||0===t){var n=i[t][1]+s;i[t]=[e.spName+" ["+n+"]",n]}else i.push([e.spName+" ["+s+"]",s]);a+=s})),i.sort((function(e,t){return-e[1]+t[1]}));for(var o=[["Summary","Backed Up"]],c=0;c<10&&c<i.length;c++){var d=i[c];o.push(d),a-=d[1]}a>0&&o.push(["Others ["+a+"]",a]);var m=google.visualization.arrayToDataTable(o),u=JSON.parse(JSON.stringify(this.state.defaultChartSettings));return u.sliceVisibilityThreshold=0,[google.visualization.PieChart,m,u]}.bind(this),this.chartSummaryByDate=function(){var e=this.state.summaryData,t=[],a=[],s={},r=new google.visualization.DataTable;r.addColumn("date","Start Time");var i,n,l,o=0,c=new Set;e.forEach((function(e){c.add(e.spName)})),(i=f(Array,Object(b.a)(c))).sort((function(e,t){return e>t?-1:e<t?1:0})),i.forEach((function(e){s[e]=o,o++})),o=0;var d={};if(e.forEach(function(e){var r=e.summaryResults;if(r.startTime){var c=r.records?r.records:0,m=new Date(r.startTime),u=this.formatStartTime(m),h=a[m];(!n||n>=m)&&(n=new Date(m)).setHours(n.getHours()-1),(!l||l<=m)&&(l=new Date(m)).setHours(l.getHours()+1),h||0===h||(h=o,a[m]=o,t.push(new Array(i.length+1).fill(void 0)),o++),t[h][0]={v:m,f:u},t[h][s[e.spName]+1]||(t[h][s[e.spName]+1]=0),t[h][s[e.spName]+1]+=c,d[e.spName]||(d[e.spName]=0),d[e.spName]+=c}}.bind(this)),0===t.length)return null;for(var m in s)r.addColumn("number",m+" ["+d[m]+"]");t.sort((function(e,t){return e[0].v>t[0].v?1:e[0].v<t[0].v?-1:0})),r.addRows(t);var u=JSON.parse(JSON.stringify(this.state.defaultChartSettings));return u.interpolateNulls=!0,u.explorer={},u.hAxis={title:"Start Time",format:"YYYY-dd-MM\nhh:mm:ss",viewWindow:{min:n,max:l},viewWindowMode:"maximized"},u.vAxis={title:"Backed up objects"},[google.visualization.LineChart,r,u]}.bind(this),this.chartAttributeProgressByDate=function(){var e=this.state.summaryData,t=[],a=[],s={},r=new google.visualization.DataTable;r.addColumn("date","Start Time");var i,n,l=0,o=[],c=[];this.state.showChartAttr.showRecords&&c.push("records"),this.state.showChartAttr.showInserted&&c.push("inserted"),this.state.showChartAttr.showUpdated&&c.push("updated"),this.state.showChartAttr.showArchived&&c.push("archived"),c.forEach((function(e){o.push(e)})),o.sort((function(e,t){return e<t?-1:e>t?1:0})),o.forEach((function(e){s[e]=l,l++})),l=0;var d={},m=new Set;if(e.forEach((function(e){var r={},o=e.summaryMap,u=!1,h=function(e){var t=o[e];t&&(c.forEach((function(e){r[e]=r[e]?r[e]:0,r[e]+=t[e]?t[e]:0})),u=!0)};for(var g in o)h(g);if(u&&e.summaryResults.startTime){var p=new Date(e.summaryResults.startTime);p.setSeconds(0);var f=p,b=p.getFullYear()+"-"+(p.getMonth()+1).toString().padStart(2,"0")+"-"+p.getDate().toString().padStart(2,"0")+" "+p.getHours().toString().padStart(2,"0")+":"+p.getMinutes().toString().padStart(2,"0")+":"+p.getSeconds().toString().padStart(2,"0"),v=a[f];(!i||i>=f)&&(i=new Date(f)).setHours(i.getHours()-1),(!n||n<=f)&&(n=new Date(f)).setHours(n.getHours()+1),v||0===v||(v=l,a[f]=l,t.push(new Array(c.length+1).fill(void 0)),l++),t[v][0]={v:f,f:b+"\n"+e.spName},c.forEach((function(e){t[v][s[e]+1]||(t[v][s[e]+1]=0),t[v][s[e]+1]+=r[e],d[e]||(d[e]=0),d[e]+=r[e]})),m.add(e.spName)}})),0===t.length)return null;for(var u in s)void 0!==d[u]&&r.addColumn("number",u+" ["+d[u]+"]");t.sort((function(e,t){return e[0]>t[0]?1:e[0]<t[0]?-1:0})),r.addRows(t);var h=JSON.parse(JSON.stringify(this.state.defaultChartSettings));return h.interpolateNulls=!0,h.isStacked=!0,h.explorer={},h.hAxis={title:"Start Date",format:"YYYY-dd-MM\n hh:mm:ss",viewWindowMode:"pretty",viewWindow:{min:i,max:n}},h.vAxis={title:"Attributes"},[google.visualization.ColumnChart,r,h]}.bind(this),this.drawChart=function(){var e=this.state.chartSelection[0].call();this.setState({isLoading:!1,isBlank:null==e},(function(){e&&new e[0](this.chartEl).draw(e[1],e[2])}))}.bind(this),this.selectChart=function(e){this.setState({chartInput:"",chartSelection:e},this.drawChart)}.bind(this),this.setDateFilter=function(e,t){this.setState({chartFromDate:e,chartToDate:t})}.bind(this),this.formatStartTime=function(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")},this.formatDate=function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()};var e=[{label:"Object Top Ten",id:"chartObjectTopTen",call:this.chartObjectTopTen},{label:"Objects By Date",id:"chartObjectByDate",call:this.chartObjectByDate},{label:"Top Ten Processes",id:"chartSummaryTopTen",call:this.chartSummaryTopTen},{label:"Processes By Date",id:"chartSummaryByDate",call:this.chartSummaryByDate},{label:"Results by Date",id:"chartAttributeProgressByDate",call:this.chartAttributeProgressByDate}];this.setState({isLoading:!1,chartOptions:e,chartSelection:[e[0]]})}},{key:"render",value:function(){var e=this;return this.state.isLoading?c.a.createElement(d.a,{size:"large",variant:"brand"}):this.state.isBlank?null:c.a.createElement("div",null,c.a.createElement("div",null,!this.state.hideChartOptions&&c.a.createElement("div",{className:"slds-grid slds-wrap"},c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1"},c.a.createElement(v.a,{title:"Chart Options",isCollapsible:"true"},c.a.createElement("div",{className:"slds-grid slds-wrap"},c.a.createElement("div",{className:"chartAttributeProgressByDate"===this.state.chartSelection[0].id&&this.state.showAttributeFilter?"slds-col slds-size_1-of-2 slds-medium-size_1-of-2 slds-large-size_1-of-2":"slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1"},c.a.createElement(_.a,{events:{onChange:function(t,a){var s=a.value;e.chartInput=s,e.setState({chartInput:s},e.drawChart)},onRequestRemoveSelectedOption:function(t,a){e.setState({chartInput:"",chartSelection:a.selection})},onSelect:function(t,a){e.selectChart(a.selection),e.props.onChartSelect&&e.props.onChartSelect(t,a.selection)}},labels:{label:"Chart Type",placeholder:"-- SELECT CHART TYPE --"},options:Object(C.e)({inputValue:this.state.chartInput,limit:1e3,options:this.state.chartOptions,selection:this.state.chartSelection}),selection:this.state.chartSelection,value:this.state.chartInput,variant:"readonly"})),"chartAttributeProgressByDate"===this.state.chartSelection[0].id&&this.state.showAttributeFilter&&c.a.createElement("div",{className:"slds-col slds-size_1-of-2 slds-medium-size_1-of-2 slds-large-size_1-of-2"},c.a.createElement(v.a,{title:"Display Values",className:"slds-p-left_small slds-m-top_none"},c.a.createElement("div",{className:"slds-grid slds-wrap"},c.a.createElement("div",{className:"slds-align_absolute-center slds-m-bottom_small slds-col slds-size_1-of-2 slds-medium-size_1-of-4 slds-large-size_1-of-4 slds-x-large-size_1-of-4"},c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state.showChartAttr.showRecords,onChange:function(t){var a=e.state.showChartAttr;a.showRecords=t,e.setState({showChartAttr:a,isLoading:!1},(function(){this.drawChart()}))},assistiveText:{label:"Remove empty?"},variant:"toggle",labels:{toggleDisabled:"Records",toggleEnabled:"Records"}})),c.a.createElement("div",{className:"slds-align_absolute-center slds-m-bottom_small slds-col slds-size_1-of-2 slds-medium-size_1-of-4 slds-large-size_1-of-4 slds-x-large-size_1-of-4"},c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state.showChartAttr.showInserted,onChange:function(t){var a=e.state.showChartAttr;a.showInserted=t,e.setState({showChartAttr:a,isLoading:!1},(function(){this.drawChart()}))},assistiveText:{label:"Remove empty?"},variant:"toggle",labels:{toggleDisabled:"Inserted",toggleEnabled:"Inserted"}})),c.a.createElement("div",{className:"slds-align_absolute-center slds-m-bottom_small slds-col slds-size_1-of-2 slds-medium-size_1-of-4 slds-large-size_1-of-4 slds-x-large-size_1-of-4"},c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state.showChartAttr.showUpdated,onChange:function(t){var a=e.state.showChartAttr;a.showUpdated=t,e.setState({showChartAttr:a,isLoading:!1},(function(){this.drawChart()}))},assistiveText:{label:"Remove empty?"},variant:"toggle",labels:{toggleDisabled:"Updated",toggleEnabled:"Updated"}})),c.a.createElement("div",{className:"slds-align_absolute-center slds-m-bottom_small slds-col slds-size_1-of-2 slds-medium-size_1-of-4 slds-large-size_1-of-4 slds-x-large-size_1-of-4"},c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state.showChartAttr.showArchived,onChange:function(t){var a=e.state.showChartAttr;a.showArchived=t,e.setState({showChartAttr:a,isLoading:!1},(function(){this.drawChart()}))},assistiveText:{label:"Remove empty?"},variant:"toggle",labels:{toggleDisabled:"Archived",toggleEnabled:"Archived"}}))))))))),c.a.createElement("div",{ref:function(t){return e.chartEl=t}})))}}],[{key:"getDerivedStateFromProps",value:function(e,t){return e}}]),t}(c.a.Component),R=function(e){function t(e){var a;Object(s.a)(this,t),(a=Object(i.a)(this,Object(n.a)(t).call(this,e))).chart=c.a.createRef(),a.summaryDataResults=[];var r=new Date,l=new Date;return r.setHours(0),r.setMinutes(0),l.setHours(23),l.setMinutes(59),a.state={isLoading:!0,fromDate:r,toDate:l,_currentOrgRecords:!0,objectInput:"",objectSelection:[],objectOptions:[],chartData:[],chartSelected:[]},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.loadSummaries=function(){this.setState({isLoading:!0});var e=this.state.fromDate;e=e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,0)+"-"+e.getDate().toString().padStart(2,0);var t=this.state.toDate,a="(doc.summaryResults.startTime:>="+e+") AND (doc.summaryResults.startTime:<="+(t=t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,0))+")";this.state._currentOrgRecords&&(a+=' AND (doc.graxorgid.keyword: "'+w.e+'")'),T.a.ajax({type:"GET",url:w.c+"/grax-app/grax-data-lake"+Object(w.b)({action:"load",dataIndex:"graxgrax_backup_summaryindex",_index:"graxgrax_backup_summaryindex,graxgrax_summaryindex",_select:"summaryMap,spName,CreatedDate,summaryResults",_q:a,_limit:1e3,_from:0,_sort:"",_sortType:"",_ignore_unavailable:!0}),success:function(e){e.results&&(this.summaryDataResults=e.results),this.setState({isLoading:!1},(function(){this.loadSummaryData()}))}.bind(this),error:function(e,t,a){console.error(e,t,a),this.setState({isLoading:!1})}.bind(this)})},this.loadSummaryData=function(){var e=this.summaryDataResults,t=new Set,a=[];e.forEach((function(e){for(var a in e.summaryMap)t.add(a)})),(a=f(Array,Object(b.a)(t))).sort((function(e,t){return e<t?-1:e>t?1:0}));var s=[{label:"All",id:"ALL"}];a.forEach((function(e){s.push({label:e,id:e})})),this.setState({isLoading:!1,objectOptions:s,objectSelection:[s[0]]},this.refreshChart)},this.refreshChart=function(){var e=this.summaryDataResults,t=[],a=[];this.state.objectSelection&&"ALL"!==this.state.objectSelection[0].id?t.push(this.state.objectSelection[0].id):this.state.objectOptions.forEach((function(e){t.push(e.id)})),e.forEach((function(e){t.forEach((function(t){if(e.summaryMap[t]){var s={summaryMap:Object(h.a)({},t,Object(g.a)({},e.summaryMap[t])),spName:e.spName,summaryResults:Object(g.a)({},e.summaryMap[t])};a.push(s)}}))})),this.setState({isLoading:!1,chartData:a},function(){this.chart.current.drawChart()}.bind(this))},this.chartSelection=function(e){this.setState({chartSelected:e})},this.formatStartTime=function(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")},this.formatDate=function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},this.setState({isLoading:!1})}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,this.state.isLoading&&c.a.createElement(d.a,{size:"large",variant:"brand"}),c.a.createElement("div",{className:"slds-grid slds-wrap"},c.a.createElement("div",{className:"slds-col slds-size_1-of-1"},c.a.createElement(v.a,{title:"Filter Criteria"},c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1"},c.a.createElement("dl",{class:"slds-list_stacked"},c.a.createElement("dt",{class:"slds-item_label slds-text-color_weak slds-truncate",title:"From"},c.a.createElement("label",{class:"slds-form-element__label"},"From")),c.a.createElement("dd",{class:"slds-item_detail"},c.a.createElement(S.a,{onChange:function(t,a){e.setState({fromDate:a.date})},value:this.state.fromDate})),c.a.createElement("dt",{class:"slds-item_label slds-text-color_weak slds-truncate",title:"To"},c.a.createElement("label",{class:"slds-form-element__label"},"To")),c.a.createElement("dd",{class:"slds-item_detail"},c.a.createElement(S.a,{onChange:function(t,a){e.setState({toDate:a.date})},value:this.state.toDate})))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_2-of-4 slds-large-size_1-of-4 slds-m-top_small"},c.a.createElement(y.a,{className:"inline-block",defaultChecked:!this.state._currentOrgRecords,onChange:function(t){e.setState({_currentOrgRecords:!t})},assistiveText:{label:"Show records from all environments?"},variant:"toggle",labels:{toggleDisabled:"Current Environment",toggleEnabled:"All connected SF environments"}}),c.a.createElement("div",{class:"slds-float_right"},c.a.createElement(D.a,{label:"Retrieve",variant:"brand",onClick:function(){e.loadSummaries(),e.chart.current.setDateFilter(e.state.fromDate,e.state.toDate),e.setState({chartSelected:e.chart.current.state.chartSelection})}}))))),this.state.objectOptions&&c.a.createElement("div",{className:"slds-col slds-size_1-of-1"},c.a.createElement(v.a,{title:"Chart Options",isCollapsible:"true"},c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1"},c.a.createElement(_.a,{events:{onChange:function(t,a){var s=a.value;e.setState({objectInput:s},e.refreshChart)},onRequestRemoveSelectedOption:function(t,a){e.setState({objectInput:"",objectSelection:a.selection})},onSelect:function(t,a){e.setState({objectInput:"",objectSelection:a.selection},e.refreshChart)}},labels:{label:"Salesforce Object",placeholder:"-- SELECT SALESFORCE OBJECT --"},options:Object(C.e)({inputValue:this.state.objectInput,limit:1e3,options:this.state.objectOptions,selection:this.state.objectSelection}),selection:this.state.objectSelection,value:this.state.objectInput,variant:"readonly"})),this.chart.current&&c.a.createElement(_.a,{events:{onChange:function(t,a){var s=a.value;e.chart.current.chartInput=s,e.chart.current.setState({chartInput:s})},onRequestRemoveSelectedOption:function(t,a){e.chart.current.selectChart(a.selection)},onSelect:function(t,a){a.selection.length>0&&(e.chart.current.selectChart(a.selection),e.setState({chartSelected:a.selection}))}},labels:{label:"Chart Type",placeholder:"-- SELECT CHART TYPE --"},options:Object(C.e)({inputValue:this.chart.current.state.chartInput,limit:1e3,options:this.chart.current.state.chartOptions,selection:this.state.chartSelected?this.state.chartSelected:this.chart.current.state.chartSelection}),selection:this.state.chartSelected,value:this.chart.current.state.chartInput,variant:"readonly"})))),c.a.createElement(O,{ref:this.chart,summaryData:this.state.chartData,showAttributeFilter:!1,hideChartOptions:!0,onChartSelect:function(t,a){e.chartSelection(a)}}))}}]),t}(c.a.Component),x=a(16),j=a(97),N=a(190),z=a(99),k=(a(202),function(e){var t=e.children,a=Object(x.a)(e,["children"]);return c.a.createElement(j.a,a,c.a.createElement("a",{href:w.c+"/grax-app/grax-data-lake/generateBackupSummary/"+a.item.spId+"/"+encodeURI(a.item.executionUniqueKey)+"?orgid="+w.e,_target:"_blank"},t))});k.displayName=j.a.displayName;var A=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(n.a)(t).call(this,e))).chart=c.a.createRef(),a.summaryDataResults=[],a.summaryDataSelected=[],a.itemsObjectsByDataRange=[],a.itemsObjectsByDataRangeSelection=[],a.summaryBreadownDTItems=[],a.summaryBreadownDTSelection=[],a.summaryDTItems=[],a.summaryDTSelection=[],a.chartOptions=[],a.defaultChartSettings={width:"100%",height:600,chartArea:{width:"70%",left:"5%"}},a.summaryBDDTFromDate=new Date,a.summaryBDDTToDate=new Date,a.state={isLoading:!0,chartData:[],chartSelection:[],chartInput:"",fromDate:new Date,toDate:new Date,_currentOrgRecords:!0,summaryDTFilters:{showRecords:!0,showInserted:!0,showUpdated:!0,showArchived:!0},inputValue:"Select an option",selection:[],checked:[],error:null},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this;try{this.loadSummaries=function(){this.setState({isLoading:!0});var e=this.state.chartSelected,t=this.state.fromDate;t=t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,0);var a=this.state.toDate,s="(doc.summaryResults.startTime:>="+t+") AND (doc.summaryResults.startTime:<="+(a=a.getFullYear()+"-"+(a.getMonth()+1).toString().padStart(2,0)+"-"+a.getDate().toString().padStart(2,0))+")";this.state._currentOrgRecords&&(s+=' AND (doc.graxorgid.keyword: "'+w.e+'")'),this.summaryBDDTFromDate=this.state.fromDate,this.summaryBDDTToDate=this.state.toDate,T.a.ajax({type:"GET",url:w.c+"/grax-app/grax-data-lake"+Object(w.b)({action:"load",dataIndex:"graxgrax_backup_summaryindex",_index:"graxgrax_backup_summaryindex,graxgrax_summaryindex",_select:"summaryMap,spName,spId,CreatedDate,summaryResults,executionUniqueKey",_q:s,_limit:1e3,_from:0,_sort:"",_sortType:"",_ignore_unavailable:!0}),success:function(t){t.results&&(this.summaryDataResults=t.results),this.setState({isLoading:!1,chartSelected:e},(function(){this.loadSummaryDataTable(),this.loadSummaryBreakdownTable(),this.loadObjectDataTable()}))}.bind(this),error:function(e,t,a){console.error(e,t,a),this.setState({isLoading:!1})}.bind(this)})},this.getSelectedSummary=function(){var e=this.summaryBreadownDTSelection,t=this.summaryDataResults,a=[];return e.forEach((function(e){a.push(t[e.index])})),a},this.loadSummaryDataTable=function(){var e=this.summaryDataResults,t=[],a=0;if(e){var s=this.state.summaryDTFilters.showArchived,r=this.state.summaryDTFilters.showInserted,i=this.state.summaryDTFilters.showUpdated;e.forEach((function(e){if(s&&0!==e.summaryResults.archived||r&&0!==e.summaryResults.inserted||i&&0!==e.summaryResults.updated){var n=t.filter((function(t){return t.name===e.spName})),l=e.summaryResults.archived,o=e.summaryResults.records,c=e.summaryResults.inserted,d=e.summaryResults.updated;if(l=l||0,o=o||0,c=c||0,d=d||0,n&&n.length>0)n[0].index.push(a),n[0].records+=o,n[0].inserted+=c,n[0].updated+=d,n[0].archived+=l;else{var m=new Date(e.CreatedDate),u=new Date(e.summaryResults.startTime),h=u.getFullYear()+"-"+(u.getMonth()+1).toString().padStart(2,"0")+"-"+u.getDate().toString().padStart(2,"0")+" "+u.getHours().toString().padStart(2,"0")+":"+u.getMinutes().toString().padStart(2,"0")+":"+u.getSeconds().toString().padStart(2,"0");t.push({name:e.spName,id:e.spName,spId:e.spId,executionUniqueKey:e.executionUniqueKey,CreatedDate:e.CreatedDate,CreatedDateFormatted:m.getFullYear()+"-"+(m.getMonth()+1)+"-"+m.getDate(),startTime:u,startTimeFormmated:h,records:o,inserted:c,updated:d,archived:l,index:[a]})}}else;a++})),t.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}))}this.summaryDTItems=t},this.loadSummaryBreakdownTable=function(){var e=this.summaryDTSelection,t=this.summaryDataResults,a=[];e&&e.forEach((function(e){e.index.forEach((function(e){var s=t[e],r=s.summaryResults.archived,i=s.summaryResults.records,n=s.summaryResults.inserted,l=s.summaryResults.updated;r=r||0,i=i||0,n=n||0,l=l||0;var o=new Date(s.CreatedDate),c=new Date(s.summaryResults.startTime),d=c.getFullYear()+"-"+(c.getMonth()+1).toString().padStart(2,"0")+"-"+c.getDate().toString().padStart(2,"0")+" "+c.getHours().toString().padStart(2,"0")+":"+c.getMinutes().toString().padStart(2,"0")+":"+c.getSeconds().toString().padStart(2,"0");a.push({name:s.spName,id:s.Id,executionUniqueKey:s.executionUniqueKey,index:e,CreatedDate:s.CreatedDate,CreatedDateFormatted:o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),startTime:s.startTime,startTimeFormmated:d,records:i,inserted:n,updated:l,archived:r})}))})),this.summaryBreadownDTItems=a},this.loadObjectDataTable=function(){var e=this.getSelectedSummary(),t=[];if(e){var a={};for(var s in e.forEach((function(e){var t=e.summaryMap,s=new Date(e.summaryResults.startTime);for(var r in t)if("object"==typeof t[r]){var i=t[r].archived,n=t[r].records,l=t[r].inserted,o=t[r].updated;i=i||0,n=n||0,l=l||0,o=o||0;var c=a[r];c||((c={}).name=r,c.id=r,c.archived=0,c.records=0,c.inserted=0,c.updated=0,c.startTimes=[]),c.archived+=i||0,c.records+=n||0,c.inserted+=l||0,c.updated+=o||0;var d=c.startTimes.indexOf(s);d<0&&(d=c.startTimes.length,c.startTimes.push({startTime:s,archived:0,records:0,inserted:0,updated:0}));var m=c.startTimes[d];m.archived+=i||0,m.records+=n||0,m.inserted+=l||0,m.updated+=o||0,a[r]=c}})),a)t.push(a[s]);t.sort((function(e,t){return e.name>t.name?1:e.name<t.name?-1:0}))}this.itemsObjectsByDataRange=t,this.setState({isLoading:!1},this.refreshChart)}.bind(this),this.refreshChart=function(){var e=[],t=this.summaryDataResults,a=this.summaryBreadownDTSelection,s=this.itemsObjectsByDataRangeSelection,r={};a.forEach((function(e){r[e.id]=e.id}));var i={};s.forEach((function(e){i[e.name]=e.name})),t.forEach((function(t){var a={};if(r[t.Id]){for(var s in a.summaryMap={},a.spName=t.spName,a.summaryResults={archived:0,records:0,inserted:0,update:0,startTime:t.summaryResults.startTime,endTime:t.summaryResults.endTime},t.summaryMap)if(i[s]){var n=t.summaryMap;a.summaryMap[s]=n[s],a.summaryResults.archived=n[s].archived?n[s].archived:0,a.summaryResults.records=n[s].records?n[s].records:0,a.summaryResults.inserted=n[s].inserted?n[s].inserted:0,a.summaryResults.update=n[s].update?n[s].update:0}e.push(a)}})),this.setState({isLoading:!1,chartData:e},(function(){this.chart.current.drawChart()}))}.bind(this),this.summaryDTHandleChanged=function(e,t){this.summaryDTSelection=t.selection,this.loadSummaryBreakdownTable(),this.loadObjectDataTable(),this.setState({isLoading:!1})}.bind(this),this.summaryBreadownDTHandleChanged=function(e,t){this.summaryBreadownDTSelection=t.selection,this.loadObjectDataTable(),this.setState({isLoading:!1})}.bind(this),this.itemsObjectsByDataRangeHandleChanged=function(e,t){this.itemsObjectsByDataRangeSelection=t.selection,this.refreshChart(),this.setState({isLoading:!1})}.bind(this),this.dataTableHandleSort=function(t,a,s){var r,i=s.property,n=s.sortDirection,l=(r={},Object(h.a)(r,t+"Column",i),Object(h.a)(r,t+"Direction",Object(h.a)({},i,n)),r);a=a.sort((function(e,t){var a=0;return e[i]>t[i]&&(a=1),e[i]<t[i]&&(a=-1),"desc"===n&&(a*=-1),a})),e.setState(l)},this.formatStartTime=function(e){return e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,"0")+"-"+e.getDate().toString().padStart(2,"0")+" "+e.getHours().toString().padStart(2,"0")+":"+e.getMinutes().toString().padStart(2,"0")+":"+e.getSeconds().toString().padStart(2,"0")},this.formatDate=function(e){return e.getMonth()+1+"/"+e.getDate()+"/"+e.getFullYear()},this.setState({isLoading:!1})}catch(t){}}},{key:"renderAggregatedScheduleProcessSection",value:function(){var e=this;return c.a.createElement(v.a,{title:"Step 1: Aggregated GRAX Schedule Process",className:"slds-p-top_large",isCollapsible:!0,isOpen:!0},c.a.createElement("div",{className:"slds-grid slds-wrap"},c.a.createElement("div",{className:"slds-col slds-size_10-of-12 slds-medium-size_10-of-12 slds-large-size_10-of-12"},c.a.createElement("div",{style:{height:300}},c.a.createElement(N.a,{assistiveText:{actionsHeader:"actions",columnSort:"sort this column",columnSortedAscending:"asc",columnSortedDescending:"desc",selectAllRows:"all rows",selectRow:"select this row"},fixedHeader:!0,fixedLayout:!0,items:this.summaryDTItems,id:"DataTable_Summaries",selection:this.summaryDTSelection,selectRows:"checkbox",onRowChange:this.summaryDTHandleChanged,onSort:function(t){e.dataTableHandleSort("DataTable_Summaries",e.summaryDTItems,t)}},c.a.createElement(z.a,{label:"GRAX Schedule Process",sortable:!0,primaryColumn:!0,property:"name"},c.a.createElement(k,null)),c.a.createElement(z.a,{label:"Records",sortable:!0,property:"records"}),c.a.createElement(z.a,{label:"Inserted",sortable:!0,property:"inserted"}),c.a.createElement(z.a,{label:"Updated",sortable:!0,property:"updated"}),c.a.createElement(z.a,{label:"Archived",sortable:!0,property:"archived"})))),c.a.createElement("div",{className:"slds-col slds-size_2-of-12 slds-medium-size_2-of-12 slds-large-size_2-of-12"},c.a.createElement("div",null,c.a.createElement(v.a,{title:"Display Values",className:"slds-p-left_small slds-m-top_none"},c.a.createElement("div",{className:"slds-grid slds-wrap"},c.a.createElement("div",{className:"slds-align_absolute-center slds-m-bottom_small slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-2 slds-x-large-size_1-of-4"},c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state.summaryDTFilters.showInserted,onChange:function(t){var a=e.state.summaryDTFilters;a.showInserted=t.target.checked,e.setState({summaryDTFilters:a,isLoading:!0},(function(){e.loadSummaryDataTable(),e.loadSummaryBreakdownTable(),e.loadObjectDataTable()}))},assistiveText:{label:"Remove empty?"},variant:"toggle",labels:{toggleDisabled:"Inserted",toggleEnabled:"Inserted"}})),c.a.createElement("div",{className:"slds-align_absolute-center slds-m-bottom_small slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-2 slds-x-large-size_1-of-4"},c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state.summaryDTFilters.showUpdated,onChange:function(t){var a=e.state.summaryDTFilters;a.showUpdated=t.target.checked,e.setState({summaryDTFilters:a,isLoading:!0},(function(){e.loadSummaryDataTable(),e.loadSummaryBreakdownTable(),e.loadObjectDataTable()}))},assistiveText:{label:"Remove empty?"},variant:"toggle",labels:{toggleDisabled:"Updated",toggleEnabled:"Updated"}})),c.a.createElement("div",{className:"slds-align_absolute-center slds-m-bottom_small slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-2 slds-x-large-size_1-of-4"},c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state.summaryDTFilters.showArchived,onChange:function(t){var a=e.state.summaryDTFilters;a.showArchived=t.target.checked,e.setState({summaryDTFilters:a,isLoading:!0},(function(){e.loadSummaryDataTable(),e.loadSummaryBreakdownTable(),e.loadObjectDataTable()}))},assistiveText:{label:"Remove empty?"},variant:"toggle",labels:{toggleDisabled:"Archived",toggleEnabled:"Archived"}}))))))))}},{key:"renderScheduleProcessBreakdownSection",value:function(){var e=this;return c.a.createElement(v.a,{title:"Step 2: GRAX Schedule Process Breakdown",className:"slds-p-top_large",isCollapsible:!0,isOpen:!0},c.a.createElement("div",{className:"slds-grid slds-wrap"},c.a.createElement("div",{className:"slds-col slds-size_10-of-12 slds-medium-size_10-of-12 slds-large-size_10-of-12"},c.a.createElement("div",{style:{height:300}},c.a.createElement(N.a,{assistiveText:{actionsHeader:"actions",columnSort:"sort this column",columnSortedAscending:"asc",columnSortedDescending:"desc",selectAllRows:"all rows",selectRow:"select this row"},fixedHeader:!0,fixedLayout:!0,items:this.summaryBreadownDTItems,id:"DataTable_SummaryBreakdown",selection:this.summaryBreadownDTSelection,selectRows:"checkbox",onRowChange:this.summaryBreadownDTHandleChanged,onSort:function(t){e.dataTableHandleSort("DataTable_SummaryBreakdown",e.summaryBreadownDTItems,t)}},c.a.createElement(z.a,{label:"GRAX Schedule Process",sortable:!0,primaryColumn:!0,property:"name"}),c.a.createElement(z.a,{label:"Execution Unique Key",sortable:!0,property:"executionUniqueKey"}),c.a.createElement(z.a,{label:"Start Time",sortable:!0,property:"startTimeFormmated"}),c.a.createElement(z.a,{label:"Records",sortable:!0,property:"records"}),c.a.createElement(z.a,{label:"Inserted",sortable:!0,property:"inserted"}),c.a.createElement(z.a,{label:"Updated",sortable:!0,property:"updated"}),c.a.createElement(z.a,{label:"Archived",sortable:!0,property:"archived"}))))))}},{key:"renderObjectsSection",value:function(){var e=this;return c.a.createElement(v.a,{title:"Step 3: Objects",className:"slds-p-top_large",isCollapsible:!0,isOpen:!0},c.a.createElement("div",{className:"slds-grid slds-wrap"},c.a.createElement("div",{className:"slds-col slds-size_10-of-12 slds-medium-size_10-of-12 slds-large-size_10-of-12"},c.a.createElement("div",{style:{height:300}},c.a.createElement(N.a,{assistiveText:{actionsHeader:"actions",columnSort:"sort this column",columnSortedAscending:"asc",columnSortedDescending:"desc",selectAllRows:"all rows",selectRow:"select this row"},fixedHeader:!0,fixedLayout:!0,items:this.itemsObjectsByDataRange,id:"DataTable_ObjectsInSummary",selection:this.itemsObjectsByDataRangeSelection,selectRows:"checkbox",onRowChange:this.itemsObjectsByDataRangeHandleChanged,onSort:function(t){e.dataTableHandleSort("DataTable_ObjectsInSummary",e.itemsObjectsByDataRange,t)}},c.a.createElement(z.a,{label:"Object Name",sortable:!0,primaryColumn:!0,property:"name"}),c.a.createElement(z.a,{label:"Records",sortable:!0,property:"records"}),c.a.createElement(z.a,{label:"Inserted",sortable:!0,property:"inserted"}),c.a.createElement(z.a,{label:"Updated",sortable:!0,property:"updated"}),c.a.createElement(z.a,{label:"Archived",sortable:!0,property:"archived"}))))))}},{key:"renderFilterCriteriaSection",value:function(){var e=this;return c.a.createElement(v.a,{title:"Filter Criteria"},c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1"},c.a.createElement("dl",{class:"slds-list_stacked"},c.a.createElement("dt",{class:"slds-item_label slds-text-color_weak slds-truncate",title:"From"},c.a.createElement("label",{class:"slds-form-element__label"},"From")),c.a.createElement("dd",{class:"slds-item_detail"},c.a.createElement(S.a,{onChange:function(t,a){e.setState({fromDate:a.date})},value:this.state.fromDate})),c.a.createElement("dt",{class:"slds-item_label slds-text-color_weak slds-truncate",title:"To"},c.a.createElement("label",{class:"slds-form-element__label"},"To")),c.a.createElement("dd",{class:"slds-item_detail"},c.a.createElement(S.a,{onChange:function(t,a){e.setState({toDate:a.date})},value:this.state.toDate})))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_2-of-4 slds-large-size_1-of-4 slds-m-top_small"},c.a.createElement(y.a,{className:"inline-block",defaultChecked:!this.state._currentOrgRecords,onChange:function(t){e.setState({_currentOrgRecords:!t})},assistiveText:{label:"Show records from all environments?"},variant:"toggle",labels:{toggleDisabled:"Current Environment",toggleEnabled:"All connected SF environments"}}),c.a.createElement("div",{class:"slds-float_right"},c.a.createElement(D.a,{label:"Retrieve",variant:"brand",onClick:function(){e.loadSummaries(),e.chart.current.setDateFilter(e.state.fromDate,e.state.toDate)}}))))}},{key:"renderFilterSections",value:function(){return this.itemsObjectsByDataRange?c.a.createElement("div",null,this.summaryDataResults.length>0?this.renderAggregatedScheduleProcessSection():null,this.summaryDTSelection.length>0?this.renderScheduleProcessBreakdownSection():null,this.summaryBreadownDTSelection.length>0?this.renderObjectsSection():null):null}},{key:"render",value:function(){return c.a.createElement("div",{style:{minHeight:2e3}},this.state.isLoading&&c.a.createElement(d.a,{size:"large",variant:"brand"}),this.renderFilterCriteriaSection(),this.renderFilterSections(),c.a.createElement(O,{ref:this.chart,summaryData:this.state.chartData}))}}]),t}(c.a.Component);a.d(t,"default",(function(){return B}));var B=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(n.a)(t).call(this,e))).state={isLoading:!0},a}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"render",value:function(){return this.state.isLoading?c.a.createElement(d.a,{size:"large",variant:"brand"}):c.a.createElement("div",{style:{minHeight:1e3}},c.a.createElement(m.a,{variant:this.props.variant,id:"tabs-simple-advanced"},c.a.createElement(u.a,{label:"Simple"},c.a.createElement(R,null)),c.a.createElement(u.a,{label:"Advanced",style:{padding:0}},c.a.createElement(A,null))))}}]),t}(c.a.Component)}}]);
//# sourceMappingURL=15.684fb009.chunk.js.map