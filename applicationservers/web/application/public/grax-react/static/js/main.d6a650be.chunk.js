(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[2],{117:function(e,a,t){"use strict";(function(e){var n,r=t(20),l=t(36),s=t(38),i=t(29),o=t(37),c=t(0),u=t.n(c),d=t(68),m=t(67),f=t(88),E=t(79),b=t(48),v=(t(160),t(161),t(23)),p=t(149),g=t(60),h=t(7),O=Object(c.lazy)((function(){return Promise.all([t.e(1),t.e(13)]).then(t.bind(null,252))})),_=Object(c.lazy)((function(){return Promise.all([t.e(0),t.e(1),t.e(7)]).then(t.bind(null,255))})),y=Object(c.lazy)((function(){return Promise.all([t.e(0),t.e(1),t.e(6)]).then(t.bind(null,257))})),N=Object(c.lazy)((function(){return Promise.all([t.e(0),t.e(1),t.e(8)]).then(t.bind(null,258))})),C=Object(c.lazy)((function(){return Promise.all([t.e(0),t.e(1),t.e(5)]).then(t.bind(null,256))})),S=Object(c.lazy)((function(){return Promise.all([t.e(0),t.e(1),t.e(11)]).then(t.bind(null,253))}));n=null!=window.__grax__&&null!=window.__grax__.appName?window.__grax__.appname:window.location.pathname.split("/").pop()||"cloud",e&&Object({NODE_ENV:"production",PUBLIC_URL:"/grax-app/assets"})&&!window.__grax__&&(window.__grax__={orgid:Object({NODE_ENV:"production",PUBLIC_URL:"/grax-app/assets"}).REACT_APP_ORGID,pageParams:{authorization:Object({NODE_ENV:"production",PUBLIC_URL:"/grax-app/assets"}).REACT_APP_BASIC_TOKEN}});var j={summarycharts:"summary-charts",delete:"datalake-delete",timemachine:"grax-object-time-machine",logging:"grax-logs"},A=function(e){function a(e){var t;return Object(r.a)(this,a),(t=Object(s.a)(this,Object(i.a)(a).call(this,e))).state={isLoading:!0},t}return Object(o.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;if("summarycharts"===n){var a=document.createElement("script");a.src="https://www.gstatic.com/charts/loader.js",a.async=!0,a.onload=function(){e.setState({isLoading:!1})},document.body.appendChild(a)}else this.setState({isLoading:!1})}},{key:"render",value:function(){return this.state.isLoading?u.a.createElement(d.a,{size:"large",variant:"brand"}):u.a.createElement(u.a.Fragment,null,v.h&&u.a.createElement("style",null,"\n                    html, body {\n                        height: 100%;\n                        overflow: auto;\n                        -webkit-overflow-scrolling: touch;\n                    }\n                "),u.a.createElement("div",{className:v.i?"slds-tabs_scoped__content":""},null!=j[n]?u.a.createElement("div",{"aria-hidden":"false",id:"GRAXHelpLink"},u.a.createElement("h3",null,u.a.createElement("a",{href:"https://documentation.grax.io/docs/".concat(j[n]),style:{position:"absolute",right:"27px"},rel:"noopener noreferrer",target:"_blank"},"GRAX Help"))):null,u.a.createElement(m.a,{iconPath:h.a},u.a.createElement(c.Suspense,{fallback:u.a.createElement(d.a,{size:"large",variant:"brand"})},("restore"===n||"mapping"===n)&&u.a.createElement(O,{variant:v.i?"default":"scoped",appName:n}),"logging"===n&&u.a.createElement(f.a,{variant:v.i?"default":"scoped",id:"grax-logging-tabs"},u.a.createElement(E.a,{label:"Error Logs"},u.a.createElement(_,{columns:["CreatedDate","source","info","error","stack","description"]})),u.a.createElement(E.a,{label:"Restore Logs"},u.a.createElement(_,{subtype:"restore",columns:["CreatedDate","objecttype","sourceId","destinationId","status","error","description"]}))),"timemachine"===n&&u.a.createElement(f.a,{variant:v.i?"default":"scoped",id:"grax-history-tabs"},u.a.createElement(E.a,{label:"History"},u.a.createElement(y,null))),"delete"===n&&u.a.createElement(f.a,{variant:v.i?"default":"scoped",id:"grax-delete-tabs"},u.a.createElement(E.a,{label:"Delete"},u.a.createElement(N,null))),"audit"===n&&u.a.createElement(C,{columns:["LastModifiedDate","ObjectType","ObjectVersion"]}),"summarycharts"===n&&u.a.createElement(S,{variant:v.i?"default":"scoped"})))),u.a.createElement(m.a,{iconPath:h.a},u.a.createElement(c.Suspense,{fallback:u.a.createElement(d.a,{size:"large",variant:"brand"})},u.a.createElement(b.a,null,u.a.createElement(g.a,{routes:p.a})))))}}]),a}(u.a.Component);a.a=A}).call(this,t(91))},146:function(e){e.exports=JSON.parse('{"storage":[{"jsonName":"provider","displayName":"Provider"},{"jsonName":"bucket","displayName":"Bucket Name"},{"jsonName":"region","displayName":"Region"},{"jsonName":"s3CompatibleEndpoint","displayName":"Endpoint"},{"jsonName":"storageAccountName","displayName":"Storage Account Name"},{"jsonName":"containerName","displayName":"Container Name"},{"jsonName":"googleBucketName","displayName":"Google Bucket Name"}],"elastic":[{"jsonName":"provider","displayName":"Provider"}],"dataSource":[{"jsonName":"name","displayName":"Connection Name"},{"jsonName":"userName","displayName":"Username"},{"jsonName":"url","displayName":"URL"},{"jsonName":"organizationId","displayName":"Organization ID"}]}')},149:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(60),s=function(e){var a=e.routes;return r.a.createElement(l.a,{routes:a})},i=t(3),o=t(272),c=t(274),u=t(273),d=t(266),m=t(17),f=t(267),E=function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{variant:"list"},r.a.createElement(m.a,{label:"Create Scenario",onClick:e})))},b=t(13),v=t(124),p=t(76),g=t(126),h=function(e){e.children;var a=e.onRowAction,t=Object(b.a)(e,["children","onRowAction"]),n=[];return"SUCCESS"!==t.item.job_status&&n.push({value:1,label:"Run"}),n.push({value:2,label:"Clone"},{value:3,label:"Edit"},{value:4,label:"Delete"}),r.a.createElement(v.a,t,r.a.createElement(p.a,{align:"right",iconCategory:"utility",iconName:"down",iconVariant:"border-filled",onSelect:function(e){return a(t.item.id,e)},buttonClassName:"slds-button_icon-small",options:n}))},O=function(e){e.children;var a=Object(b.a)(e,["children"]);return r.a.createElement(v.a,a,"SUCCESS"===a.item.job_status?r.a.createElement("a",{href:function(e){return e.preventDefault()},onClick:function(){return a.viewDuplicates(a.item.id)}},"View Duplicates"):"View Duplicates")},_=function(e){e.children;var a=Object(b.a)(e,["children"]),t="";return null!==a.item.groups_count&&null!==a.item.records_affected&&(t="".concat(a.item.groups_count," of ").concat(a.item.records_affected)),r.a.createElement(v.a,a,t)},y=function(e){var a=e.children,t=Object(b.a)(e,["children"]);return r.a.createElement(v.a,t,r.a.createElement("a",{href:function(e){return e.preventDefault()},onClick:function(){return t.viewScenario(t.item.id)}},a))},N=function(e){e.children;var a=Object(b.a)(e,["children"]).item.fields,t=a.length,n="";return t>0&&(n=a.slice(0,2).map((function(e){return e.split(".")[1]})).join(", "),t>2&&(n+=" +".concat(t-2))),r.a.createElement(v.a,null,n)},C=function(e){var a=e.children,t=Object(b.a)(e,["children"]);return r.a.createElement(v.a,t,a?"Yes":"No")};y.displayName=v.a.displayName,_.displayName=v.a.displayName,h.displayName=v.a.displayName,O.displayName=v.a.displayName,N.displayName=v.a.displayName,C.displayName=v.a.displayName;var S=[r.a.createElement(g.a,{key:"scenario-name",property:"name",label:"Name"},r.a.createElement(y,null)),r.a.createElement(g.a,{key:"object-name",property:"object_name",label:"Object Name"}),r.a.createElement(g.a,{key:"fields",property:"fields",label:"Fields"},r.a.createElement(N,null)),r.a.createElement(g.a,{key:"merge-actions",property:"scenario_action",label:"Merge Action"}),r.a.createElement(g.a,{key:"fields",property:"is_active",label:"Is Active"},r.a.createElement(C,null)),r.a.createElement(g.a,{key:"duplicate-counts",label:"Duplicate Counts"},r.a.createElement(_,null)),r.a.createElement(g.a,{key:"view-results",property:"job_status"},r.a.createElement(O,null)),r.a.createElement(g.a,{key:"row-actions",property:"job_status",label:""},r.a.createElement(h,null))],j=t(40),A=t(7),I=t(11),T=t.n(I),R=t(5),k=t(16),w=t(127),D=t.n(w).a.create();D.interceptors.request.use((function(e){return e}));var x=D,B=t(20),z=t(38),P=t(29),F=t(37),L=t(52),M=function(e){function a(){return Object(B.a)(this,a),Object(z.a)(this,Object(P.a)(a).apply(this,arguments))}return Object(F.a)(a,e),a}(Object(L.a)(Error)),U={isLoading:null,error:null,data:null,success:null},V=function(e,a){var t=a.type,n=a.payload;switch(t){case"FETCH_IS_LOADING":return!0===n.isLoading?Object(R.a)({},U,{isLoading:!0}):Object(R.a)({},e,{isLoading:!1});case"FETCH_SET_DATA":return Object(R.a)({},e,{data:n.data,error:null,success:!0});case"FETCH_THROW_ERROR":return Object(R.a)({},e,{data:null,error:n.error,success:!1});case"FETCH_SET_STATUS":return Object(R.a)({},e,{},n);default:throw new M}},q=function(e,a){var t=a.type,n=a.payload;switch(t){case"FETCH_SET_DATA":case"FETCH_IS_LOADING":case"FETCH_THROW_ERROR":case"FETCH_SET_STATUS":return Object(R.a)({},e,{},n);default:throw new M}},G=function(e){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=Object(k.a)({},e),r=Object(n.useState)(t),l=Object(i.a)(r,2),s=l[0],o=l[1],c=Object(n.useReducer)(q,Object(R.a)({data:null,isLoading:null,error:null,status:null},a)),u=Object(i.a)(c,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){void 0!==s.url&&(m({type:"FETCH_IS_LOADING",payload:{isLoading:!0}}),function(){var e;T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.awrap(x(s));case 3:e=a.sent,m({type:"FETCH_SET_DATA",payload:{data:e.data}}),m({type:"FETCH_SET_STATUS",payload:{status:e.status}}),a.next=12;break;case 8:a.prev=8,a.t0=a.catch(0),m({type:"FETCH_THROW_ERROR",payload:{error:a.t0}}),void 0!==a.t0.response&&m({type:"FETCH_SET_STATUS",payload:{status:a.t0.response.status}});case 12:case"end":return a.stop()}}),null,null,[[0,8]])}(),m({type:"FETCH_IS_LOADING",payload:{isLoading:!1}}))}),[s]),[d,o]},H=function(){var e=G(),a=Object(i.a)(e,2),t=a[0],n=a[1];return[t,function(e){return n({url:"".concat(A.l,"/").concat(e),method:"POST"})}]},K=function(){var e=G(),a=Object(i.a)(e,2),t=a[0],n=a[1];return[t,function(e){return n({url:"".concat(A.l,"/").concat(e),method:"DELETE",params:{sfdcorgid:""}})}]},Q=function(){var e=G(null,{data:{data:[]}}),a=Object(i.a)(e,2),t=a[0],n=a[1];return[t,function(e){return n({url:"".concat(A.l,"/").concat(e,"/run"),params:{sfdcorgid:""},method:"POST"})}]},W=Object(n.createContext)(),X=function(){var e=function(){var e=G(null,{data:{data:[]}}),a=Object(i.a)(e,2),t=a[0],n=a[1];return[t,function(){return n({url:A.l,params:{sfdcorgid:""}})}]}(),a=Object(i.a)(e,2),t=a[0],r=a[1],l=K(),s=Object(i.a)(l,2),o=s[0],c=s[1],u=Q(),d=Object(i.a)(u,2),m=d[0],f=d[1],E=H(),b=Object(i.a)(E,2),v=b[0],p=b[1],g=Object(j.f)(),h=Object(n.useContext)(W).openToast;Object(n.useEffect)(r,[]),Object(n.useEffect)((function(){null!==v.data&&v.data.data.id?h({heading:["Scenario Cloned"]}):null!==o.status&&200===o.status?(h({heading:["Scenario Deleted"]}),r()):null!==m.data&&"success"===m.data.status&&(h({heading:["Scenario is Running"]}),r())}),[v.data,o.data,m.data]);var O=function(e){return g.push("".concat(A.b,"/scenarios/").concat(e))},_=function(e){return g.push("".concat(A.b,"/duplicates/").concat(e))};return[t,{createScenario:function(){return g.push("".concat(A.b,"/scenarios/new"))},viewScenario:O,viewDuplicates:_,onRowAction:function(e,a){switch(a.value){case 1:f(e);break;case 5:_(e);break;case 2:p(e);break;case 3:O(e);break;case 4:c(e)}}}]},Y=function(){var e=X(),a=Object(i.a)(e,2),t=a[0],n=a[1],l=n.onRowAction,s=n.createScenario,d=n.viewScenario,m=n.viewDuplicates;return r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{className:"slds-m-bottom_large",title:"Scenarios",variant:"object-home",onRenderActions:E.bind(null,s),trail:[r.a.createElement("a",{href:"javascript:void(0);"},"Dedup")]}),r.a.createElement(c.a,{style:{flexGrow:1},heading:"All Scenarios"},r.a.createElement(u.a,{items:t.data.data,noRowHover:!0,viewScenario:d,viewDuplicates:m,onRowAction:l},S)))};Y.displayName="DedupScenarios";var J=Y,Z=t(268),$=function(){var e=Object(n.useState)([]),a=Object(i.a)(e,2),t=a[0],r=a[1],l=G(),s=Object(i.a)(l,2),o=s[0],c=s[1];return Object(n.useEffect)((function(){if(null!==o.data){var e=[],a=o.data;for(var t in a)if(1===t.split(".").length&&!1===t.startsWith("grax")){var n=a[t];e.push({label:t,value:"doc.".concat(t),dataType:n})}r(e)}}),[o.data]),[t,function(e){""!==e?c({url:"".concat(A.f,"/getDataTypeFields/").concat(e,"?action=load"),params:{sfdcorgid:""}}):r([])}]},ee={isEditMode:!1,objectIndex:"",formState:{filterCriteria:[],matchCriteria:[{}],sfdcorgid:"",name:"",description:"",object_name:"",is_active:!0,scenario_action:"MANUAL_MERGE",fields:[],results_table_fields:[],records_affected:null,groups_count:null},editMode:{}},ae=function(e,a){switch(a.type){case"SCENARIO_LOAD":var t=a.payload;return Object(R.a)({},e,{isEditMode:a.payload.isEditMode,formState:{matchCriteria:t.matchCriteria,filterCriteria:a.payload.filterCriteria,name:t.name,description:t.description,object_name:t.object_name,results_table_fields:t.results_table_fields,fields:t.fields,is_active:t.is_active,scenario_action:t.scenario_action}});case"SCENARIO_SET_MATCH_CRITERIA":case"SCENARIO_SET_FILTER_CRITERIA":case"SCENARIO_SET_NAME":case"SCENARIO_SET_DESCRIPTION":case"SCENARIO_SET_IS_ACTIVE":case"SCENARIO_SET_SCENARIO_ACTION":var n=a.payload,r=Object(R.a)({},e,{formState:Object(R.a)({},e.formState,{},n)});return!0===e.isEditMode&&(r=Object(R.a)({},r,{editMode:Object(R.a)({},e.editMode,{},n)})),r;case"SCENARIO_SET_RESULTS_TABLE_FIELDS":var l=a.payload.fields.map((function(e){return e.value})),s=Object(R.a)({},e,{formState:Object(R.a)({},e.formState,{results_table_fields:l})});return!0===e.isEditMode&&(s=Object(R.a)({},s,{editMode:Object(R.a)({},s.editMode,{results_table_fields:l})})),s;case"SCENARIO_SET_FIELDS":var i=a.payload.fields.map((function(e){return e.value})),o=Object(R.a)({},e,{formState:Object(R.a)({},e.formState,{fields:i})});return!0===e.isEditMode&&(o=Object(R.a)({},o,{editMode:Object(R.a)({},o.editMode,{fields:i})})),o;case"SCENARIO_SET_OBJECT_NAME":var c=a.payload,u=e.formState.matchCriteria.map((function(e){return Object(R.a)({},e,{field_name:"",operator:""})})),d=e.formState.filterCriteria.map((function(e){return Object(R.a)({},e,{field_name:"",operator:""})})),m=Object(R.a)({},e,{objectIndex:c.objectIndex,formState:Object(R.a)({},e.formState,{object_name:c.object_name,matchCriteria:u,filterCriteria:d})});return!0===e.isEditMode&&(m=Object(R.a)({},m,{editMode:Object(R.a)({},m.editMode,{object_name:c.object_name,matchCriteria:u,filterCriteria:d})})),m;default:throw new Error}},te=function(){var e=Object(n.useState)([]),a=Object(i.a)(e,2),t=a[0],r=a[1],l=G({url:"".concat(A.f,"/getDataTypes"),params:{sfdcorgid:""}}),s=Object(i.a)(l,1)[0];return Object(n.useEffect)((function(){null!==s.data&&r(s.data.filter((function(e){return!1===e.label.startsWith("grax")&&"logs"!==e.label})))}),[s.data]),t},ne=function(){var e=Object(n.useReducer)(ae,ee),a=Object(i.a)(e,2),t=a[0],r=a[1],l=function(){var e=G(),a=Object(i.a)(e,2),t=a[0],n=a[1];return[t,function(e){n({url:"".concat(A.l,"/").concat(e),params:{sfdcorgid:""}})}]}(),s=Object(i.a)(l,2),o=s[0],c=s[1],u=function(){var e=G(),a=Object(i.a)(e,2),t=a[0],n=a[1];return[t,function(e){return n({url:A.l,method:"POST",data:e})}]}(),d=Object(i.a)(u,2),m=d[0],f=d[1],E=K(),v=Object(i.a)(E,2),p=v[0],g=v[1],h=Q(),O=Object(i.a)(h,2),_=O[0],y=O[1],N=H(),C=Object(i.a)(N,2),S=C[0],I=C[1],T=function(){var e=G(),a=Object(i.a)(e,2),t=a[0],n=a[1];return[t,function(e,a){"number"===typeof e&&n({url:"".concat(A.l,"/").concat(e),method:"PATCH",data:a,params:{sfdcorgid:""}})}]}(),k=Object(i.a)(T,2),w=k[0],D=k[1],x=$(),B=Object(i.a)(x,2),z=B[0],P=B[1],F=Object(j.g)(),L=Object(j.f)(),M=Object(n.useContext)(W).openToast,U=Number(F.scenario_id),V=Number.isInteger(U),q="".concat(V?"Update":"Create"," Scenario"),X=t.formState,Y=te();Object(n.useEffect)((function(){!0===V&&c(U)}),[V]),Object(n.useEffect)((function(){null!==o.data&&null===o.error&&r({type:"SCENARIO_LOAD",payload:Object(R.a)({isEditMode:V},o.data.data)})}),[o.data]),Object(n.useEffect)((function(){""!==t.objectIndex&&P(t.objectIndex)}),[t.objectIndex]),Object(n.useEffect)((function(){return r({type:"SCENARIO_SET_RESULTS_TABLE_FIELDS",payload:{fields:z}})}),[z]),Object(n.useEffect)((function(){var e=t.isEditMode,a=t.formState,n=t.objectIndex,r=a.object_name;if(!0===e&&""!==r&&""===n&&Y.length>0){var l=Y.find((function(e){return e.label===r}));void 0!==l&&P(l.id)}}),[Y,t.formState.object_name]),Object(n.useEffect)((function(){null!==m.data&&m.data.data.id?(M({heading:["New Scenario Created"]}),L.push("".concat(A.b,"/scenarios/").concat(m.data.data.id))):null!==S.data&&S.data.data.id?(M({heading:["Scenario Cloned"]}),L.push("".concat(A.b,"//scenarios/").concat(S.data.data.id))):null!==p.status&&200===p.status?(M({heading:["Scenario Deleted"]}),L.push("".concat(A.b,"/scenarios"))):null!==_.data&&"success"===_.data.status&&M({heading:["Scenario is Running"]})}),[m.data,S.data,p,w,_]),Object(n.useEffect)((function(){null!==w.data&&null===w.error&&M({heading:"Scenario Updated"})}),[w.data]);return[{formState:X,isEditMode:V,docPrefixedFields:z,scenarioId:U,heading:q,sObjects:Y},{dispatch:r,deleteScenario:g,cloneScenario:I,runDeduplication:y,viewDuplicates:function(e){return L.push("/grax-app/client/duplicates/".concat(e))},onSubmit:function(e){if(!0===t.isEditMode)D(U,t.editMode);else{var a=t.formState,n=(a.fields,Object(b.a)(a,["fields"]));f(n)}e.preventDefault()}}]},re=t(1),le=t.n(re),se=t(275),ie={isEditMode:le.a.bool.isRequired,onDelete:le.a.func,onDuplicate:le.a.func},oe=function(e){var a=e.isOpen,t=e.onDelete,n=e.onClose;return r.a.createElement(se.a,{disableClose:!0,footer:[r.a.createElement(m.a,{label:"Cancel",onClick:n}),r.a.createElement(m.a,{label:"Delete",variant:"destructive",onClick:function(){n(),t()}})],isOpen:a,onRequestClose:n,prompt:"error",size:"small",title:r.a.createElement("span",null,"Delete Scenario?")})},ce=function(e){var a=e.isEditMode,t=e.onDelete,l=e.onDuplicate,s=e.onRun,o=e.onViewDuplicates,c=Object(n.useState)(!1),u=Object(i.a)(c,2),d=u[0],f=u[1],E=r.a.createElement(m.a,{className:"slds-m-horizontal_xx-small",iconCategory:"utility",iconName:"delete",iconVariant:"border-filled",onClick:t}),b=r.a.createElement(p.a,{buttonVariant:"icon",checkmark:!0,iconName:"settings",iconSize:"large",iconVariant:"more",align:"right",onSelect:function(e){switch(e.value){case 1:s();break;case 5:o();break;default:l()}},options:[{label:"Run",value:1},{label:"View Result",value:5},{label:"Duplicate",value:2}]}),v=[];return!0===a&&(v.push(b),v.push(E),v.push(r.a.createElement(oe,{isOpen:d,onClose:function(){return f(!1)},onDelete:t}))),v};ce.propType=ie,ce.displayName="DedupScenarioCardActions";var ue=ce,de=t(254),me=t(77),fe={name:le.a.string.required,description:le.a.string.required,isActive:le.a.bool.required,onChangeName:le.a.func,onChangeDescription:le.a.func,onChangeNameIsActive:le.a.func},Ee=Object(n.memo)((function(e){var a=e.name,t=e.description,l=e.isActive,s=e.onChangeName,i=e.onChangeDescription,o=e.onChangeIsActive,c=Object(n.useRef)(0);return c.current=c.current+1,r.a.createElement(Z.a,{title:"General",className:"slds-m-bottom_medium slds-m-top_none",nonCollapsible:!0},r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_2-of-5"},r.a.createElement(de.a,{label:"Name",required:!0,value:a,onChange:function(e){return s(e.target.value)}})),r.a.createElement("div",{className:"slds-col slds-size_2-of-5"},r.a.createElement(de.a,{label:"Description",value:t,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement("div",{className:"slds-form-element"},r.a.createElement("label",{className:"slds-form-element__label"},"Is Active"),r.a.createElement(me.a,{checked:l,variant:"toggle",onChange:function(e,a){var t=a.checked;return o(t)}})))))}));Ee.prototype=fe,Ee.prototype.displayName="DedupScenarioGeneral";var be=Ee,ve=t(89),pe=t(269),ge=t(270),he=function(e){var a=e.options,t=void 0===a?[]:a,l=e.onChange,s=Object(b.a)(e,["options","onChange"]),o=Object(n.useState)(""),c=Object(i.a)(o,2),u=c[0],d=c[1],m=Object(n.useState)([]),f=Object(i.a)(m,2),E=f[0],v=f[1],p=function(e,a){l&&l(e,a,t)};return r.a.createElement(pe.a,Object.assign({events:{onChange:function(e,a){var t=a.value;return d(t)},onRequestRemoveSelectedOption:function(e,a){d(""),v(a.selection),p(e,a.selection)},onSelect:function(e,a){d(""),v(a.selection),p(e,a.selection)}},options:Object(ge.a)({inputValue:u,limit:1e3,options:t,selection:E}),selection:E,value:u,variant:"inline-listbox",required:!0,menuItemVisibleLength:5,classNameMenu:"slds-dropdown_length-7"},s))},Oe=Object(n.createContext)(),_e=function(){return Object(n.useContext)(Oe)},ye=function(e){var a=e.children,t=G({url:"".concat(A.c,"/metadata"),params:{sfdcorgid:""}},{data:{data:{operators:[],stopwords:[],synonyms:[]}}}),l=Object(i.a)(t,1)[0],s=Object(n.useMemo)((function(){return{metadata:l}}),[l]);return r.a.createElement(Oe.Provider,{value:s},a)},Ne={scenarioActions:le.a.array,scenarioAction:le.a.string,onChange:le.a.func},Ce=function(e){var a=e.scenarioAction,t=e.onChange,l=_e().metadata.data.data.scenario_actions,s=Object(n.useRef)(0);return s.current=s.current+1,r.a.createElement("div",{className:"slds-col slds-size_2-of-5"},r.a.createElement(he,{options:function(e){var a=[];for(var t in e){var n=e[t].values;n=n.map((function(e){return{label:e.display_value,value:e.code}})),a.push.apply(a,Object(ve.a)(n))}return a}(l),value:a,labels:{placeholder:"Select Option"},required:!0,onChange:function(e,a){return t(1===a.length?a[0].value:null)}}))};Ce.prototype=Ne,Ce.displayName="DedupScenarioMergeActions";var Se=Object(n.memo)(Ce),je=function(e){var a=e.heading;e.onSubmit;return r.a.createElement(o.a,{className:"slds-m-bottom_large",title:a,variant:"object-home",trail:[r.a.createElement("span",null,"Dedup "),r.a.createElement("a",{href:"javascript:void(0);"},"Scenarios")],onRenderActions:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{variant:"list"},r.a.createElement(m.a,{label:"Save",type:"submit"})))}})},Ae=t(23),Ie=function(e){var a=e.onRemove,t=Object(b.a)(e,["onRemove"]);return r.a.createElement("div",{className:"slds-col slds-size_1-of-12"},r.a.createElement("div",{className:"slds-form-element"},r.a.createElement("label",{className:"slds-form-element__label"},"\xa0"),r.a.createElement("div",{className:"slds-from_element__control"},r.a.createElement(m.a,Object.assign({onClick:a,iconCategory:"utility",variant:"icon",iconName:"delete",iconVariant:"border-filled"},t)))))},Te=function(e){var a=e.onClick,t=Object(b.a)(e,["onClick"]);return r.a.createElement(m.a,Object.assign({className:"slds-m-top_medium",label:"Add New Row",iconCategory:"utility",iconName:"add",iconPosition:"left",onClick:a},t))},Re=function e(a){return function(t){var l=t.rows,s=t.onChange,i=t.footer,o=t.hideFooter,c=Object(b.a)(t,["rows","onChange","footer","hideFooter"]),u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s(l.concat(e))},d=function(e,a){return s(l.map((function(t,n){return a===n?e:t})))},m="".concat(e.name).concat(a.name),f=[];a.displayName=m,l.map((function(e,t){return f.push(r.a.createElement(a,Object.assign({row:e,index:t,key:"".concat(m,"-").concat(t),onChange:function(e){return d(e,t)},onRemove:function(){return function(e){return s(l.filter((function(a,t){return e!==t})))}(t)}},c)))}));return[f,function(e,a){if(void 0===a)return r.a.isValidElement(e)?Object(n.cloneElement)(e,{addRow:u}):r.a.createElement(Te,{onClick:function(){return u({})}})}(i,o)]}};Re.displayName="withRepeating";var ke=Re,we={fieldName:le.a.string,docPrefixedFields:le.a.arrayOf(le.a.shape({label:le.a.string,value:le.a.string})),operator:le.a.arrayOf(le.a.shape({label:le.a.string,value:le.a.string})),onChangeField:le.a.func,onChangeOperator:le.a.func,operators:le.a.arrayOf(le.a.string)},De=function(e){var a=e.fieldName,t=e.operator,l=e.docPrefixedFields,s=e.onChangeField,o=e.onChangeOperator,c=Object(n.useState)(""),u=Object(i.a)(c,2),d=u[0],m=u[1],f=function(){var e=Object(n.useState)(null),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),o=s[0],c=s[1],u=_e().metadata.data.data.operators;return Object(n.useEffect)((function(){if(null===t)c([]);else{var e=u.filter((function(e){return e.applicable_data_types.includes(t)})).map((function(e){return{label:e.name,value:e.id}}));c(e)}}),[t,u]),[o,r]}(),E=Object(i.a)(f,2),b=E[0],v=E[1];Object(n.useEffect)((function(){if(0===b.length&&""!==a&&l.length>0){var e=l.find((function(e){return e.value===a}));void 0!==e&&v(e.dataType)}}),[l]),Object(n.useEffect)((function(){var e="";void 0!==a&&a.startsWith("doc.")&&(e=a.split("doc.")[1]),m(e)}),[a]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement(he,{onChange:function(e,a){return function(e){if(1===e.length){var a=e[0],t=a.value,n=a.dataType;s(t),v(n)}else s(""),v(null)}(a)},options:l,value:d,required:!0,labels:{label:"Fields",placeholder:"Select Option"}})),r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement(he,{onChange:function(e,a){return o(1===a.length?a[0].label:"")},options:b,value:t,required:!0,labels:{label:"Operators",placeholder:"Select Option"}})))};De.prototype=we,De.displayName="DedupScenarioFieldsAndOperators";var xe=De,Be={row:le.a.shape({field:le.a.string,operator:le.a.string,value:le.a.string,stopWord:le.a.array,synonyms:le.a.array,cleanse:le.a.bool}),index:le.a.number,onChange:le.a.func,onRemove:le.a.func,docPrefixedFields:le.a.arrayOf(le.a.shape({label:le.a.string,value:le.a.string})),operators:le.a.arrayOf(le.a.shape({label:le.a.string,value:le.a.string}))},ze=function(e){var a=e.row,t=e.onChange,n=e.onRemove,l=e.setMetadata,s=e.docPrefixedFields,i=e.operators,o=1===e.rowsNum;return r.a.createElement("li",{className:"slds-grid slds-gutters_small"},r.a.createElement(xe,{docPrefixedFields:s,operators:i,fieldName:a.field_name,operator:a.operator,onChangeField:function(e){return t(Object.assign({},a,{field_name:e,operator:""}))},onChangeOperator:function(e){return t(Object(Ae.k)(a,"operator",e))}}),r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement("div",{className:"slds-form-element"},r.a.createElement("label",{className:"slds-form-element__label"},"stopWord"),r.a.createElement("div",{className:"slds-form-element__control"},r.a.createElement("a",{className:"",style:{lineHeight:"1.875rem"},href:function(e){return e.preventDefault()},onClick:function(){return l({matchCriteriaId:a.id,id:a.stopwords_list_id,variant:"stopwords"})}},"Contact Prefixes")))),r.a.createElement("div",{className:"slds-col slds-size_1-of-6"},r.a.createElement("div",{className:"slds-form-element"},r.a.createElement("label",{className:"slds-form-element__label"},"Synonym"),r.a.createElement("div",{className:"slds-form-element__control"},r.a.createElement("a",{className:"",style:{lineHeight:"1.875rem"},href:function(e){return e.preventDefault()},onClick:function(){return l({matchCriteriaId:a.id,id:a.synonyms_id,variant:"synonyms"})}},"Synonym name")))),r.a.createElement("div",{className:"slds-col slds-size_2-of-12"},r.a.createElement("span",{className:"slds-form-element__label"},"Use Cleansed Field"),r.a.createElement("div",{className:"slds-form-element__control"},r.a.createElement(me.a,{variant:"toggle",checked:a.cleanse,onChange:function(e,n){n.checked;return t(Object(Ae.k)(a,"cleanse",!a.cleanse))}}))),r.a.createElement(Ie,{onRemove:n,disabled:o}))};ze.prototype=Be,ze.displayName="DedupScenarioMatchCriterias";var Pe=ke(ze),Fe={row:le.a.shape({field:le.a.string,operator:le.a.string,value:le.a.any}),index:le.a.number,onChange:le.a.func,onRemove:le.a.func,docPrefixedFields:le.a.arrayOf(le.a.shape({label:le.a.string,value:le.a.string})),operators:le.a.arrayOf(le.a.shape({label:le.a.string,value:le.a.string}))},Le=function(e){var a=e.row,t=e.onChange,l=e.onRemove,s=e.docPrefixedFields,o=e.operators,c=Object(n.useState)(),u=Object(i.a)(c,2),d=u[0],m=u[1];return Object(n.useEffect)((function(){return m(a.value)}),[a.value]),r.a.createElement("li",{className:"slds-grid slds-gutters_small"},r.a.createElement(xe,{docPrefixedFields:s,operators:o,fieldName:a.field_name,operator:a.operator,onChangeField:function(e){return t(Object(Ae.k)(a,"field_name",e))},onChangeOperator:function(e){return t(Object(Ae.k)(a,"operator",e))}}),r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement(de.a,{label:"Value",value:d,required:!0,onChange:function(e){return m(e.target.value)},onBlur:function(e){return t(Object(Ae.k)(a,"value",d))}})),r.a.createElement(Ie,{onRemove:l}))};Le.proptype=Fe,Le.displayName="DedupScenarioFilterCriterias";var Me=ke(Le),Ue=t(150),Ve=ke((function(e){var a=e.row,t=e.selectedId,l=(e.onChange,e.onRemove),s=Object(n.useState)(!1),o=Object(i.a)(s,2),c=o[0],u=o[1];return r.a.createElement("tr",{className:"slds-hint-parent"},r.a.createElement("th",{className:"slds-cell-edit"},r.a.createElement(Ue.a,{variant:"base",checked:t===a.id})),r.a.createElement("th",{className:"slds-cell-edit"},r.a.createElement("span",{className:"slds-grid slds-grid_align-spread"},r.a.createElement("a",{className:"slds-truncate"},r.a.createElement("span",{className:"slds-grid slds-grid_align-spread"},r.a.createElement("span",{className:"slds-truncate",title:"Acme"},a.name))),r.a.createElement(m.a,{iconSize:"small",onClick:function(){return u(!0)},iconCategory:"utility",variant:"icon",iconName:"edit",iconVariant:"bare",className:"slds-cell-edit__button",iconClassName:"slds-button__icon_hint slds-button__icon_edit"})),c&&r.a.createElement("section",{className:"slds-popover slds-popover slds-popover_edit",role:"dialog",style:{position:"absolute",top:"0px",left:"0.0625rem"}},r.a.createElement("div",{className:"slds-popover__body",id:"dialog-body-id-1"},r.a.createElement("div",{className:"slds-form-element slds-grid slds-wrap"},r.a.createElement("label",{className:"slds-form-element__label slds-form-element__label_edit slds-no-flex",for:"company-01"},r.a.createElement("span",{className:"slds-assistive-text"},"Company")),r.a.createElement("div",{className:"slds-form-element__control slds-grow"},r.a.createElement("input",{className:"slds-input",id:"company-01",type:"text",value:"Acme Enterprises",onBlur:function(){u(!1)}})))))),r.a.createElement("td",{className:"slds-cell-edit slds-text-align_right"},r.a.createElement(m.a,{iconSize:"small",onClick:l,iconCategory:"utility",variant:"icon",iconName:"delete",iconVariant:"border-filled"})))})),qe=function(e){var a=e.criteria,t=(e.onChange,e.onSelect,Object(n.useState)([])),l=Object(i.a)(t,2),s=l[0],o=l[1],c=_e().metadata.data.data,u=c.stopwords,d=c.synonyms;return Object(n.useEffect)((function(){"stopwords"===a.variant?o(u):o(d)}),[a]),r.a.createElement("table",{className:"slds-table slds-table_bordered slds-no-row-hover slds-table_edit"},r.a.createElement("thead",null,r.a.createElement("tr",{className:"slds-line-height_reset"},r.a.createElement("th",{className:"",style:{width:"1rem"}}),r.a.createElement("th",null,r.a.createElement("a",{className:"slds-th__action slds-text-link_reset",href:"javascript:void(0);",role:"button",tabindex:"0"},r.a.createElement("span",{className:"slds-assistive-text"},"Sort by: "),r.a.createElement("div",{className:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},r.a.createElement("span",{className:"slds-truncate",title:"Account Name"},"Name")))),r.a.createElement("th",{"aria-label":"Close Date","aria-sort":"none",className:"",scope:"col"}))),r.a.createElement("tbody",null,r.a.createElement(Ve,{rows:s,selectedId:a.id,hideFooter:!0})))},Ge={stopwords:"Stopwords",synonyms:"Synonyms"},He=function(e){var a=e.isOpen,t=e.criteria,n=e.onChange,l=e.onRequestClose;return r.a.createElement(se.a,{isOpen:a,heading:Ge[t.variant],onRequestClose:l,size:"small",footer:[r.a.createElement(m.a,{label:"Cancel",onClick:l}),r.a.createElement(m.a,{variant:"brand",label:"Apply",onClick:l})]},r.a.createElement(qe,{criteria:t,onChange:n}))},Ke={matchCriteria:le.a.shape({field:le.a.string,operator:le.a.string,value:le.a.string,stopword:le.a.array,synonyms:le.a.array,cleanse:le.a.bool}),filterCriteria:le.a.shape({field:le.a.string,operator:le.a.string,value:le.a.any}),operators:le.a.arrayOf(le.a.shape({label:le.a.string,value:le.a.string})),stopwords:le.a.arrayOf(le.a.shape({label:le.a.string,value:le.a.string})),synonyms:le.a.arrayOf(le.a.shape({label:le.a.string,value:le.a.string})),onChangeMatchCriteria:le.a.func,onChangeFilterCriteria:le.a.func},Qe=function(e){var a=e.matchCriteria,t=e.filterCriteria,l=e.objectName,s=(e.fields,e.docPrefixedFields),o=e.sObjects,c=e.onChangeObject,u=(e.onChangeFields,e.onChangeMatchCriteria),d=e.onChangeFilterCriteria,m=Object(n.useState)(!1),f=Object(i.a)(m,2),E=f[0],b=f[1],v=Object(n.useState)({}),p=Object(i.a)(v,2),g=p[0],h=p[1],O=_e().metadata.operators;return r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{title:"Objects",className:"slds-m-bottom_medium",nonCollapsible:!0},r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement(he,{options:o,labels:{placeholder:"Select option"},value:l,onChange:function(e,a){var t=1===a.length?a[0]:{objectName:"",objectIndex:""};c(t.label,t.id)}})))),r.a.createElement(Z.a,{title:"Matching Criterias",className:"slds-m-bottom_medium",nonCollapsible:!0},r.a.createElement(Pe,{rows:a,docPrefixedFields:s,operators:O,rowsNum:a.length,onChange:u,setMetadata:function(e){b(!0),h(e)}})),r.a.createElement(Z.a,{title:"Filter Criterias",className:"slds-m-bottom_medium",nonCollapsible:!0},r.a.createElement(Me,{rows:t,docPrefixedFields:s,operators:O,onChange:d})),r.a.createElement(He,{isOpen:E,criteria:g,onRequestClose:function(){return b(!1)}}))};Qe.propType=Ke;var We=Qe,Xe=function(){var e=ne(),a=Object(i.a)(e,2),t=a[0],l=t.formState,s=t.isEditMode,o=t.docPrefixedFields,u=t.scenarioId,d=t.heading,m=t.sObjects,f=a[1],E=f.dispatch,b=f.deleteScenario,v=f.duplicateScenario,p=f.runDeduplication,g=f.viewDuplicates,h=f.onSubmit,O=l.name,_=l.description,y=l.is_active,N=l.object_name,C=l.fields,S=l.matchCriteria,j=l.filterCriteria,A=l.scenario_action;return r.a.createElement(ye,null,r.a.createElement("form",{onSubmit:function(e){return h(e)}},r.a.createElement(je,{heading:d}),r.a.createElement(c.a,{heading:d,headerActions:r.a.createElement(ue,{isEditMode:s,onDelete:function(){return b(u)},onDuplicate:function(){return v(u)},onRun:function(){return p(u)},onViewDuplicates:function(){return g(u)}})},r.a.createElement("div",{className:"slds-p-horizontal_medium"},r.a.createElement(be,{name:O,description:_,isActive:y,onChangeName:Object(n.useCallback)((function(e){return E({type:"SCENARIO_SET_NAME",payload:{name:e}})}),[O]),onChangeDescription:Object(n.useCallback)((function(e){return E({type:"SCENARIO_SET_DESCRIPTION",payload:{description:e}})}),[_]),onChangeIsActive:Object(n.useCallback)((function(e){return E({type:"SCENARIO_SET_IS_ACTIVE",payload:{is_active:e}})}),[y])}),r.a.createElement(We,{matchCriteria:S,filterCriteria:j,objectName:N,fields:C,docPrefixedFields:o,sObjects:m,onChangeMatchCriteria:function(e){return E({type:"SCENARIO_SET_MATCH_CRITERIA",payload:{matchCriteria:e}})},onChangeFilterCriteria:function(e){return E({type:"SCENARIO_SET_FILTER_CRITERIA",payload:{filterCriteria:e}})},onChangeObject:function(e,a){return E({type:"SCENARIO_SET_OBJECT_NAME",payload:{object_name:e,objectIndex:a}})},onChangeFields:function(e){return E({type:"SCENARIO_SET_FIELDS",payload:{fields:e}})}}),r.a.createElement(Z.a,{title:"Merge Actions",nonCollapsible:!0,className:"slds-m-bottom_medium"},r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement(Se,{scenarioAction:A,onChange:function(e){return E({type:"SCENARIO_SET_SCENARIO_ACTION",payload:{scenario_action:e}})}})))))))};Xe.propType={},Xe.displayName="DedupScenario";var Ye,Je,Ze,$e,ea,aa=Xe,ta=function(e){var a=e.tableFields;return r.a.createElement("thead",null,r.a.createElement("tr",{className:"slds-line-height_reset"},r.a.createElement("th",{className:"slds-text-align_right",style:{width:"3.25rem"}}),a.map((function(e){return r.a.createElement("th",{"aria-label":"Contact"},r.a.createElement("div",null,r.a.createElement("span",{className:"slds-truncate",title:"Contact"},e)))})),r.a.createElement("th",{"aria-label":"Contact",style:{width:"3.25rem"}},r.a.createElement("div",null,r.a.createElement("span",{className:"slds-truncate",title:"Contact"})))))},na=t(67),ra=function(e){var a=e.tableFields,t=e.row,l=e.onViewRecord,s=Object(n.useState)(!1),o=Object(i.a)(s,2),c=o[0],u=o[1];return r.a.createElement("tr",{"aria-level":"1",className:"slds-hint-parent"},r.a.createElement("td",{style:{width:"3.25rem"}},r.a.createElement("div",{className:"slds-checkbox"},r.a.createElement(me.a,{checked:c,onChange:function(e){u(!c)}}))),a.map((function(e){return r.a.createElement("td",null,r.a.createElement("div",{className:"slds-truncate",title:"Acme"},function(e,a){return a[e]}(e,t)))})),r.a.createElement("td",{className:"slds-text-align_right"},r.a.createElement(na.a,{iconPath:"/assets/icons"},r.a.createElement(m.a,{align:"right",iconCategory:"utility",iconName:"expand",iconVariant:"border",iconSize:"small",onClick:function(e){l(t)}}))))},la=function(){var e=Object(n.useState)([]),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useState)([]),s=Object(i.a)(l,2),o=s[0],c=s[1],u=Object(n.useState)([]),d=Object(i.a)(u,2),m=d[0],f=d[1],E=Object(n.useState)(null),b=Object(i.a)(E,2),v=b[0],p=b[1],g=function(){var e=G(null,{data:{data:{results:[]}}}),a=Object(i.a)(e,2),t=a[0],n=a[1];return[t,function(e){return n({url:"".concat(A.l,"/").concat(e,"/results"),params:{sfdcorgid:""}})}]}(),h=Object(i.a)(g,2),O=h[0],_=h[1],y=Object(j.g)(),N=Object(n.useContext)(W).openToast,C=y.scenario_id;return Object(n.useEffect)((function(){return _(C)}),[C]),Object(n.useEffect)((function(){var e=O.data.data.results;if(e.length>0){var a=["doc.Name","doc.Website","doc.Phone","doc.BillingCity","doc.BillingState"].map((function(e){return e.split(".")[1]}));r(e),p(e[0].index_name),c(a.slice(0,4)),f(a)}}),[O.data]),Object(n.useEffect)((function(){"CREATED"===O.data.data.job_status&&N({heading:["Scenario Job Created"]})}),[O.data.data.job_status]),{tableFields:o,tableFieldsExpanded:m,rows:t,indexName:v}},sa=function(e){var a=e.keyName,t=e.tableFields;return r.a.createElement("tr",{className:"slds-is-selected"},r.a.createElement("td",{colspan:t.length+1},"Duplicate key: ",a),r.a.createElement("td",{className:"slds-text-align_right",style:{width:"3.25rem"}},r.a.createElement(na.a,{iconPath:"/assets/icons"},r.a.createElement(p.a,{align:"right",iconCategory:"utility",iconName:"down",iconVariant:"border-filled",onSelect:function(e){},buttonClassName:"slds-button_icon-small",options:[{label:"Merge Records",value:"A0"}]}))))},ia=function(e){var a=e.field,t=e.record;return r.a.createElement("tr",{className:"slds-hint-parent"},r.a.createElement(n.Fragment,null,r.a.createElement("td",null,r.a.createElement("div",{className:"slds-truncate",title:"Acme"},a)),r.a.createElement("td",{colSpan:"3"},r.a.createElement("div",{className:"slds-truncate",title:"Acme"},function(e,a){return a[e]}(a,t)))))},oa=function(e){var a=e.setIsOpen,t=e.tableFields,l=e.record;return r.a.createElement(na.a,{iconPath:"/assets/icons"},r.a.createElement(se.a,{isOpen:!0,size:"medium",onRequestClose:function(){return a(!1)},hasNoHeader:!0},r.a.createElement("table",{"aria-multiselectable":"true",className:"slds-table slds-table_header-hidden slds-table_bordered slds-table_cell-buffer slds-no-row-hover slds-tree slds-table_tree",role:"grid"},r.a.createElement("thead",null,r.a.createElement("tr",{"aria-level":"1",className:"slds-hint-parent"},r.a.createElement("th",{role:"gridcell"},r.a.createElement("div",{className:"slds-truncate",title:"Acme"},"STANDARD FIELD NAMES")))),r.a.createElement("tbody",null,null!==l&&r.a.createElement(n.Fragment,null,t.map((function(e){return r.a.createElement(ia,{field:e,record:l})})))))))},ca=function(){var e=la(),a=e.tableFields,t=e.tableFieldsExpanded,l=e.rows,s=e.indexName,u=Object(n.useState)(!1),d=Object(i.a)(u,2),m=d[0],f=d[1],E=Object(n.useState)(null),b=Object(i.a)(E,2),v=b[0],p=b[1],g=function(e){p(e)};return Object(n.useEffect)((function(){null!==v&&f(!0)}),[v]),r.a.createElement(r.a.Fragment,null,r.a.createElement(o.a,{className:"slds-m-bottom_large",title:"All Potential Duplicate Records",variant:"object-home",trail:[r.a.createElement("a",{href:"javascript:void(0);"},"Dedup")]}),r.a.createElement(c.a,{style:{flexGrow:1},hasNoHeader:null===s,heading:"Index: ".concat(s)},l.length>0&&r.a.createElement(n.Fragment,null,r.a.createElement("table",{"aria-multiselectable":"true",className:"slds-table  slds-table_bordered slds-no-row-hover ",role:"grid"},r.a.createElement(ta,{tableFields:a}),r.a.createElement("tbody",null,l.map((function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(sa,{keyName:e.key,tableFields:a}),e.records.map((function(e){return r.a.createElement(ra,{tableFields:a,row:e,onViewRecord:g})})))})))),!0===m&&r.a.createElement(oa,{isOpen:m,setIsOpen:f,tableFields:t,record:v}))))},ua=function(e){var a=Object(n.useContext)(e);if(void 0===a)throw new Error("useStateContext must be called inside provider");return a},da=function(e){var a=Object(n.useContext)(e);if(void 0===a)throw new Error("useDispatchContext must be called inside a provider");return a},ma=t(6),fa={environments:Object(ma.a)({},"Heroku Provided Configuration",{dataSources:[],elastic:[],storage:[],metadataBackup:{sourceControlProvider:"github"},timeMachine:[],pushToQueue:[],variables:{BULK_BACKUP_MAX_UPLOAD_SIZE:"Default = 10"},syncAnalytics:[]}),globalEnvironmentDefaults:{asyncAttachmentProcessorOrganizationIds:[],asyncBulkLoadOrganizationIds:[],asyncQueueOrganizationIds:[],syncSalesforceEinsteinOrganizationIds:[],syncSalesforceSourceOrganizationIds:[],metadataBackupOrganizationIds:[],odataOrganizationIds:[]}},Ea=t(36),ba=t(30),va=t.n(ba),pa=function(e){function a(){return Object(B.a)(this,a),Object(z.a)(this,Object(P.a)(a).apply(this,arguments))}return Object(F.a)(a,e),a}(Object(L.a)(Error)),ga=function(e){function a(e){var t,n=e.message,r=e.details,l=void 0===r?null:r;return Object(B.a)(this,a),(t=Object(z.a)(this,Object(P.a)(a).call(this,n))).details=l,t}return Object(F.a)(a,e),a}(Object(L.a)(Error)),ha=function(e){function a(){return Object(B.a)(this,a),Object(z.a)(this,Object(P.a)(a).apply(this,arguments))}return Object(F.a)(a,e),a}(Object(L.a)(Error)),Oa=function(){function e(){Object(B.a)(this,e)}return Object(Ea.a)(e,[{key:"_createHeaders",value:function(){return{sfdcorgid:this.sfdcorgid,Authorization:"Basic "+this.basicAuthToken,"content-type":"application/json"}}},{key:"fetch",value:function(e){function a(a,t){return e.apply(this,arguments)}return a.toString=function(){return e.toString()},a}((function(e,a){var t=this._createHeaders();return fetch(this.hostname+e,Object(R.a)({},a,{headers:t})).then((function(e){var a;return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.ok){t.next=4;break}return t.abrupt("return",e);case 4:if(404!==e.status){t.next=8;break}throw new pa("".concat(e.status," (").concat(e.statusText,")"));case 8:if(422!==e.status){t.next=15;break}return t.next=11,T.a.awrap(e.json());case 11:throw a=t.sent,new ga({message:"".concat(e.status," (").concat(e.statusText,")"),details:a});case 15:throw new Error("".concat(e.status," (").concat(e.statusText,")"));case 16:case"end":return t.stop()}}))})).then((function(e){return e.json()})).catch((function(e){if("Network request failed"===e.message)throw new ha(Object(R.a)({},e));throw e}))}))},{key:"hostname",get:function(){return window.location.origin}},{key:"sfdcorgid",get:function(){return window.__grax__.orgid}},{key:"basicAuthToken",get:function(){return window.__grax__.pageParams?window.__grax__.pageParams.authorization:null}}]),e}(),_a=Oa,ya=["asyncAttachmentProcessorOrganizationIds","asyncBulkLoadOrganizationIds","asyncQueueOrganizationIds","bulkRestoreSourceOrganizationId","metadataBackupOrganizationIds","odataOrganizationIds","syncSalesforceSourceOrganizationIds"],Na=function(){function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(B.a)(this,e),this.graxClient=new _a,this.configuration=va.a.merge({},a)}return Object(Ea.a)(e,[{key:"validateUniqueDataSourceName",value:function(e){var a=this.environment.dataSources.find((function(a){return e.name===a.name&&e.organizationId!==a.organizationId}));return a?{organizationId:a.organizationId,name:a.name}:null}},{key:"removeDataSourceFromGlobals",value:function(e,a){this._removeOrgIdFromGlobals(e,a),0===this._findGlobalsByOrgId(e).length&&this._removeDataSource(e)}},{key:"retrieve",value:function(){return T.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,T.a.awrap(this.graxClient.fetch(A.d));case 3:return this.configuration=e.sent,e.abrupt("return",this.configuration);case 7:if(e.prev=7,e.t0=e.catch(0),!(e.t0 instanceof pa)){e.next=11;break}return e.abrupt("return",{});case 11:throw e.t0;case 12:case"end":return e.stop()}}),null,this,[[0,7]])}},{key:"save",value:function(){return T.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.a.awrap(this.graxClient.fetch(A.d,{body:JSON.stringify(this.configuration),method:"POST"}));case 2:return this.configuration=e.sent,e.abrupt("return",this.configuration);case 4:case"end":return e.stop()}}),null,this)}},{key:"_addOrReplaceDataSource",value:function(e,a){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=this._findDataSourceByOrgId(e.organizationId);if(n&&n.organizationId===e.organizationId){var r=this.environment.dataSources.indexOf(n);this.environment.dataSources.splice(r,1,e)}else this.environment.dataSources.push(e);this._setGlobals(e.organizationId,a,t)}},{key:"_findDataSourceByOrgId",value:function(e){var a=this.environment.dataSources.filter((function(a){return a.organizationId===e}));return 0===a.length?null:a[0]}},{key:"_findGlobalsByOrgId",value:function(e){var a=this;return Object.keys(this.globals).filter((function(t){return t.endsWith("Ids")?a.globals[t].includes(e):!!t.endsWith("Id")&&a.globals[t]===e}))}},{key:"_removeDataSource",value:function(e){var a=this.environment.dataSources.find((function(a){return a.organizationId===e})),t=this.environment.dataSources.indexOf(a);this.environment.dataSources.splice(t,1)}},{key:"_removeOrgIdFromGlobals",value:function(e,a){var t=this;a.forEach((function(a){if(a.endsWith("Ids")){var n=t.globals[a].indexOf(e);-1!==n&&t.globals[a].splice(n,1)}else a.endsWith("Id")&&t.globals[a]===e&&delete t.globals[a]}))}},{key:"_setGlobals",value:function(e,a,t){var n=this;a.forEach((function(a){a.endsWith("Ids")?(n.globals[a]||(n.globals[a]=[]),t?n.globals[a]=[e]:n.globals[a].push(e)):a.endsWith("Id")&&(n.globals[a]=e)}))}},{key:"environment",get:function(){this.configuration&&this.configuration.environments||(this.configuration=Object(R.a)({},this.configuration,{environments:Object(ma.a)({},"Heroku Provided Configuration",{dataSources:[],elastic:[],storage:[]})}));var e=Object.keys(this.configuration.environments)[0];return this.configuration.environments[e]}},{key:"globals",get:function(){return this.configuration&&this.configuration.globalEnvironmentDefaults||(this.configuration=Object(R.a)({},this.configuration,{globalEnvironmentDefaults:{asyncAttachmentProcessorOrganizationIds:[],asyncBulkLoadOrganizationIds:[],asyncQueueOrganizationIds:[],syncSalesforceEinsteinOrganizationIds:[],syncSalesforceSourceOrganizationIds:[],metadataBackupOrganizationIds:[],odataOrganizationIds:[]}})),this.configuration.globalEnvironmentDefaults}},{key:"bulkRestoreDestinationDataSource",get:function(){return this._findDataSourceByOrgId(this.globals.bulkRestoreDestinationOrganizationId)},set:function(e){this._addOrReplaceDataSource(e,["bulkRestoreDestinationOrganizationId"])}},{key:"elastic",get:function(){return this.environment.elastic[0]},set:function(e){this.environment.elastic=[e]}},{key:"metadataBackup",get:function(){return this.environment.metadataBackup[0]},set:function(e){if(void 0===e.isEnabled||!1===e.isEnabled){var a=e.name,t=e.isEnabled;this.environment.metadataBackup=[{name:a,isEnabled:t}]}else if(void 0===e.sourceControlEnabled||!1===e.sourceControlEnabled){var n=e.name,r=e.isEnabled,l=e.sourceControlEnabled;this.environment.metadataBackup=[{name:n,isEnabled:r,sourceControlEnabled:l}]}else if("gitlab"===e.sourceControlProvider){e.gitUserId;var s=Object(b.a)(e,["gitUserId"]);this.environment.metadataBackup=[s]}else this.environment.metadataBackup=[e]}},{key:"pushToQueue",get:function(){return this.environment.pushToQueue[0]},set:function(e){if("Kafka"===e.provider){var a=e.provider,t=e.authorizationToken,n=e.apiEndpoint;this.environment.pushToQueue=[{provider:a,authorizationToken:t,apiEndpoint:n}]}else if("Apigee"===e.provider){var r=e.provider,l=e.apiClientId,s=e.apiEndpoint,i=e.apiClientSecret;this.environment.pushToQueue=[{provider:r,apiClientId:l,apiEndpoint:s,apiClientSecret:i}]}else this.environment.pushToQueue=[{}]}},{key:"sourceDataSource",get:function(){return this._findDataSourceByOrgId(this.globals.asyncAttachmentProcessorOrganizationIds[0])},set:function(e){this._addOrReplaceDataSource(e,ya,!0)}},{key:"syncSalesforceEinsteinOrganizationId",get:function(){return(this.globals.syncSalesforceEinsteinOrganizationIds||[])[0]}},{key:"syncSalesforceEinsteinDataSources",get:function(){var e=this;return(this.globals.syncSalesforceEinsteinOrganizationIds||[]).map((function(a){return e._findDataSourceByOrgId(a)}))[0]||null},set:function(e){this._addOrReplaceDataSource(e,["syncSalesforceEinsteinOrganizationIds"],!0)}},{key:"storage",get:function(){return this.environment.storage[0]},set:function(e){this.environment.storage=[e]}},{key:"syncAnalytics",get:function(){return this.environment.syncAnalytics[0]},set:function(e){var a=e.isEinsteinAnalyticsEnabled,t=e.isMarketingCloudEnabled,n=Object(b.a)(e,["isEinsteinAnalyticsEnabled","isMarketingCloudEnabled"]);if(void 0===a||!1===a){var r=n,l=(r.syncEinsteinAnalyticsDatasetName,r.syncSalesforceObjects,Object(b.a)(r,["syncEinsteinAnalyticsDatasetName","syncSalesforceObjects"])),s=this.syncSalesforceEinsteinOrganizationId;void 0!==s&&this.removeDataSourceFromGlobals(s,["syncSalesforceEinsteinOrganizationIds"]),n=l}if(!1===t){var i=n;i.marketingCloudHost,i.marketingCloudUser,i.marketingCloudPassword,i.marketingCloudPort;n=Object(b.a)(i,["marketingCloudHost","marketingCloudUser","marketingCloudPassword","marketingCloudPort"])}this.environment.syncAnalytics=[n]}},{key:"timeMachine",get:function(){return this.environment.timeMachine[0]},set:function(e){this.environment.timeMachine=[e]}},{key:"variables",get:function(){return this.environment.variables},set:function(e){void 0!==e.cdcEnabled?this.environment.variables=Object(R.a)({},e,{cdcEnabled:e.cdcEnabled.toString()}):this.environment.variables=e}}]),e}(),Ca=Na,Sa=function(e,a){return T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a({type:"FETCH_IS_LOADING",payload:{isLoading:!0}}),t.prev=1,t.next=4,T.a.awrap(e());case 4:a({type:"FETCH_IS_LOADING",payload:{isLoading:!1,success:!0}}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(1),a({type:"FETCH_THROW_ERROR",payload:{error:t.t0.message,isLoading:!1,success:!1}});case 10:case"end":return t.stop()}}),null,null,[[1,7]])},ja=function(e,a){switch(a.type){case"CONFIGURATION_LOAD_INITIAL_STATE":return a.payload;default:throw new M}},Aa=Object(n.createContext)(),Ia=Object(n.createContext)(),Ta=function(){return[ua(Aa),da(Ia)]},Ra=function(e){var a=e.children,t=function(){var e=Object(n.useReducer)(ja,fa),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useReducer)(q,{isLoading:null,error:null,status:null})[1];return Object(n.useEffect)((function(){!function(){var e;T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=function(){var e;return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=new Ca,a.next=3,T.a.awrap(e.retrieve());case 3:r({payload:e.configuration,type:"CONFIGURATION_LOAD_INITIAL_STATE"});case 4:case"end":return a.stop()}}))},a.next=3,T.a.awrap(Sa(e,l));case 3:case"end":return a.stop()}}))}()}),[]),[t,r]}(),l=Object(i.a)(t,2),s=l[0],o=l[1];return r.a.createElement(Aa.Provider,{value:s},r.a.createElement(Ia.Provider,{value:o},a))},ka=function(e,a){var t=a.type,n=a.payload;switch(t){case"SPINNER_IS_RUNNING":return Object(R.a)({},e,{isLoading:!0});case"SPINNER_IS_STOPPED":return Object(R.a)({},e,{isLoading:!1});case"NOTIFICATION_IS_OPEN":return Object(R.a)({},e,{isOpen:!0});case"NOTIFICATION_IS_CLOSE":return Object(R.a)({},e,{isOpen:!1});case"NOTIFICATION_SUCCESS":return Object(R.a)({},e,{isOpen:!0,variant:"success",message:[n.message]});case"NOTIFICATION_ERROR":return Object(R.a)({},e,{isOpen:!0,variant:"error",message:[n.message],duration:5e3});default:throw new M}},wa={isLoading:!1,isOpen:!1,variant:"success",message:"",duration:2e3},Da=Object(n.createContext)(),xa=Object(n.createContext)(),Ba=function(e){var a=e.children,t=Object(n.useReducer)(ka,wa),l=Object(i.a)(t,2),s=l[0],o=l[1];return r.a.createElement(Da.Provider,{value:s},r.a.createElement(xa.Provider,{value:o},a))},za=t(68),Pa=t(271),Fa=t(278),La=function(){var e=[ua(Da),da(xa)],a=Object(i.a)(e,2),t=a[0],n=a[1];return[t,{successNotification:function(e){return n({type:"NOTIFICATION_SUCCESS",payload:{message:e}})},errorNotification:function(e){return n({type:"NOTIFICATION_ERROR",payload:{message:e}})},hideNotification:function(){return n({type:"NOTIFICATION_IS_CLOSE"})},spinnerIsRunning:function(){return n({type:"SPINNER_IS_RUNNING"})},spinnerIsStopped:function(){return n({type:"SPINNER_IS_STOPPED"})}}]},Ma=function(){var e=La(),a=Object(i.a)(e,2),t=a[0],l=t.isOpen,s=t.isLoading,o=t.variant,c=t.message,u=t.duration,d=a[1].hideNotification;return r.a.createElement(n.Fragment,null,s&&r.a.createElement(za.a,{size:"large",variant:"brand",assistiveText:{label:c}}),!0===l&&r.a.createElement(Pa.a,null,r.a.createElement(Fa.a,{duration:u,labels:{heading:[c]},variant:o,onRequestClose:d})))},Ua=function(e){var a=e.routes;return r.a.createElement(Ra,null,r.a.createElement(Ba,null,r.a.createElement(Ma,null),r.a.createElement(l.a,{routes:a})))},Va=t(277),qa=function(e){var a=e.text;return r.a.createElement("div",{className:"slds-m-vertical_medium slds-m-horizontal_medium"},r.a.createElement(Va.a,{className:"slds-text-align_left",variant:"warning",labels:{heading:a}}))},Ga=function(){return r.a.createElement(c.a,{hasNoHeader:!0},r.a.createElement("div",{className:"slds-text-longform slds-text-align_center"},r.a.createElement("h2",{className:"slds-text-heading_medium"},"Welcome to GRAX!"),r.a.createElement("p",{className:"slds-text-body_regular"},"Your Data Value Platform.")),r.a.createElement("footer",{className:"slds-card__footer"},r.a.createElement(qa,{text:"Ensure you have valid Salesforce, Elasticsearch, and cloud storage credentials before beginning.\n        You will not be able to save your configuration without valid credentials for all three providers."}),r.a.createElement(m.a,{className:"slds-button slds-button_brand",label:"Start"})))},Ha=t(10),Ka=t(276),Qa=t(146),Wa=function(){function e(a){Object(B.a)(this,e);var t=this._getEnvironmentFromConfiguration(a),n=t.elastic,r=t.storage,l=t.salesforce;this.salesforce=l,this.storage=r,this.elastic=n}return Object(Ea.a)(e,[{key:"createSummaryData",value:function(){var e=this,a={};return["salesforce","elastic","storage"].forEach((function(t){a[t]=e._displayableProperties(t)})),a}},{key:"_displayableProperties",value:function(e){var a=this,t=[],n=Object(R.a)({},this[e]),r=Object.keys(n),l=Qa["salesforce"===e?"dataSource":e];return l.map((function(e){return e.jsonName})).forEach((function(e){if(r.includes(e)){var s=l.filter((function(a){return a.jsonName===e}))[0].displayName,i=a._formatContent(e,n[e]);t.push({label:s,content:i,truncate:!0})}})),t}},{key:"_formatContent",value:function(e,a){return"provider"===e?"aws"===a?"AWS":va.a.upperFirst(a):va.a.toString(a)}},{key:"_getEnvironmentFromConfiguration",value:function(e){var a=new Ca(e);return{elastic:a.elastic,storage:a.storage,salesforce:a.sourceDataSource}}}]),e}(),Xa=Wa,Ya=function(e){var a=e.configuration,t=new Xa(a).createSummaryData(),n=t.salesforce,l=t.elastic,s=t.storage;return r.a.createElement(c.a,{hasNoHeader:!0,className:"slds-card__body_inner"},r.a.createElement(o.a,{title:"Salesforce Source",variant:"record-home",details:n}),r.a.createElement(o.a,{title:"Elasticsearch",variant:"record-home",details:l}),r.a.createElement(o.a,{title:"Cloud Storage",variant:"record-home",details:s}))},Ja=function(e){var a=e.configuration,t=Object(j.f)(),n=function(e){return t.push(e)},l=r.a.createElement(Ha.a,{assistiveText:{label:"Required Configuration"},category:"standard",name:"calibration"}),s=r.a.createElement(Ha.a,{assistiveText:{label:"Advanced Configuration"},category:"standard",name:"custom"});return r.a.createElement(r.a.Fragment,null,r.a.createElement(c.a,{hasNoHeader:!0},r.a.createElement(o.a,{onRenderActions:function(){return r.a.createElement(d.a,null,r.a.createElement(m.a,{label:"Update Credentials",onClick:function(){return n(A.h)}}))},title:"Required Configuration",variant:"record-home",icon:l}),r.a.createElement(Ya,{configuration:a})),r.a.createElement(c.a,{hasNoHeader:!0},r.a.createElement(o.a,{onRenderActions:function(){return r.a.createElement(d.a,null,r.a.createElement(m.a,{label:"Edit Advanced Configuration",onClick:function(){return n(A.g)}}))},title:"Advanced Configuration",variant:"record-home",icon:s}),r.a.createElement(c.a,{hasNoHeader:!0},r.a.createElement(Ka.a,{theme:"dark"},r.a.createElement("p",null,"Only advanced users should edit these settings.")))))},Za=function(){var e=Ta(),a=Object(i.a)(e,1)[0];return!a||va.a.isEqual(a,fa)?r.a.createElement(Ga,null):r.a.createElement(Ja,{configuration:a})},$a=function(e,a){var t=a.payload;switch(a.type){case"ADVANCED_CONFIG_INITIAL_LOAD":case"ADVANCED_CONFIG_SET_VALUE":return Object(R.a)({},e,{},t);default:throw new M}},et=function(e,a){var t=a.type,n=a.payload;switch(t){case"QUICK_START_FORM_INITIAL_LOAD":return Object(R.a)({},e,Object(ma.a)({name:n.name},e.provider,Object(R.a)({},e[e.provider],{provider:e.provider},n)));case"QUICK_START_FORM_SET_PROVIDER":return Object(R.a)({},e,{provider:n.provider});case"QUICK_START_FORM_SET_NAME":return Object(R.a)({},e,Object(ma.a)({name:n.name},e.provider,Object(R.a)({},e[e.provider],{name:n.name})));case"BASIC_CONFIG_SET_VALUE":return Object(R.a)({},e,Object(ma.a)({},e.provider,Object(R.a)({},e[e.provider],{name:e.name,provider:e.provider},n)));default:throw new M}},at=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:et;return function(s){var o=s.children,c=s.value,u=Object(n.useReducer)(l,t),d=Object(i.a)(u,2),m=d[0],f=d[1];return Object(n.useEffect)((function(){void 0!==c&&(c.provider&&f({type:"QUICK_START_FORM_SET_PROVIDER",payload:{provider:c.provider}}),f({type:"QUICK_START_FORM_INITIAL_LOAD",payload:c}))}),[c]),r.a.createElement(e.Provider,{value:m},r.a.createElement(a.Provider,{value:f},o))}},tt=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:$a;return function(s){var o=s.children,c=s.value,u=Object(n.useReducer)(l,t),d=Object(i.a)(u,2),m=d[0],f=d[1];return Object(n.useEffect)((function(){f({type:"ADVANCED_CONFIG_INITIAL_LOAD",payload:c})}),[c]),r.a.createElement(e.Provider,{value:m},r.a.createElement(a.Provider,{value:f},o))}},nt=function(e,a){var t=a.type,n=a.payload,r=a.meta,l=e.provider;switch(t){case"QUICK_START_FORM_INITIAL_LOAD":return Object(R.a)({},e,Object(ma.a)({},l,n));case"QUICK_START_FORM_SET_PROVIDER":return Object(R.a)({},e,{provider:n.provider});case"SALESFORCE_CONNECTION_SET_VALUE":var s=e[l][r.variant];return Object(R.a)({},e,Object(ma.a)({},l,Object(R.a)({},e[l],Object(ma.a)({},r.variant,Object(R.a)({provider:l},s,{},n)))));default:throw new M}},rt=(Ye={provider:"salesforce"},Object(ma.a)(Ye,"salesforce",{salesforceSource:{},einsteinSalesforceDestination:{},bulkRestoreSalesforceDestination:{}}),Object(ma.a)(Ye,"oauth",{}),Ye),lt=Object(n.createContext)(),st=Object(n.createContext)(),it=function(){return[ua(lt),da(st)]},ot=at(lt,st,rt,nt),ct=(Je={name:"Default",provider:"bonsai"},Object(ma.a)(Je,"bonsai",{}),Object(ma.a)(Je,"aws",{}),Object(ma.a)(Je,"elasticIo",{}),Je),ut=Object(n.createContext)(),dt=Object(n.createContext)(),mt=function(){return[ua(ut),da(dt)]},ft=at(ut,dt,ct),Et=(Ze={provider:"aws"},Object(ma.a)(Ze,"aws",{}),Object(ma.a)(Ze,"aws-ecs",{}),Object(ma.a)(Ze,"azure",{}),Object(ma.a)(Ze,"google",{}),Object(ma.a)(Ze,"minio",{}),Ze),bt=Object(n.createContext)(),vt=Object(n.createContext)(),pt=function(){return[ua(bt),da(vt)]},gt=at(bt,vt,Et),ht=function(e,a){var t=a.payload;switch(a.type){case"UPDATE_VENDOR_VALIDITY":return Object(R.a)({},e,{},t);default:throw new M}},Ot=function(){function e(a){var t=a.credentials,n=a.type;a.label;Object(B.a)(this,e),this.graxClient=new _a,this.credentials=t,this.type=n}return Object(Ea.a)(e,[{key:"validate",value:function(){var e;return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,T.a.awrap(this.graxClient.fetch(A.e,{method:"POST",body:JSON.stringify({credentials:this.credentials,type:this.type})}));case 3:return(e=a.sent).userInfo&&(this.credentials=Object(R.a)({},this.credentials,{organizationId:e.userInfo.organizationId})),a.abrupt("return",this.credentials);case 8:if(a.prev=8,a.t0=a.catch(0),!(a.t0 instanceof ga)){a.next=12;break}return a.abrupt("return",a.t0.details);case 12:throw a.t0;case 13:case"end":return a.stop()}}),null,this,[[0,8]])}}]),e}(),_t=function(){var e=Object(n.useReducer)(ht,{}),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useReducer)(q,{isLoading:null,error:null,status:null}),s=Object(i.a)(l,2),o=s[0],c=s[1],u=La()[1],d=u.spinnerIsRunning,m=u.spinnerIsStopped;Object(n.useEffect)((function(){!0===o.isLoading?d("Validating vendor credentials"):!1===o.isLoading&&m()}),[o.isLoading]);return[{vendorValidity:t,fetchState:o},function(e){return T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:!function(){var a;T.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return a=function(){var a,t;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a={},t=e.map((function(e){var t;return T.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return t=new Ot(e),n.abrupt("return",t.validate().then((function(e){var n="failed"===e.status?"failed":"success";a[t.type]=n})));case 2:case"end":return n.stop()}}))})),n.next=4,T.a.awrap(Promise.all(t));case 4:r({payload:Object(R.a)({},a),type:"UPDATE_VENDOR_VALIDITY"});case 5:case"end":return n.stop()}}))},t.next=3,T.a.awrap(Sa(a,c));case 3:case"end":return t.stop()}}))}();case 1:case"end":return a.stop()}}))}]},yt=Object(n.createContext)(),Nt=function(){return Object(n.useContext)(yt)},Ct=function(e){var a=e.children,t=_t(),l=Object(i.a)(t,2),s=l[0].vendorValidity,o=l[1],c=Object(n.useMemo)((function(){return s}),[s]);return r.a.createElement(yt.Provider,{value:{vendorValidationStatus:c,validationDispatch:o}},a)},St=($e={},Object(ma.a)($e,"elastic","Elastic"),Object(ma.a)($e,"storage","cloud storage"),Object(ma.a)($e,"salesforce","Salesforce"),Object(ma.a)($e,"einsteinSalesforceDestination","Einstein Salesforce Destination"),Object(ma.a)($e,"bulkRestoreSalesforceDestination","Bulk Restore Salesforce Destination"),$e),jt={success:{label:"success",category:"utility",colorVariant:"default",name:"success"},failed:{label:"failure",category:"utility",colorVariant:"error",name:"error"}},At=function(e){var a=e.validity,t=Object.keys(a)[0],n=a[t];if(void 0===n)return null;var l=St[t],s={success:"".concat(va.a.capitalize(l)," credentials validated"),failed:"Invalid ".concat(l," credentials")},i=jt[n],o=r.a.createElement(Ha.a,{assistiveText:{label:i.label},category:i.category,colorVariant:i.colorVariant,name:i.name,size:"x-small"});return r.a.createElement("div",{className:"slds-grid slds-row slds-grid_align-center slds-m-bottom_x-small"},r.a.createElement(Ka.a,{icon:o,theme:"light"},r.a.createElement("p",null,s[n])))},It=function(e){var a=e.options,t=e.value,n=e.id,l=e.required,s=void 0===l||l,i=e.onClick,o=function(e){!1===s&&e===t?i(null):i(e,n)};return r.a.createElement(f.a,null,a.map((function(e){return r.a.createElement(m.a,{label:e.label,key:e.label,onClick:function(){return o(e.value)},variant:e.value===t?"brand":"neutral",disabled:e.disabled})})))},Tt=t(39),Rt=t(61),kt=function(e){var a=e.value,t=e.type,l=void 0===t?"text":t,s=e.helpText,o=e.disabled,c=void 0!==o&&o,u=e.onBlur,d=e.secured,m=e.blocked,f=Object(b.a)(e,["value","type","helpText","disabled","onBlur","secured","blocked"]),E=Object(n.useState)(a),v=Object(i.a)(E,2),p=v[0],g=v[1],h=Object(n.useState)(d?"password":l),O=Object(i.a)(h,2),_=O[0],y=O[1],N=Object(n.useState)(!!m||c),C=Object(i.a)(N,2),S=C[0],j=C[1];return Object(n.useEffect)((function(){return g(a)}),[a]),r.a.createElement(de.a,Object.assign({value:p,type:_,disabled:S,onBlur:function(e){!0===m&&j(!0),void 0!==u&&u(e)},onChange:function(e){return g(e.target.value)}},!0===d?function(e,a){return{iconRight:r.a.createElement(Tt.a,{name:"password"===e?"preview":"hide",category:"utility",onClick:a})}}(_,(function(){return y("password"===_?l:"password")})):{},!0===m?function(e,a){return{iconRight:r.a.createElement(Tt.a,{name:!0===e?"edit":"error",category:"utility",onClick:a})}}(S,(function(){return j(!S)})):{},void 0!==s?function(e){return{fieldLevelHelpTooltip:r.a.createElement(Rt.a,{id:"field-level-help-tooltip",align:"top left",content:e})}}(s):{},f))},wt=function(e){var a=e.userName,t=e.password,l=e.token,s=e.url,i=e.organizationId,o=e.onBlur,c=e.validationDispatch;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"SFDC Username",required:!0,value:a,id:"userName",onBlur:o})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"SFDC Password",required:!0,secured:!0,value:t,id:"password",onBlur:o})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"SFDC Security Token",required:!0,secured:!0,value:l,id:"token",onBlur:o}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"SFDC URL",helpText:"https://login.salesforce.com for Production  |  https://test.salesforce.com for Sandbox",required:!0,value:s,id:"url",onBlur:o})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{readOnly:!0,label:"SFDC Organization ID (18 Digit)",value:i,id:"organizationId",onBlur:o}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small slds-m-top_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(m.a,{label:"Validate SFDC Connection",variant:"outline-brand",onClick:c}))))},Dt=t(148),xt=function(e){return Object(Dt.a)(e),r.a.createElement("div",{className:"slds-grid slds-gutters_small slds-m-top_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(m.a,{label:"OAuth",variant:"outline-brand"})))},Bt=function(e,a){if(void 0===e)throw new Error("Action Name is required");if(void 0===a)throw new Error("Dispatch is required");return function(t,n,r){if(void 0===t)throw new Error("Property name is required");a({meta:r,type:e,payload:Object(ma.a)({},t,n)})}},zt=function(e,a){var t=Bt(e,a);return function(e){var a=e.target,n=a.type,r=a.id,l=a.valueAsNumber,s=a.value,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.meta,c=void 0===o?{}:o,u=i.valueCasting,d=void 0===u||u;if(void 0===r)throw new Error("Id is required");var m="number"===n&&!0===d?l:s;t(r,m,c)}},Pt=function(e,a){var t=Bt(e,a);return function(e,a){if(void 0===e)throw new Error("Name is required");t(e,1===a.length?a[0].value:null)}},Ft=function(e,a){var t=Bt(e,a);return function(e,a){var n=e.target.id,r=a.checked;if(void 0===n)throw new Error("Id is required");t(n,r)}},Lt=function(e,a){var t=Bt(e,a);return function(e,a){if(void 0===a)throw new Error("Id is required");t(a,e)}},Mt=function(e){if(void 0===e.provider)throw new Error("No Provider Tab Selected");return e[e.provider]},Ut=[{label:"Username / Password",value:"salesforce"},{label:"OAuth",value:"oauth",disabled:!0}],Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"salesforceSource",a=it(),t=Object(i.a)(a,2),n=t[0],r=t[1],l=Mt(n),s=zt("SALESFORCE_CONNECTION_SET_VALUE",r),o=function(a){return s(a,{meta:{variant:e}})},c=l[e]||{},u=c.userName,d=c.password,m=c.token,f=c.url,E=c.name,b=c.organizationId,v=n.provider;return[{selectedProvider:v,userName:u,password:d,token:m,url:f,name:E,organizationId:b,options:Ut},{onBlur:o,dispatch:r}]},qt=function(e){var a=e.variant,t=e.showConnectionName,n=void 0!==t&&t,l=Vt(a),s=Object(i.a)(l,2),o=s[0],c=o.userName,u=o.password,d=o.token,m=o.url,f=o.name,E=o.organizationId,b=o.options,v=o.selectedProvider,p=s[1],g=p.onBlur,h=p.dispatch,O=Nt(),_=O.vendorValidationStatus,y=O.validationDispatch;return r.a.createElement(r.a.Fragment,null,r.a.createElement(At,{validity:{salesforce:_.salesforce}}),!0===n&&r.a.createElement("div",{className:"slds-grid slds-gutters_small slds-m-bottom_small"},r.a.createElement("div",{className:"slds-col slds-size_2-of-3"},r.a.createElement(kt,{label:"Connection Name",required:!0,value:f,id:"name",helpText:'Please name your Salesforce connection e.g. "Dev Sandbox\u201c',onBlur:g}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_2-of-3"},r.a.createElement(It,{options:b,value:v,onClick:function(e){return h({type:"QUICK_START_FORM_SET_PROVIDER",payload:{provider:e}})}}))),"salesforce"===v?r.a.createElement(wt,{userName:c,password:u,token:d,url:m,name:f,organizationId:E,onBlur:g,validationDispatch:function(){y([{type:"salesforce",credentials:{provider:v,userName:c,password:u,token:d,url:m,name:f,organizationId:E}}])}}):r.a.createElement(xt,null))},Gt=function(){return r.a.createElement(Z.a,{title:"Salesforce Connection",className:"slds-m-bottom_medium slds-m-top_none",nonCollapsible:!0},r.a.createElement(qt,{showConnectionName:!0}))},Ht=function(e){var a=e.url,t=e.onBlur;return r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Bonsai URL",required:!0,value:a,id:"url",onBlur:t})))},Kt=Object.entries((ea={},Object(ma.a)(ea,"us-east-2","US East (Ohio)"),Object(ma.a)(ea,"us-east-1","US East (N. Virginia)"),Object(ma.a)(ea,"us-west-1","US West (N. California)"),Object(ma.a)(ea,"us-west-2","US West (Oregon)"),Object(ma.a)(ea,"ap-east-1","Asia Pacific (Hong Kong)"),Object(ma.a)(ea,"ap-south-1","Asia Pacific (Mumbai)"),Object(ma.a)(ea,"ap-northeast-3","Asia Pacific (Osaka-Local)"),Object(ma.a)(ea,"ap-northeast-2","Asia Pacific (Seoul)"),Object(ma.a)(ea,"ap-southeast-1","Asia Pacific (Singapore)"),Object(ma.a)(ea,"ap-southeast-2","Asia Pacific (Sydney)"),Object(ma.a)(ea,"ap-northeast-1","Asia Pacific (Tokyo)"),Object(ma.a)(ea,"ca-central-1","Canada (Central)"),Object(ma.a)(ea,"eu-central-1","Europe (Frankfurt)"),Object(ma.a)(ea,"eu-west-1","Europe (Ireland)"),Object(ma.a)(ea,"eu-west-2","Europe (London)"),Object(ma.a)(ea,"eu-west-3","Europe (Paris)"),Object(ma.a)(ea,"eu-north-1","Europe (Stockholm)"),Object(ma.a)(ea,"me-south-1","Middle East (Bahrain)"),Object(ma.a)(ea,"sa-east-1","South America (S\xe3o Paulo)"),ea)).map((function(e){var a=Object(i.a)(e,2),t=a[0];return{label:a[1],value:t}})),Qt=function(e){var a=e.label,t=e.value,n=e.id,l=e.onChange;return r.a.createElement(he,{value:t,id:n,onChange:function(e,a){return l(a)},options:Kt,required:!0,labels:{label:a,placeholder:"Select Option"}})},Wt=function(e){var a=e.url,t=e.accessKey,n=e.secretAccessKey,l=e.region,s=e.onBlur,i=e.handleCombobox;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Endpoint Name",required:!0,value:a,id:"url",onBlur:s})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Access Key ID",required:!0,secured:!0,value:t,id:"accessKey",onBlur:s}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Secret Access Key",required:!0,secured:!0,value:n,id:"secretAccessKey",onBlur:s})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(Qt,{value:l,label:"S3 Region",onChange:function(e){return i("region",e)}}))))},Xt=function(e){var a=e.user,t=e.password,l=e.url,s=e.port,i=e.onBlur;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Elastic Username",required:!0,value:a,id:"user",onBlur:i})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Elastic Password",required:!0,secured:!0,value:t,id:"password",onBlur:i}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Elastic URL",required:!0,value:l,id:"url",onBlur:i})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{type:"number",label:"Elastic Port",required:!0,value:s,id:"port",onBlur:i}))))},Yt=function(e){var a=zt("BASIC_CONFIG_SET_VALUE",e.dispatch),t=Pt("BASIC_CONFIG_SET_VALUE",e.dispatch);switch(e.selectedProvider){case"bonsai":return r.a.createElement(Ht,{url:e.url,onBlur:a});case"aws":return r.a.createElement(Wt,{url:e.url,accessKey:e.accessKey,secretAccessKey:e.secretAccessKey,region:e.region,bucket:e.bucket,onBlur:a,handleCombobox:t});case"elasticIo":return r.a.createElement(Xt,{user:e.user,password:e.password,url:e.url,port:e.port,onBlur:a});default:return null}},Jt=[{label:"Bonsai Elasticsearch",value:"bonsai"},{label:"AWS Elasticsearch",value:"aws"},{label:"Elastic.co",value:"elasticIo"}],Zt=function(){var e=mt(),a=Object(i.a)(e,2),t=a[0],n=a[1],r=zt("QUICK_START_FORM_SET_NAME",n),l=Lt("QUICK_START_FORM_SET_PROVIDER",n),s=t.name,o=t.provider;return[{name:s,selectedProvider:o,provider:t[o],options:Jt},{onBlur:r,handleButtonGroup:l,dispatch:n}]},$t=function(){var e=Zt(),a=Object(i.a)(e,2),t=a[0],l=t.selectedProvider,s=t.name,o=t.provider,c=t.options,u=a[1],d=u.handleButtonGroup,f=u.onBlur,E=u.dispatch,b=Nt(),v=b.vendorValidationStatus,p=b.validationDispatch;return r.a.createElement(n.Fragment,null,r.a.createElement(Z.a,{title:"Elasticsearch Provider",className:"slds-m-bottom_medium slds-m-top_none",nonCollapsible:!0},r.a.createElement("div",{className:"slds-grid slds-gutters_small  slds-m-bottom_small"},r.a.createElement("div",{className:"slds-col slds-size_2-of-3"},r.a.createElement(kt,{label:"Name",required:!0,value:s,id:"name",onBlur:f}))),r.a.createElement(At,{validity:{elastic:v.elastic}}),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_2-of-3"},r.a.createElement(It,{options:c,value:l,id:"provider",onClick:d}))),r.a.createElement(Yt,Object.assign({selectedProvider:l},o,{dispatch:E})),r.a.createElement("div",{className:"slds-grid slds-gutters_small slds-m-top_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(m.a,{label:"Validate Elastic Connection",onClick:function(){p([{type:"elastic",credentials:Object(R.a)({},o)}])}})))))},en=function(e){var a=e.clientId,t=e.tokenUrl,n=e.clientSecret,l=e.onBlur;return r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"OAuth Client ID",value:a,id:"clientId",onBlur:l})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"OAuth Client Secret",value:n,id:"clientSecret",onBlur:l})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"OAuth Token URL",value:t,id:"tokenUrl",onBlur:l})))},an=function(e){var a=e.label,t=e.helpText;return r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"slds-form-element__label"},a),null!==t&&r.a.createElement(Rt.a,{content:t,align:"top left",variant:"learnMore",dialogClassName:"dialog-classname"}))},tn=function(e){var a=e.isADestructiveAction,t=void 0!==a&&a,l=Object(n.useRef)(!1),s=Object(n.useState)(!1),o=Object(i.a)(s,2),c=o[0],u=o[1];return Object(n.useEffect)((function(){!1===l.current?l.current=!0:!1===t&&u(!0)}),[t]),r.a.createElement(se.a,{noHeader:!0,footer:[r.a.createElement(m.a,{key:"promptBtn",label:"Ok",onClick:function(){return u(!1)}})],isOpen:c,onRequestClose:function(){return u(!1)},prompt:"error",size:"small",title:"Confirmation Needed"},r.a.createElement("div",{className:"slds-m-around_medium"},"You will lose these credentials if you disable this feature, and will need to re-enter later if you want to re-enable this feature"))},nn=function(e){var a=e.id,t=e.label,l=e.checked,s=e.onToggle,o=e.helpText,c=void 0===o?null:o,u=e.isDestructive,d=void 0!==u&&u,m=Object(n.useState)(!1),f=Object(i.a)(m,2),E=f[0],b=f[1];return Object(n.useEffect)((function(){return b(l)}),[l]),r.a.createElement(r.a.Fragment,null,r.a.createElement(an,{label:t,helpText:c}),r.a.createElement("div",{className:"slds-form-element__control"},r.a.createElement(me.a,{variant:"toggle",id:a,checked:E,onChange:s})),d&&r.a.createElement(tn,{isADestructiveAction:E}))},rn=function(e){var a=e.s3CompatibleEndpoint,t=e.bucket,n=e.accessKeyName,l=e.secretAccessKey,s=e.enableOAuth,i=e.clientId,o=e.tokenUrl,c=e.clientSecret,u=e.region,d=e.onBlur,m=e.handleCheckbox,f=e.handleCombobox;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Endpoint",required:!0,value:a,id:"s3CompatibleEndpoint",onBlur:d})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"S3 Bucket Name",required:!0,value:t,id:"bucket",onBlur:d})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(Qt,{label:"S3 Region",value:u,onChange:function(e){return f("region",e)}}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Access Key ID",required:!0,secured:!0,value:n,id:"accessKey",onBlur:d})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Secret Access Key",required:!0,secured:!0,value:l,id:"secretAccessKey",onBlur:d})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(nn,{label:"Enable OAuth",checked:s,id:"enableOAuth",variant:"toggle",isDestructive:!0,onToggle:m}))),!0===s&&r.a.createElement(en,{clientId:i,tokenUrl:o,clientSecret:c,onBlur:d}))},ln=function(e){var a=e.s3AssumeRoleArn,t=e.s3AssumeRoleRefreshCredsInHour,l=e.s3AssumeRoleExternalId,s=e.onBlur;return r.a.createElement(n.Fragment,null,r.a.createElement("h3",{class:"slds-section__title"},r.a.createElement("span",{class:"slds-truncate",title:"Cloud Storage Provider"},"Assume Role Options")),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Assume Role / ARN Name",required:!0,value:a,id:"s3AssumeRoleArn",onBlur:s})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Refresh Token / Expiry Time (Hours)",type:"number",required:!0,value:t,id:"s3AssumeRoleRefreshCredsInHour",onBlur:s})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Assume Role External ID",value:l,id:"s3AssumeRoleExternalId",onBlur:s}))))},sn=function(e){var a=e.heading;return r.a.createElement("div",{className:"slds-grid slds-gutters_small slds-m-top_x-small"},r.a.createElement("div",{className:"slds-col slds-size_3-of-3"},r.a.createElement("h3",{class:"slds-section__title"},r.a.createElement("span",{class:"slds-truncate",title:"Cloud Storage Provider"},a))))},on=[{label:"AES256",value:"AES256"},{label:"AWS KMS",value:"AWS KMS"},{label:"No Encryption",value:""}],cn=function(e){var a=e.serverSideEncryption,t=void 0===a?"AES256":a,l=e.serverSideEncryptionKmsKey,s=e.onBlur,i=e.handleButtonGroup;return r.a.createElement(n.Fragment,null,r.a.createElement(sn,{heading:"Server-Side Encryption"}),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement("span",{className:"slds-form-element__label"},"\xa0"),r.a.createElement("div",{className:"slds-form-element__control"},r.a.createElement(It,{options:on,value:t,id:"serverSideEncryption",onClick:i}))),"AWS KMS"===t&&r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"S3 KMS ID",value:l,id:"serverSideEncryptionKmsKey",onBlur:s}))))},un=function(e){var a=e.accessKeyName,t=e.secretAccessKey,n=e.bucket,l=e.region,s=e.s3AssumeRoleEnabled,i=e.s3AssumeRoleArn,o=e.s3AssumeRoleRefreshCredsInHour,c=e.s3AssumeRoleExternalId,u=e.serverSideEncryptionKmsKey,d=e.serverSideEncryption,m=e.onBlur,f=e.handleButtonGroup,E=e.handleCheckbox,b=e.handleCombobox;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"S3 Bucket Name",required:!0,value:n,id:"bucket",onBlur:m})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(Qt,{label:"S3 Region",value:l,onChange:function(e){return b("region",e)}})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Access Key ID",required:!0,secured:!0,value:a,id:"accessKey",onBlur:m}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Secret Access Key",required:!0,secured:!0,value:t,id:"secretAccessKey",onBlur:m})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(nn,{label:"Assume Role Enabled",checked:s,id:"s3AssumeRoleEnabled",variant:"toggle",isDestructive:!0,onToggle:E}))),!0===s&&r.a.createElement(ln,{s3AssumeRoleArn:i,s3AssumeRoleRefreshCredsInHour:o,s3AssumeRoleExternalId:c,onBlur:m}),r.a.createElement(cn,{serverSideEncryptionKmsKey:u,serverSideEncryption:d,onBlur:m,handleButtonGroup:f}))},dn=function(e){var a=e.storageAccountName,t=e.containerName,n=e.accountAccessKey,l=e.onBlur;return r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Azure Storage Account Name",required:!0,value:a,id:"storageAccountName",onBlur:l})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Azure Container Name",required:!0,value:t,id:"containerName",onBlur:l})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Storage Account Access Key",required:!0,secured:!0,value:n,id:"accountAccessKey",onBlur:l})))},mn=function(e){var a=e.googleProjectId,t=e.googleBucketName,l=e.googlePrivateKey,s=e.googleClientEmail,i=e.onBlur;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Google Project Id",required:!0,value:a,id:"googleProjectId",onBlur:i})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Google Bucket Name",required:!0,value:t,id:"googleBucketName",onBlur:i})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Google Private Key",secured:!0,required:!0,value:l,id:"googlePrivateKey",onBlur:i}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Google Client Email",value:s,id:"googleClientEmail",onBlur:i}))))},fn=function(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(de.a,{label:"Minio Endpoint"})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(de.a,{label:"Minio Port"})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(de.a,{label:"Minio Access Key"}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(de.a,{label:"Minio Secret Key"})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(de.a,{label:"Minio Bucket Name"}))))},En=function(e){var a=e.dispatch,t=zt("BASIC_CONFIG_SET_VALUE",a),n=Pt("BASIC_CONFIG_SET_VALUE",a),l=Ft("BASIC_CONFIG_SET_VALUE",a),s=Lt("BASIC_CONFIG_SET_VALUE",a);switch(e.selectedProvider){case"aws":return r.a.createElement(un,{provider:e.provider,name:e.name,accessKeyName:e.accessKey,secretAccessKey:e.secretAccessKey,bucket:e.bucket,region:e.region,s3AssumeRoleEnabled:e.s3AssumeRoleEnabled,serverSideEncryptionKmsKey:e.serverSideEncryptionKmsKey,serverSideEncryption:e.serverSideEncryption,onBlur:t,handleButtonGroup:s,handleCheckbox:l,handleCombobox:n});case"aws-ecs":return r.a.createElement(rn,{s3CompatibleEndpoint:e.s3CompatibleEndpoint,bucket:e.bucket,region:e.region,accessKeyName:e.accessKey,secretAccessKey:e.secretAccessKey,enableOAuth:e.enableOAuth,clientId:e.clientId,tokenUrl:e.tokenUrl,clientSecret:e.clientSecret,onBlur:t,handleCheckbox:l,handleCombobox:n});case"azure":return r.a.createElement(dn,{storageAccountName:e.storageAccountName,containerName:e.containerName,accountAccessKey:e.accountAccessKey,onBlur:t});case"google":return r.a.createElement(mn,{googleProjectId:e.googleProjectId,googleBucketName:e.googleBucketName,googlePrivateKeyId:e.googlePrivateKeyId,googlePrivateKey:e.googlePrivateKey,googleClientEmail:e.googleClientEmail,onBlur:t});case"minio":return r.a.createElement(fn,null);default:return null}},bn=[{label:"AWS S3 Storage",value:"aws"},{label:"S3 Compatible",value:"aws-ecs"},{label:"Azure BLOB",value:"azure"},{label:"Google Cloud Platform",value:"google"}],vn=function(){var e=pt(),a=Object(i.a)(e,2),t=a[0],n=a[1],r=Lt("QUICK_START_FORM_SET_PROVIDER",n),l=t.provider;return[{selectedProvider:l,provider:t[l],options:bn},{handleButtonGroup:r,dispatch:n}]},pn=function(){var e=vn(),a=Object(i.a)(e,2),t=a[0],n=t.selectedProvider,l=t.provider,s=t.options,o=a[1],c=o.handleButtonGroup,u=o.dispatch,d=Nt(),f=d.vendorValidationStatus,E=d.validationDispatch;return r.a.createElement(Z.a,{title:"Cloud Storage Provider",className:"slds-m-bottom_medium slds-m-top_none",nonCollapsible:!0},r.a.createElement(At,{validity:{storage:f.storage}}),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_2-of-3"},r.a.createElement(It,{options:s,value:n,id:"provider",onClick:c}))),r.a.createElement(En,Object.assign({selectedProvider:n},l,{dispatch:u})),r.a.createElement("div",{className:"slds-grid slds-gutters_small slds-m-top_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(m.a,{label:"Validate Storage Connection",onClick:function(){E([{type:"storage",credentials:Object(R.a)({},l)}])}}))))},gn=function(e){var a=function(){var e=Object(n.useState)(null),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useReducer)(V,U),s=Object(i.a)(l,2),o=s[0],c=s[1],u=Ta()[0];return Object(n.useEffect)((function(){null!==t&&(c({type:"FETCH_IS_LOADING",payload:{isLoading:!0}}),function(){var e,a,n,r;T.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return e={},a=[],n=[],r=t.map((function(t){var r;return T.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return r=new Ot(t),l.abrupt("return",r.validate().then((function(r){var l=t.label||t.type;if(e[l]=r,"failed"===r.status)a.push(l);else if("salesforce"===t.type){var s=new Ca(u).validateUniqueDataSourceName(r);s&&n.push(s)}})));case 2:case"end":return l.stop()}}))})),l.next=6,T.a.awrap(Promise.all(r));case 6:a.length>0||n.length>0?c({type:"FETCH_THROW_ERROR",payload:{error:{invalidCredentials:a,duplicateOrgNames:n}}}):c({type:"FETCH_SET_DATA",payload:{data:e}}),c({type:"FETCH_IS_LOADING",payload:{isLoading:!1}});case 8:case"end":return l.stop()}}))}())}),[t,r]),[o,r]}(),t=Object(i.a)(a,2),r=t[0],l=t[1],s=function(){var e=Object(n.useState)(null),a=Object(i.a)(e,2),t=a[0],r=a[1],l=Object(n.useReducer)(V,U),s=Object(i.a)(l,2),o=s[0],c=s[1];return Object(n.useEffect)((function(){null!==t&&(c({type:"FETCH_IS_LOADING",payload:{isLoading:!0}}),function(){var e;T.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,e=new Ca(t),a.next=4,T.a.awrap(e.save());case 4:c({type:"FETCH_SET_DATA",payload:{data:e.configuration}}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),c({type:"FETCH_THROW_ERROR",payload:{error:a.t0.message}});case 10:c({type:"FETCH_IS_LOADING",payload:{isLoading:!1}});case 11:case"end":return a.stop()}}),null,null,[[0,7]])}())}),[t]),[o,r]}(),o=Object(i.a)(s,2),c=o[0],u=o[1],d=La(),m=Object(i.a)(d,2)[1],f=m.spinnerIsRunning,E=m.spinnerIsStopped,b=m.successNotification,v=m.errorNotification;return Object(n.useEffect)((function(){!0===r.isLoading||!0===c.isLoading?f():!1!==c.isLoading&&null===r.error||E()}),[c.isLoading,r.isLoading,r.error]),Object(n.useEffect)((function(){!0===c.success&&b("Configuration saved successfully")}),[c.success]),Object(n.useEffect)((function(){null!==c.error&&v("Could not save configuration")}),[c.error]),Object(n.useEffect)((function(){if(null!==r.error&&!1===r.isLoading){var e="";if(r.error.duplicateOrgNames.length>0&&(e+="Salesforce connections must have unique names. ",r.error.duplicateOrgNames.forEach((function(a){var t=a.organizationId,n=a.name;e+='"'.concat(n,'" is already used by connection ').concat(t,".")})),v(e+=" Please rename your new connection and try again. ")),r.error.invalidCredentials.length>0){var a=r.error.invalidCredentials.map((function(e){return St[e]})).join(", ");e+="Invalid credentials: ".concat(a),v(e)}}}),[r.error,r.isLoading]),Object(n.useEffect)((function(){!0===c.success&&null!==c.data&&e({type:"CONFIGURATION_LOAD_INITIAL_STATE",payload:c.data})}),[c.success,c.data,e]),[r,{saveConfiguration:u,validateVendors:l}]},hn=function(){var e=Ta(),a=Object(i.a)(e,2),t=a[0],r=a[1],l=it(),s=Object(i.a)(l,1)[0],o=mt(),c=Object(i.a)(o,1)[0],u=pt(),d=Object(i.a)(u,1)[0],m=Mt(s),f=Mt(c),E=Mt(d),b=gn(r),v=Object(i.a)(b,2),p=v[0],g=p.success,h=p.data,O=v[1],_=O.saveConfiguration,y=O.validateVendors;Object(n.useEffect)((function(){if(!0===g){var e=new Ca(t);e.sourceDataSource=h.salesforce,e.elastic=f,e.storage=E,_(e.configuration)}}),[g,h]);return function(){return T.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:y([{type:"salesforce",credentials:m.salesforceSource},{type:"elastic",credentials:f},{type:"storage",credentials:E}]);case 1:case"end":return e.stop()}}))}},On=function(e){var a=e.formRef,t=e.onSubmit,n=Object(j.f)();return r.a.createElement(f.a,null,r.a.createElement(m.a,{label:"Cancel",onClick:function(){return n.push(A.j)}}),r.a.createElement(m.a,{label:"Save",onClick:function(){!0===a.current.checkValidity()&&"function"===typeof t&&t()},type:"submit",variant:"brand"}))},_n=function(e){var a=e.formRef,t=hn();return r.a.createElement(On,{formRef:a,onSubmit:t})},yn=function(){var e=Ta()[0],a=Object(n.createRef)(),t=new Ca(e);return[{dataSources:{salesforceSource:t.sourceDataSource},elastic:t.elastic,storage:t.storage,formRef:a}]},Nn=function(){var e=yn(),a=Object(i.a)(e,1)[0],t=a.dataSources,n=a.elastic,l=a.storage,s=a.formRef;return r.a.createElement(Ct,null,r.a.createElement(ot,{value:t},r.a.createElement(ft,{value:n},r.a.createElement(gt,{value:l},r.a.createElement("form",{ref:s,onSubmit:function(e){return e.preventDefault()}},r.a.createElement(c.a,{heading:"",style:{flexGrow:1},headerActions:r.a.createElement(_n,{formRef:s})},r.a.createElement(qa,{text:"Ensure you have the correct credentials for ALL sections before beginning.\n        Upon saving the page, a test will be made to verify each connection.\n        You will not be able to save until all connections are validated."}),r.a.createElement("div",{className:"slds-p-horizontal_medium"},r.a.createElement(Gt,null),r.a.createElement($t,null),r.a.createElement(pn,null))))))))},Cn={sourceControlProvider:"github"},Sn=Object(n.createContext)(),jn=Object(n.createContext)(),An=function(){return[ua(Sn),da(jn)]},In=tt(Sn,jn,Cn),Tn=function(e,a){var t=a.payload,n=a.type;switch(n){case"ENVIRONMENT_VARIABLE_SET_VARS":return Object(R.a)({},e,{variables:Object(R.a)({},e.variables,{},t)});case"ENVIRONMENT_VARIABLE_SET_TIME_MACHINE":return Object(R.a)({},e,{timeMachine:Object(R.a)({},e.timeMachine,{},t)});case"ENVIRONMENT_VARIABLE_SET_PUSH_TO_QUEUE":return Object(R.a)({},e,{pushToQueue:Object(R.a)({},e.pushToQueue,{},t)});default:return $a(e,{payload:t,type:n})}},Rn=Object(n.createContext)(),kn=Object(n.createContext)(),wn=function(){return[ua(Rn),da(kn)]},Dn=tt(Rn,kn,{},Tn),xn=Object(n.createContext)(),Bn=Object(n.createContext)(),zn=function(){return[ua(xn),da(Bn)]},Pn=tt(xn,Bn),Fn=[{label:"Github",value:"github"},{label:"GitLab",value:"gitlab"}],Ln=function(e){return[{options:Fn}]},Mn=function(e){var a=e.sourceControlProvider,t=e.gitRepositoryName,l=e.gitRepoAuthorizationToken,s=e.gitUserId,o=e.handleButtonGroup,c=e.onBlur,u=Ln(),d=Object(i.a)(u,1)[0].options;return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(It,{options:d,value:a,id:"sourceControlProvider",onClick:o}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Git Repository Name",required:!0,value:t,id:"gitRepositoryName",onBlur:c})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Git Repository Authorization Token",helpText:"In Github you should be able to find by navigating to: user>settings>developer settings>personal access token>generate token",required:!0,secured:!0,value:l,id:"gitRepoAuthorizationToken",onBlur:c})),"github"===a&&r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Git User ID",required:!0,value:s,id:"gitUserId",onBlur:c}))))},Un=function(){var e=An(),a=Object(i.a)(e,2),t=a[0],n=a[1],l=zt("ADVANCED_CONFIG_SET_VALUE",n),s=Lt("ADVANCED_CONFIG_SET_VALUE",n),o=Ft("ADVANCED_CONFIG_SET_VALUE",n),c=t.isEnabled,u=t.sourceControlEnabled,d=t.sourceControlProvider,m=t.gitRepositoryName,f=t.gitRepoAuthorizationToken,E=t.gitUserId,b=!0===c&&r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(nn,{label:"Enable Git Integration",id:"sourceControlEnabled",checked:u,isDestructive:!0,variant:"toggle",onToggle:o})),v=!0===c&&!0===u&&r.a.createElement(Mn,{gitRepositoryName:m,gitRepoAuthorizationToken:f,gitUserId:E,sourceControlProvider:d,handleButtonGroup:s,onBlur:l});return r.a.createElement(Z.a,{title:"Metadata Backup Settings",className:"slds-m-bottom_medium slds-m-top_none"},r.a.createElement("div",{className:"slds-grid slds-gutters_small slds-m-bottom_x-small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(nn,{label:"Enable Metadata Backup",helpText:"By default, metadata will always be backed up to the configured cloud storage provider.",id:"isEnabled",checked:c,isDestructive:!0,onToggle:o})),b),v)},Vn=function(e){var a=e.syncEinsteinAnalyticsDatasetName,t=e.syncSalesforceObjects,l=e.onBlur;return r.a.createElement(n.Fragment,null,r.a.createElement(sn,{heading:"Einstein Analytics Settings"}),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Einstein Dataset Name",helpText:"The Einstein dataset will get created with a default name; you can use this option to set a specific name for the dataset",value:a,id:"syncEinsteinAnalyticsDatasetName",onBlur:l})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"AnalyticsObjects",value:t,id:"syncSalesforceObjects",onBlur:l}))))},qn=function(){return r.a.createElement(n.Fragment,null,r.a.createElement(sn,{heading:"Einstein Salesforce Destination"}),r.a.createElement("div",{className:" slds-m-top_x-small"},r.a.createElement(qt,{showConnectionName:!0,variant:"einsteinSalesforceDestination"})))},Gn=function(e){var a=e.marketingCloudHost,t=e.marketingCloudUser,l=e.marketingCloudPassword,s=e.marketingCloudPort,i=e.onBlur;return r.a.createElement(n.Fragment,null,r.a.createElement(sn,{heading:"Marketing Cloud Settings"}),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Marketing Cloud Host (FTP)",required:!0,value:a,id:"marketingCloudHost",onBlur:i})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Marketing Cloud Username (FTP)",required:!0,value:t,id:"marketingCloudUser",onBlur:i})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Marketing Cloud Password (FTP)",required:!0,secured:!0,value:l,id:"marketingCloudPassword",onBlur:i}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Marketing Cloud Port (FTP)",type:"number",required:!0,value:s,id:"marketingCloudPort",onBlur:i}))))},Hn=function(e){var a=zn(),t=Object(i.a)(a,2),r=t[0],l=t[1],s=zt("ADVANCED_CONFIG_SET_VALUE",l),o=Ft("ADVANCED_CONFIG_SET_VALUE",l),c=Bt("ADVANCED_CONFIG_SET_VALUE",l),u=r.marketingCloudHost,d=r.marketingCloudUser,m=r.marketingCloudPassword,f=r.marketingCloudPort,E=r.syncQueryFile,b=r.syncBatchSize,v=r.syncDestinationAnalyticsUrl,p=r.syncSalesforceObjects,g=r.syncEinsteinAnalyticsDatasetName,h=r.isEinsteinAnalyticsEnabled,O=r.isMarketingCloudEnabled;return Object(n.useEffect)((function(){void 0!==e&&c("isEinsteinAnalyticsEnabled",!0)}),[e]),Object(n.useEffect)((function(){void 0!==u&&c("isMarketingCloudEnabled",!0)}),[u]),[{isEinsteinAnalyticsEnabled:h,isMarketingCloudEnabled:O,marketingCloudHost:u,marketingCloudUser:d,marketingCloudPassword:m,marketingCloudPort:f,syncQueryFile:E,syncBatchSize:b,syncDestinationAnalyticsUrl:v,syncSalesforceObjects:p,syncEinsteinAnalyticsDatasetName:g},{onBlur:s,handleCheckbox:o}]},Kn=function(e){var a=e.syncSalesforceEinsteinOrganizationId,t=Hn(a),n=Object(i.a)(t,2),l=n[0],s=l.isEinsteinAnalyticsEnabled,o=l.isMarketingCloudEnabled,c=l.marketingCloudHost,u=l.marketingCloudUser,d=l.marketingCloudPassword,m=l.marketingCloudPort,f=l.syncQueryFile,E=l.syncBatchSize,b=l.syncSalesforceObjects,v=l.syncEinsteinAnalyticsDatasetName,p=n[1],g=p.onBlur,h=p.handleCheckbox;return r.a.createElement(Z.a,{title:"Data Sync",className:"slds-m-bottom_medium slds-m-top_none"},r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(nn,{label:"Einstein Analytics",checked:s,id:"isEinsteinAnalyticsEnabled",isDestructive:!0,variant:"toggle",onToggle:h})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(nn,{label:"Marketing Cloud",checked:o,id:"isMarketingCloudEnabled",isDestructive:!0,variant:"toggle",onToggle:h}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Query File",helpText:"Please ensure the query file is a json file and .json is included in the file name you enter here. This json configuration query file must be stored in the following path of your cloud storage providerExample Path: Amazon S3 > Vandelay Industries Prod Bucket > grax > audittrail > salesforce > Org ID of Salesforce Environment > configurationqueryfile.json",required:!0,value:f,id:"syncQueryFile",onBlur:g})),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,{label:"Batch Size",type:"number",value:E,id:"syncBatchSize",onBlur:g}))),!0===s&&r.a.createElement(r.a.Fragment,null,r.a.createElement(Vn,{syncEinsteinAnalyticsDatasetName:v,syncSalesforceObjects:b,onBlur:g}),r.a.createElement(qn,null)),o&&r.a.createElement(Gn,{marketingCloudHost:c,marketingCloudUser:u,marketingCloudPassword:d,marketingCloudPort:m,onBlur:g}))},Qn=function(e){var a=e.cdcEnabled,t=e.handleCheckbox,l=Object(n.useState)(),s=Object(i.a)(l,2),o=s[0],c=s[1];return Object(n.useEffect)((function(){c("true"===a||!0===a)}),[a]),r.a.createElement(Z.a,{title:"Change Data Capture",className:"slds-m-bottom_medium slds-m-top_none"},r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(nn,{label:"Enable Change Data Capture",helpText:"This must be enabled for Change Data Capture to work. Please note you also must enable for each specific object within Salesforce's Change Data Capture setup. Ensure you do not have a GRAX Time Machine Apex Trigger enabled on any objects for which you have enabled CDC.",checked:o,id:"cdcEnabled",onToggle:t}))))},Wn=function(e){var a=e.isOpen,t=e.onRequestClose,n=e.confirm;return r.a.createElement(se.a,{noHeader:!0,footer:[r.a.createElement(m.a,{key:"promptBtn",label:"Cancel",onClick:t}),r.a.createElement(m.a,{key:"promptBtn",label:"Confirm",variant:"brand",onClick:n})],isOpen:a,onRequestClose:t,prompt:"error",size:"medium",title:"Confirmation Needed to Reveal Section"},r.a.createElement("div",{className:"slds-m-around_medium"},"This section is meant for configuring system settings that only an advanced GRAX admin or enablement engineer will be familiar with. Please proceed with caution and reach out to GRAX Support if you have any questions."))},Xn=t(2),Yn=t.n(Xn),Jn=(t(203),function(e){var a=e.children,t=e.title,l=(e.helpText,e.isOpen),s=void 0!==l&&l,o=e.nonCollapsible,c=void 0!==o&&o,u=e.className,d=void 0===u?"slds-m-bottom_medium slds-m-top_none":u,f=Object(n.useState)(!!c||s),E=Object(i.a)(f,2),b=E[0],v=E[1],p=r.a.createElement("span",{className:Yn()("slds-truncate",{"slds-p-horizontal_small":!!c}),title:t},t),g=c?p:r.a.createElement(m.a,{iconCategory:"utility",iconClassName:"slds-section__title-action-icon slds-button__icon_left",iconName:"switch",onClick:function(){return v(!b)},className:"slds-section__title-action",variant:"base"},p);return r.a.createElement("div",{className:Yn()(d,"slds-section",{"slds-is-open":b})},r.a.createElement("h3",{className:Yn()("slds-section__title",{"slds-theme_shade":!!c})},g),r.a.createElement("div",{className:"slds-section__content"},a))}),Zn=function(e){return function(a){return function(t){var l=Object(k.a)({},t),s=Object(n.useState)(!1),o=Object(i.a)(s,2),c=o[0],u=o[1],d=Object(n.useState)(!1),f=Object(i.a)(d,2),E=f[0],b=f[1],v=Object(n.useState)(!1),p=Object(i.a)(v,2),g=p[0],h=p[1];return r.a.createElement(Jn,{title:e},r.a.createElement(m.a,{iconCategory:"utility",iconVariant:"bare",iconName:c?"hide":"preview",iconPosition:"left",onClick:function(){!1===c&&!1===g?b(!0):u(!c)},variant:"base",label:c?"Hide Fields":"Reveal Fields",className:"slds-m-top_x-small"}),!0===c&&r.a.createElement("ul",{className:"slds-m-top_x-small"},r.a.createElement(a,l)),r.a.createElement(Wn,{isOpen:E,onRequestClose:function(){return b(!1)},confirm:function(){u(!0),b(!1),g||h(!0)}}))}}},$n=function(e){var a=e.label,t=e.variableName,n=e.type,l=e.value,s=e.onBlur,i=Object(b.a)(e,["label","variableName","type","value","onBlur"]);return r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(kt,Object.assign({label:a,id:t,type:n,value:l,onBlur:function(e){return s(e,{valueCasting:!1})},valueCasting:!0},i)))},er=Zn("Attachment Settings")((function(e){var a=e.ATTACHMENT_BATCH_SIZE,t=e.ATTACHMENT_PROCESSING_SECONDS_PER_RECORD,n=e.onBlur;return r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement($n,{label:"Attachment Batch Size",helpText:"Used by async attachment process to grab this many attachments at a size (default = 5000)",variableName:"ATTACHMENT_BATCH_SIZE",value:a,type:"number",onBlur:n}),r.a.createElement($n,{label:"Attachment Processing Seconds Per Record",helpText:"Used for attachment processing expiry time calculations (default = 5 seconds)",variableName:"ATTACHMENT_PROCESSING_SECONDS_PER_RECORD",value:t,onBlur:n}))})),ar=Zn("Org Migration Settings")((function(e){var a=e.GRAX_SYNCHID,t=e.RESTORE_SLEEP_DURATION,n=e.GRAX_OBJECT_TYPES_TO_RESTORE,l=e.GRAX_MAX_RESTORE,s=e.onBlur;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement($n,{label:"Synch ID",variableName:"GRAX_SYNCHID",value:a,type:"number",onBlur:s}),r.a.createElement($n,{label:"Bulk Restore Sleep Duration (Minutes)",variableName:"RESTORE_SLEEP_DURATION",value:t,onBlur:s}),r.a.createElement($n,{label:"Objects to Restore",variableName:"GRAX_OBJECT_TYPES_TO_RESTORE",value:n,onBlur:s})),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement($n,{label:"Bulk Restore Max Batch Size",variableName:"GRAX_MAX_RESTORE",value:l,type:"number",onBlur:s})),r.a.createElement(sn,{heading:"Bulk Restore Salesforce Destination"}),r.a.createElement("div",{className:"slds-m-top_x-small"},r.a.createElement(qt,{showConnectionName:!0,variant:"bulkRestoreSalesforceDestination"})))})),tr=Zn("Point in Time Restore")((function(e){var a=e.queryFile,t=e.onBlur;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement($n,{label:"Point-in-Time Restore Query File",variableName:"queryFile",value:a,required:!0,onBlur:t})))})),nr=[{label:"Apigee",value:"Apigee"},{label:"Kafka",value:"Kafka"}],rr=Zn("Push to Queue")((function(e){var a=e.provider,t=e.apiEndpoint,n=e.apiClientId,l=e.apiClientSecret,s=e.authorizationToken,i=e.onToggle,o=e.onBlur,c=[];if("Apigee"===a||"Kafka"===a)switch(c.push(r.a.createElement($n,{label:"Push-to-Queue API Endpoint",variableName:"apiEndpoint",value:t,required:!0,onBlur:o})),a){case"Apigee":c.push([r.a.createElement($n,{label:"Push-to-Queue API Client ID",variableName:"apiClientId",value:n,required:!0,onBlur:o}),r.a.createElement($n,{label:"Push-to-Queue API Client Secret",variableName:"apiClientSecret",value:l,required:!0,onBlur:o})]);break;case"Kafka":c.push(r.a.createElement($n,{label:"Push-to-Queue Authorization Token",variableName:"authorizationToken",value:s,required:!0,onBlur:o}))}return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small slds-m-top_x-small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(It,{options:nr,value:a,required:!1,onClick:function(e){return i("provider",e)}}))),r.a.createElement("div",{className:"slds-grid slds-gutters_small"},c))})),lr=Zn("Other")((function(){var e=pt(),a=Object(i.a)(e,2),t=a[0],n=a[1],l=t.storageOff,s=Ft("BASIC_CONFIG_SET_VALUE",n),o=zt("BASIC_CONFIG_SET_VALUE",n);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement($n,{label:"Async Interval",helpText:"This will determine the interval that the asynchronous heroku dyno processes run at",variableName:"apiEndpoint",value:"",required:!0,type:"number",onBlur:o}),r.a.createElement("div",{className:"slds-col slds-size_1-of-3"},r.a.createElement(nn,{label:"Turn Off Storage",helpText:"Do not turn off storage unless absolutely necessary, as this could cause extreme data loss",checked:l,id:"storageOff",onToggle:s}))))})),sr=function(){var e=wn(),a=Object(i.a)(e,2),t=a[0],n=a[1],l=t.variables,s=void 0===l?{}:l,o=t.timeMachine,c=void 0===o?{}:o,u=t.pushToQueue,d=void 0===u?{}:u,m=d.provider,f=d.apiEndpoint,E=d.apiClientId,b=d.apiClientSecret,v=d.authorizationToken,p=c.queryFile,g=s.cdcEnabled,h=s.ATTACHMENT_BATCH_SIZE,O=s.ATTACHMENT_PROCESSING_SECONDS_PER_RECORD,_=s.GRAX_SYNCHID,y=s.RESTORE_SLEEP_DURATION,N=s.GRAX_OBJECT_TYPES_TO_RESTORE,C=s.GRAX_MAX_RESTORE,S=Ft("ENVIRONMENT_VARIABLE_SET_VARS",n),j=zt("ENVIRONMENT_VARIABLE_SET_VARS",n),A=zt("ENVIRONMENT_VARIABLE_SET_TIME_MACHINE",n),I=Bt("ENVIRONMENT_VARIABLE_SET_PUSH_TO_QUEUE",n),T=zt("ENVIRONMENT_VARIABLE_SET_PUSH_TO_QUEUE",n);return r.a.createElement(r.a.Fragment,null,r.a.createElement(Qn,{cdcEnabled:g,handleCheckbox:S}),r.a.createElement(er,{ATTACHMENT_BATCH_SIZE:h,ATTACHMENT_PROCESSING_SECONDS_PER_RECORD:O,onBlur:j}),r.a.createElement(ar,{GRAX_SYNCHID:_,RESTORE_SLEEP_DURATION:y,GRAX_OBJECT_TYPES_TO_RESTORE:N,GRAX_MAX_RESTORE:C,onBlur:j}),r.a.createElement(tr,{queryFile:p,onBlur:A}),r.a.createElement(rr,{provider:m,apiEndpoint:f,apiClientId:E,apiClientSecret:b,authorizationToken:v,onToggle:I,onBlur:T}),r.a.createElement(lr,null))},ir=function(){var e=Ta(),a=Object(i.a)(e,2),t=a[0],r=a[1],l=pt(),s=Object(i.a)(l,1)[0],o=An(),c=Object(i.a)(o,1)[0],u=zn(),d=Object(i.a)(u,1)[0],m=wn(),f=Object(i.a)(m,1)[0],E=it(),b=Object(i.a)(E,1)[0],v=Mt(b),p=Mt(s),g=gn(r),h=Object(i.a)(g,2),O=h[0],_=O.success,y=O.data,N=h[1],C=N.saveConfiguration,S=N.validateVendors;Object(n.useEffect)((function(){if(!0===_){var e=new Ca(t);e.storage=p;var a=y.bulkRestoreSalesforceDestination,n=y.einsteinSalesforceDestination;a&&(e.bulkRestoreDestinationDataSource=a),n&&!0===d.isEinsteinAnalyticsEnabled&&(e.syncSalesforceEinsteinDataSources=n),e.syncAnalytics=d,e.metadataBackup=c,e.timeMachine=f.timeMachine,e.pushToQueue=f.pushToQueue,e.variables=f.variables,C(e.configuration)}}),[_,y]);return function(){var e=[{type:"salesforce",label:"bulkRestoreSalesforceDestination",credentials:v.bulkRestoreSalesforceDestination}];!0===d.isEinsteinAnalyticsEnabled&&e.push({type:"salesforce",label:"einsteinSalesforceDestination",credentials:v.einsteinSalesforceDestination}),S([])}},or=function(e){var a=e.formRef,t=ir();return r.a.createElement(On,{formRef:a,onSubmit:t})},cr=function(){var e=Ta(),a=Object(i.a)(e,1)[0],t=Object(n.createRef)(),r=new Ca(a),l=r.storage,s=r.metadataBackup,o=r.syncAnalytics,c=r.variables,u=r.timeMachine,d=r.pushToQueue,m=r.syncSalesforceEinsteinOrganizationId;return{dataSources:{einsteinSalesforceDestination:r.syncSalesforceEinsteinDataSources,bulkRestoreSalesforceDestination:r.bulkRestoreDestinationDataSource},storage:l,metadataBackup:s,syncAnalytics:o,environmentVariables:{variables:c,timeMachine:u,pushToQueue:d},syncSalesforceEinsteinOrganizationId:m,formRef:t}},ur=function(){var e=cr(),a=e.dataSources,t=e.storage,n=e.syncSalesforceEinsteinOrganizationId,l=e.metadataBackup,s=e.syncAnalytics,i=e.environmentVariables,o=e.formRef;return r.a.createElement(In,{value:l},r.a.createElement(ot,{value:a},r.a.createElement(Pn,{value:s},r.a.createElement(Dn,{value:i},r.a.createElement(gt,{value:t},r.a.createElement(Ct,null,r.a.createElement("form",{ref:o,onSubmit:function(e){return e.preventDefault()}},r.a.createElement(c.a,{heading:"Advanced Configuration",style:{flexGrow:1},headerActions:r.a.createElement(or,{formRef:o})},r.a.createElement("div",{className:"slds-p-horizontal_medium"},r.a.createElement(Un,null),r.a.createElement(Kn,{syncSalesforceEinsteinOrganizationId:n}),r.a.createElement(sr,null))))))))))},dr=[{path:A.i,component:s,routes:[{path:A.j,component:Ua,routes:[{exact:!0,path:A.j,component:Za},{exact:!0,key:A.h,path:A.h,component:Nn},{exact:!0,key:A.g,path:A.g,component:ur},{exact:!0,key:A.k,path:A.k,component:Ga}]},{exact:!0,key:"scenarios",path:"".concat(A.b,"/scenarios"),component:J},{exact:!0,key:"scenarios/details",path:"".concat(A.b,"/scenarios/:scenario_id"),component:aa},{exact:!0,key:"scenarios/new",path:"".concat(A.b,"/scenarios/new"),component:aa},{exact:!0,key:"duplicates/details",path:"".concat(A.b,"/duplicates/:scenario_id"),component:ca}]}];a.a=dr},154:function(e,a,t){e.exports=t(251)},159:function(e,a,t){},161:function(e,a,t){},23:function(e,a,t){"use strict";t.d(a,"l",(function(){return c})),t.d(a,"f",(function(){return u})),t.d(a,"i",(function(){return d})),t.d(a,"h",(function(){return m})),t.d(a,"c",(function(){return f})),t.d(a,"a",(function(){return E})),t.d(a,"b",(function(){return b})),t.d(a,"d",(function(){return O})),t.d(a,"k",(function(){return N})),t.d(a,"e",(function(){return y})),t.d(a,"g",(function(){return C}));var n=t(6),r=t(25),l=t.n(r);t.d(a,"j",(function(){return l.a}));t(162),t(165);var s=t(30),i=t.n(s),o=l.a.locales();function c(e,a,t){var n=new Date;n.setTime(n.getTime()+24*t*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+a+";"+r+";path=/"}function u(e){for(var a=e+"=",t=decodeURIComponent(document.cookie).split(";"),n=0;n<t.length;n++){for(var r=t[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(a))return r.substring(a.length,r.length)}return""}var d=window!==window.parent,m=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),f=/^((?:(?:19|20)\d{2})-(?:10|11|12|0?\d)-(?:30|31|(?:0|1|2)\d))((?:(?:T|\s)(?:(?:0|1|2)\d)(?:\:[0-5]\d)(?::[0-5]\d)?((?:(?:\.\d{3})?)?Z?(?:[+-](?:0|1|2)\d\:?[0-5]\d)?))?)$/,E="L LT",b="L",v=window.location.search.match(/[\?&]locale\=([^&]+)/),p=window.location.search.match(/[\?&]tz\=([^&]+)/),g=window.navigator.userLanguage||window.navigator.language,h=v?decodeURIComponent(v[1]).split("_").join("-"):g,O=p?decodeURIComponent(p[1]):l.a.tz.guess();console.log("Available localizations: "+o.join(", "));var _=h.toLowerCase();-1===o.indexOf(_)&&-1!==h.indexOf("-")&&(_=_.split("-")[0]),-1!==o.indexOf(_)?l.a.locale(_):l.a.locale("en"),O&&l.a.tz.setDefault(O),console.log("User Locale: "+h),console.log("Available Locale: "+l.a.locale()),console.log("User TimeZone: "+O);var y=function(e){var a=e.inputValue,t=e.limit,n=void 0===t?10:t,r=e.options,l=(e.selection,new RegExp(i.a.escapeRegExp(a),"ig"));return i.a.filter(r,(function(e,t){return!a||"separator"===e.type||e.label.match(l)||e.id.match(l)})).splice(0,n)},N=function(e,a,t){return Object.assign({},e,Object(n.a)({},a,t))},C=function(e){var a=e.date,t=e.timezone,n=void 0===t?O:t,r=e.inputFormat,s=void 0===r?"YYYY-MM-DD":r,i=e.outputFormat,o=void 0===i?"YYYY-MM-DDTHH:mm:ss.SSS":i;return[l.a.tz(a,s,n).startOf("day").utc().format(o),l.a.tz(a,s,n).endOf("day").utc().format(o)]}},251:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(14),s=t.n(l),i=(t(159),t(117));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},60:function(e,a,t){"use strict";var n=t(0),r=t.n(n),l=t(1),s=t.n(l),i=t(40),o=t(7);s.a.arrayOf(s.a.shape({key:s.a.string.isRequired,path:s.a.oneOfType([o.j,o.g,o.h,o.k]).isRequired,exact:s.a.bool.isRequired,component:s.a.elementType.isRequired})).isRequired;a.a=function(e){var a=e.routes,t=void 0===a?[]:a;return r.a.createElement(i.c,null,t.map((function(e,a){return r.a.createElement(i.a,{key:e.key,path:e.path,exact:e.exact,render:function(){return r.a.createElement(e.component,{routes:e.routes})}})})))}},7:function(e,a,t){"use strict";t.d(a,"i",(function(){return n})),t.d(a,"j",(function(){return r})),t.d(a,"h",(function(){return l})),t.d(a,"g",(function(){return s})),t.d(a,"k",(function(){return i})),t.d(a,"b",(function(){return o})),t.d(a,"d",(function(){return c})),t.d(a,"e",(function(){return u})),t.d(a,"c",(function(){return d})),t.d(a,"f",(function(){return m})),t.d(a,"l",(function(){return f})),t.d(a,"a",(function(){return E}));var n="/grax-app/client/cloud",r="".concat(n,"/configuration"),l="".concat(r,"/basic-configuration"),s="".concat(r,"/advanced-configuration"),i="".concat(r,"/empty-landing-page"),o="".concat(n,"/dedup"),c="/grax-app/grax-cloud/configurations",u="/grax-app/cloud-configuration/validations",d="/graxproxy/api/dedup",m="/grax-app/grax-data-lake",f="".concat(d,"/scenarios"),E="".concat("/grax-app/assets","/assets/icons/")}},[[154,3,4]]]);
//# sourceMappingURL=main.d6a650be.chunk.js.map