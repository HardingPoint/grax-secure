{"version":3,"sources":["App.js","serviceWorker.js","index.js","lib/utils.js"],"names":["appName","GRAXRestoreTabs","lazy","GRAXLogging","GRAXHistory","GRAXDelete","GRAXCloud","GRAXAudit","GRAXSummaryCharts","window","__grax__","appname","location","pathname","split","pop","helpLinkbyAppName","summarycharts","delete","timemachine","logging","GRAXApp","props","state","isLoading","script","document","createElement","src","async","onload","setState","body","appendChild","this","size","variant","Fragment","isAppleDevice","className","isEmbeded","aria-hidden","id","href","style","position","right","rel","target","iconPath","fallback","label","columns","subtype","React","Component","Boolean","hostname","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","then","registration","unregister","availableLocales","moment","locales","setCookie","cname","cvalue","exdays","d","Date","setTime","getTime","expires","toUTCString","cookie","getCookie","name","ca","decodeURIComponent","i","length","c","charAt","substring","indexOf","parent","platform","SF_DATETIME_REGEXP","DATETIME_FORMAT","DATE_FORMAT","userLocaleParam","search","tzParam","browserLocale","userLanguage","language","userLocale","join","TZ","tz","guess","console","log","locale","toLowerCase","setDefault","comboboxFilterAndLimit","inputValue","limit","options","inputValueRegExp","selection","RegExp","_","escapeRegExp","filter","option","type","splice"],"mappings":"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","file":"static/js/main.a5f3f539.chunk.js","sourcesContent":["import React, { Suspense, lazy } from \"react\";\nimport { Tabs, TabsPanel, IconSettings, Spinner } from \"@salesforce/design-system-react\";\n\nimport \"@salesforce-ux/design-system/assets/styles/salesforce-lightning-design-system.min.css\";\nimport \"./App.css\";\n\nimport { isEmbeded, isAppleDevice } from \"./lib/utils\";\n\nconst GRAXRestoreTabs = lazy(() => import(\"./components/GRAXRestoreTabs\"));\nconst GRAXLogging = lazy(() => import(\"./components/GRAXLogging\"));\nconst GRAXHistory = lazy(() => import(\"./components/GRAXHistory\"));\nconst GRAXDelete = lazy(() => import(\"./components/GRAXDelete\"));\nconst GRAXCloud = lazy(() => import(\"./components/GRAXCloud\"));\nconst GRAXAudit = lazy(() => import(\"./components/GRAXAudit\"));\nconst GRAXSummaryCharts = lazy(() => import(\"./components/GRAXSummaryCharts\"));\n\nlet appName;\n\nif (window.__grax__ != null && window.__grax__.appName != null) {\n  appName = window.__grax__.appname;\n} else {\n  appName = window.location.pathname.split(\"/\").pop() || \"cloud\";\n}\n\nvar helpLinkbyAppName = {\n  // 'mapping': 'grax-restore',\n  summarycharts: \"summary-charts\",\n  delete: \"datalake-delete\",\n  timemachine: \"grax-object-time-machine\",\n  logging: \"grax-logs\"\n};\n\nclass GRAXApp extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isLoading: true\n    };\n  }\n\n  componentDidMount() {\n    if (appName === \"summarycharts\") {\n      const script = document.createElement(\"script\");\n      script.src = \"https://www.gstatic.com/charts/loader.js\";\n      script.async = true;\n      script.onload = () => {\n        this.setState({ isLoading: false });\n      };\n\n      document.body.appendChild(script);\n    } else {\n      this.setState({ isLoading: false });\n    }\n  }\n\n  render() {\n    if (this.state.isLoading) {\n      return <Spinner size=\"large\" variant=\"brand\" />;\n    }\n\n    return (\n      <React.Fragment>\n        {isAppleDevice && (\n          <style>{`\n                    html, body {\n                        height: 100%;\n                        overflow: auto;\n                        -webkit-overflow-scrolling: touch;\n                    }\n                `}</style>\n        )}\n        <div className={isEmbeded ? \"slds-tabs_scoped__content\" : \"\"}>\n          {helpLinkbyAppName[appName] != null ? (\n            <div aria-hidden=\"false\" id=\"GRAXHelpLink\">\n              <h3>\n                <a\n                  href={\"https://documentation.grax.io/docs/\" + helpLinkbyAppName[appName]}\n                  style={{\n                    position: \"absolute\",\n                    right: \"27px\"\n                  }}\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                >\n                  GRAX Help\n                </a>\n              </h3>\n            </div>\n          ) : null}\n\n          <IconSettings iconPath=\"./assets/icons\">\n            <Suspense fallback={<Spinner size=\"large\" variant=\"brand\" />}>\n              {(appName === \"restore\" || appName === \"mapping\") && (\n                <GRAXRestoreTabs variant={isEmbeded ? \"default\" : \"scoped\"} appName={appName} />\n              )}\n              {appName === \"logging\" && (\n                <Tabs variant={isEmbeded ? \"default\" : \"scoped\"} id=\"grax-logging-tabs\">\n                  <TabsPanel label=\"Error Logs\">\n                    <GRAXLogging\n                      columns={[\"CreatedDate\", \"source\", \"info\", \"error\", \"stack\", \"description\"]}\n                    />\n                  </TabsPanel>\n                  <TabsPanel label=\"Restore Logs\">\n                    <GRAXLogging\n                      subtype=\"restore\"\n                      columns={[\n                        \"CreatedDate\",\n                        \"objecttype\",\n                        \"sourceId\",\n                        \"destinationId\",\n                        \"status\",\n                        \"error\",\n                        \"description\"\n                      ]}\n                    />\n                  </TabsPanel>\n                </Tabs>\n              )}\n              {appName === \"timemachine\" && (\n                <Tabs variant={isEmbeded ? \"default\" : \"scoped\"} id=\"grax-history-tabs\">\n                  <TabsPanel label=\"History\">\n                    <GRAXHistory />\n                  </TabsPanel>\n                </Tabs>\n              )}\n              {appName === \"delete\" && (\n                <Tabs variant={isEmbeded ? \"default\" : \"scoped\"} id=\"grax-delete-tabs\">\n                  <TabsPanel label=\"Delete\">\n                    <GRAXDelete />\n                  </TabsPanel>\n                </Tabs>\n              )}\n              {appName === \"cloud\" && <GRAXCloud />}\n              {appName === \"audit\" && (\n                <GRAXAudit columns={[\"LastModifiedDate\", \"ObjectType\", \"ObjectVersion\"]} />\n              )}\n              {appName === \"summarycharts\" && (\n                <GRAXSummaryCharts variant={isEmbeded ? \"default\" : \"scoped\"} />\n              )}\n            </Suspense>\n          </IconSettings>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default GRAXApp;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","/* eslint-disable no-useless-escape */\nimport moment from 'moment';\nimport 'moment-timezone';\nimport 'moment/min/locales';\nimport _ from 'lodash';\n\nconst availableLocales = moment.locales();\n\nexport function setCookie(cname, cvalue, exdays) {\n    var d = new Date();\n    d.setTime(d.getTime() + (exdays*24*60*60*1000));\n    var expires = \"expires=\"+ d.toUTCString();\n    document.cookie = cname + \"=\" + cvalue + \";\" + expires + \";path=/\";\n};\n\nexport function getCookie(cname) {\n    var name = cname + \"=\";\n    var decodedCookie = decodeURIComponent(document.cookie);\n    var ca = decodedCookie.split(';');\n    for(var i = 0; i <ca.length; i++) {\n        var c = ca[i];\n        while (c.charAt(0) === ' ') {\n            c = c.substring(1);\n        }\n        if (c.indexOf(name) === 0) {\n            return c.substring(name.length, c.length);\n        }\n    }\n    return \"\";\n};\n\nvar isEmbeded = window !== window.parent;\nvar isAppleDevice = navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i) ? true : false;\n\nexport {isEmbeded, isAppleDevice};\n\n/*\n2018-12-10\n1996-12-10\n2018-12-10 12:40:00\n1996-12-10 12:57:00\n1996-12-10 12:57:00-2340\n1996-12-10 12:57:00+2340\n2018-05-01T18:08:42.000+0000\n2018-12-10T12:50:00Z\n1996-12-10T12:00:00Z\n2018-12-10T12:50:35.000Z\n1996-12-10T12:00:00.000Z\n2010-12-31T23:59:59.999Z\n2002-10-10T12:00:00+05:00\n2002-10-10T07:00:00Z\n2002-10-10T00:00:00+05:00\n2002-10-09T19:00:00Z\n*/\nvar SF_DATETIME_REGEXP = /^((?:(?:19|20)\\d{2})-(?:10|11|12|0?\\d)-(?:30|31|(?:0|1|2)\\d))((?:(?:T|\\s)(?:(?:0|1|2)\\d)(?:\\:[0-5]\\d)(?::[0-5]\\d)?((?:(?:\\.\\d{3})?)?Z?(?:[+-](?:0|1|2)\\d\\:?[0-5]\\d)?))?)$/;\n\nvar DATETIME_FORMAT = 'L LT';\nvar DATE_FORMAT = 'L';\n\nexport {SF_DATETIME_REGEXP, DATETIME_FORMAT, DATE_FORMAT};\n\nvar userLocaleParam = window.location.search.match(/[\\?&]locale\\=([^&]+)/);\nvar tzParam = window.location.search.match(/[\\?&]tz\\=([^&]+)/);\n\nexport const browserLocale = window.navigator.userLanguage || window.navigator.language;\n\nexport const userLocale = userLocaleParam ? decodeURIComponent(userLocaleParam[1]).split('_').join('-') : browserLocale;\nexport const TZ = tzParam ? decodeURIComponent(tzParam[1]) : moment.tz.guess();\n\n\nconsole.log('Available localizations: ' + availableLocales.join(', '));\n\nlet locale = userLocale.toLowerCase();\n\nif(availableLocales.indexOf(locale) === -1 && userLocale.indexOf('-') !== -1) {\n    locale = locale.split('-')[0];\n}\n\nif(availableLocales.indexOf(locale) !== -1) {\n    moment.locale(locale);\n} else {\n    moment.locale('en'); // default localization\n}\n\nif(TZ) {\n    moment.tz.setDefault(TZ);\n}\n\nconsole.log('User Locale: ' + userLocale);\nconsole.log('Available Locale: ' + moment.locale());\nconsole.log('User TimeZone: ' + TZ);\n\nexport {moment}; // Export moment with additions\n\n/*\noptions={comboboxFilterAndLimit({\n    inputValue: this.state.inputValue,\n    limit: 1000,\n    options: this.state.options,\n    selection: this.state.selection\n})}\n*/\nconst comboboxFilterAndLimit = ({ inputValue, limit = 10, options, selection }) => {\n    const inputValueRegExp = new RegExp(_.escapeRegExp(inputValue), 'ig');\n\n    return _.filter(options, (option, i) => {\n        return (!inputValue || option.type === 'separator'\n                            || option.label.match(inputValueRegExp)\n                            || option.id.match(inputValueRegExp))\n                            /*&& !selection.some((sel) => sel && _.isEqual(sel, option))*/;\n    }).splice(0, limit);\n};\nexport {comboboxFilterAndLimit};"],"sourceRoot":""}