{"version":3,"sources":["components/GRAXAuditDataTable.jsx","components/GRAXTree.jsx","components/GRAXAudit.jsx","lib/grax-data-lake.js","components/SLDSSection.jsx","components/SLDSPaginator.jsx","components/GRAXDatePicker.jsx","components/GRAXSFieldCombobox.jsx","components/GRAXFilterGeneration.jsx","components/GRAXCSVExportButton.jsx","public/js/jquery.sldsTree.js"],"names":["GRAXTimeMachineCell","children","props","title","onClick","e","onClickHandler","preventDefault","displayName","DataTableCell","selectedDataIndex","GRAXAuditDataTable","state","sortColumn","sortDirection","items","extraInfo","page","isLoaded","isLoading","isTimeMachineModalOpen","timeMachineRecord","nextProps","nextState","this","renderKey","setState","$","ajax","type","url","baseUrl","GetParams","action","dataIndex","_select","_","union","columns","hiddenColumns","join","_q","filterQuery","_limit","_from","_sort","_sortType","getSortFieldType","success","data","results","filterFunction","map","item","i","forEach","val","key","SF_DATETIME_REGEXP","test","m","moment","isValid","tz","TZ","format","_i","indexOf","DATETIME_FORMAT","DATE_FORMAT","id","toString","total","size","totalRetrieved","bind","error","xhr","status","err","console","getDataHandler","property","sortField","_graxFieldsSelection","find","assistiveText","dialogLabel","isOpen","onRequestClose","align","className","style","overflow","JSON","stringify","position","variant","actionsHeader","columnSort","columnSortedAscending","columnSortedDescending","selectAllRows","selectRow","fixedLayout","onSort","handleSort","columnName","isSorted","label","endsWith","match","sortable","isSortable","sortableColumns","log","Key","split","slice","SLDSPaginator","totalItems","length","pageSize","onChangePage","isInitialLoad","GRAXCSVExportButton","params","source","height","React","Component","cookieSubfix","renderFieldListSelector","$fieldListSelector","$fieldlist","onLoadHandler","onChangeHandler","sort","a","b","domPrefix","Date","now","sldsTree","attrs","root","class","onDiv","$div","settings","append","isSelected","onFinish","$root","fields","countChecked","cookieSelected","getCookie","updateValue","eventHandler","selectedFieldList","selectedFields","each","field","selected","push","getSelectedFields","setCookie","on","target","checked","prop","GRAXTree","_isMounted","reduce","_selection","fieldItem","onLoad","getMappedFieldSelection","onChange","selection","$el","el","fieldList","minHeight","Fragment","ref","fieldlist","ELASTIC_SORTABLE_TYPES","GRAXAudit","retrieved","retrievedCounter","_graxFields","_graxFieldsSelectionList","_filterFunction","dataList","_getFilterQuery","_filterValuesFields","_graxSortableFields","display","sortableFields","elasticField","SLDSSection","GRAXFilterGeneration","filterableFieldOptions","onFilterValueChangeHandler","getFilterQuery","token","window","__grax__","_csrf","orgid","pageParams","userid","undefined","param","ajaxSetup","beforeSend","method","setRequestHeader","authorization","crossDomain","withCredentials","skipFail","fail","jqXHR","textStatus","errorThrown","showError","statusText","responseText","isCollapsible","handleToggle","onToggle","category","name","pager","currentPage","setPage","totalPages","isNarrow","startPage","endPage","Math","ceil","startIndex","endIndex","min","pages","Array","keys","getPager","iconCategory","iconName","iconPosition","disabled","index","content","defaultProps","GRAXDatePicker","useState","isValidDate","setIsValidDate","formatter","datePickerFormatter","parser","datePickerParser","event","formattedDate","date","GRAXSFieldCombobox","options","inputValue","SObjectName","fieldName","picklistValues","value","onElseComponent","onRender","elseComponent","classNameMenu","events","onRequestRemoveSelectedOption","onSelect","labels","placeholder","comboboxFilterAndLimit","limit","multiple","required","sanitizeElasticFilterValue","filterValue","replace","TYPE_VS_OPERATORS","isNegated","GRAXFilterableCombobox","isOpened","filterOptionsHandler","onOpen","onClose","_filterValues","_error","operator","isActive","selectedField","filterValueStruct","getFilterValueStruct","filter","option","filterValues","Object","_filterValuesList","getFilterValuesList","getFilterFunction","splice","isReturned","filterOperator","filterVal","isArray","filterIsNegated","isFilterMatch","itemVal","Boolean","String","toLowerCase","includes","operatorByName","queryConditions","startsWith","_filterVal","condition","inConditions","parseFloat","selectionIds","scope","data-label","width","defaultChecked","SObjectType","getSelectionValues","defaultValue","onBlur","isPicklist","menuPosition","hasStaticAlignment","removeFieldHandler","addAnotherFieldHandler","portalsRoot","document","getElementById","GRAXCSVExportForm","ReactDOM","createPortal","formId","encType","margin","padding","border","form","svgns","fn","extend","childs","ul","li","div","button","expandButton","expandIcon","onUl","$ul","onLi","$li","onButton","$button","getTreeItemContent","level","attr","toggleClass","icon","createElementNS","setAttribute","icon_use","setAttributeNS","path","appendChild","getTreeItemButton","getTreeItem","getTree","html","jQuery"],"mappings":"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","file":"static/js/6.cf087dc3.chunk.js","sourcesContent":["/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React from 'react';\n\nimport {Spinner, DataTable, DataTableColumn, DataTableCell, Modal} from '@salesforce/design-system-react';\nimport SLDSPaginator from './SLDSPaginator';\nimport GRAXCSVExportButton from './GRAXCSVExportButton';\n\nimport {$, baseUrl, GetParams} from '../lib/grax-data-lake';\nimport {moment, SF_DATETIME_REGEXP, DATETIME_FORMAT, DATE_FORMAT, TZ} from '../lib/utils';\n\nimport _ from 'lodash';\n\nconst ROWSXPAGE = 20;\n\n\nconst GRAXTimeMachineCell = ({ children, ...props }) => {\n\treturn (\n        <DataTableCell title={children}>\n            {children && (\n                <a onClick={(e) => {\n                    if(props.onClickHandler) {\n                        props.onClickHandler(children);\n                    }\n\n                    e.preventDefault();\n                }}>\n                    Load this version\n                </a>\n            )}\n        </DataTableCell>\n    );\n};\nGRAXTimeMachineCell.displayName = DataTableCell.displayName;\n\n\nexport default class GRAXAuditDataTable extends React.Component {\n\tconstructor(props) {\n        super(props);\n\n        this.state = {\n\t\t\tsortColumn: 'CreatedDate',\n\t\t\tsortDirection: 'desc',\n            items: [],\n            extraInfo: {},\n            page: 0,\n            isLoaded: false,\n            isLoading: false,\n            isTimeMachineModalOpen: false,\n            timeMachineRecord: null\n\t\t};\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return this.props.renderKey !== nextProps.renderKey || this.state.items !== nextState.items || this.state.isLoaded !== nextState.isLoaded || this.state.isLoading !== nextState.isLoading || this.state.sortColumn !== nextState.sortColumn || this.state.sortDirection !== nextState.sortDirection || this.state.isTimeMachineModalOpen !== nextState.isTimeMachineModalOpen;\n    }\n\n    getDataHandler(page, sortColumn, sortDirection) {\n        this.setState({\n            isLoading: true,\n            page: page,\n            sortColumn: sortColumn,\n            sortDirection: sortDirection\n        });\n\n        $.ajax({\n            type: 'GET',\n            //dataType: 'jsonp',\n            url: baseUrl + '/grax-app/grax-data-lake' + GetParams({\n                action:'load',\n                dataIndex: this.props.dataIndex,\n                _select: _.union(this.props.columns, this.props.hiddenColumns).join(',') || 'Id',\n                _q: this.props.filterQuery,\n                _limit: ROWSXPAGE,\n                _from: ROWSXPAGE * page,\n                _sort: sortColumn + ' ' + sortDirection,\n                _sortType: this.getSortFieldType(sortColumn)\n            }),\n            /*data: {\n                _select: this.props.columns.join(',')\n            },*/\n            success: function(data) {\n                var results = data.results;\n\n                if(this.props.filterFunction) {\n                    results = this.props.filterFunction(results);\n                }\n\n                results = _.map(results, (item, i) => {\n                    _.forEach(item, (val, key) => {\n                        if(typeof(val) == 'string') {\n                            if(SF_DATETIME_REGEXP.test(val)) {\n                                var m = moment(val);\n\n                                if(m.isValid()) {\n                                    item[key] = m.tz(TZ).format(m._i.indexOf(':') !== -1 ? DATETIME_FORMAT : DATE_FORMAT);\n                                }\n                            }\n                        }\n                    });\n\n                    return {\n                        ...item,\n                        ...{id: i.toString()}\n                    }\n                });\n\n                this.setState({\n                    page: 0,\n                    data: results,\n                    extraInfo: data.extraInfo || {total: 0, size: ROWSXPAGE, totalRetrieved: 0},\n                    items: results,\n                    isLoaded: true,\n                    isLoading: false\n                });\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(xhr, status, err);\n\n                this.setState({\n                    isLoaded: true,\n                    isLoading: false,\n                    items: [],\n                    error: err.toString()\n                });\n            }.bind(this)\n        });\n    }\n    \n    componentDidMount() {\n        this.getDataHandler(0, this.state.sortColumn, this.state.sortDirection);\n    }\n\n\thandleSort(sortColumn, ...rest) {        \n        if(sortColumn.property) {\n            this.getDataHandler(this.state.page, sortColumn.property, sortColumn.sortDirection);\n        }\n    }\n    \n    getSortFieldType(sortField) {\n        if(!this.props._graxFieldsSelection) return null;\n\n        return (this.props._graxFieldsSelection.find((item) => {\n            return item.id === sortField;\n        }) || {}).type;\n    }\n\n\trender() {\n\t\treturn this.state.isLoaded ? (\n\t\t\t<div>\n                {this.state.isTimeMachineModalOpen ? (\n                    <Modal\n                        assistiveText={{ dialogLabel: 'Time Machine Record' }}\n                        isOpen={this.state.isTimeMachineModalOpen}\n                        onRequestClose={() => {\n                            this.setState({\n                                isTimeMachineModalOpen: false,\n                                timeMachineRecord: null\n                            });\n                        }}\n                        align=\"top\"\n                        size=\"large\"\n                    >\n                        <section className=\"slds-p-around_medium\" style={{\n                            overflow: 'auto'\n                        }}>\n                            {JSON.stringify(this.state.timeMachineRecord)}\n                        </section>\n                    </Modal>\n                ) : null}\n\n                <div style={{position: 'relative'}}>\n                    {this.state.isLoading && <Spinner size=\"large\" variant=\"brand\" />}\n                    <DataTable\n                        assistiveText={{\n                            actionsHeader: 'actions',\n                            columnSort: 'sort this column',\n                            columnSortedAscending: 'asc',\n                            columnSortedDescending: 'desc',\n                            selectAllRows: 'all rows',\n                            selectRow: 'select this row',\n                        }}\n                        fixedLayout\n                        items={this.state.items}\n                        id=\"GRAXAuditDataTable\"\n                        onSort={this.handleSort.bind(this)}\n                    >\n\n                        {this.props.columns.map((columnName) => (\n                            <DataTableColumn\n                                key={'col' + columnName}\n                                id={columnName}\n                                isSorted={this.state.sortColumn === columnName}\n                                label={columnName.endsWith('.keyword') ? columnName.match(/(.+)\\.keyword/)[1] : columnName}\n                                property={columnName}\n                                sortable\n                                sortDirection={this.state.sortDirection}\n                                isSortable={this.props.sortableColumns == null || this.props.sortableColumns.indexOf(columnName) !== -1}\n                            >\n                                {(columnName === 'ObjectVersion') ? (\n                                    <GRAXTimeMachineCell onClickHandler={(timeMachineRecord) => {\n                                        console.log({\n                                            Key: timeMachineRecord.split(/(\\/grax\\/)/).slice(1).join('')\n                                        });\n\n                                        /*var params = {\n                                            \"orgid\" : \"00D1I000003nRMaUAM\",\n                                            \"objecttype\" : \"Account\",\n                                            \"objectid\" : \"0014600000VpLa3AAF\",\n                                            \"filename\" : \"Account-0014600000VpLa3AAF-2018-10-23T15-38-14.json\"\n                                        };*/\n                                        \n                                        if(timeMachineRecord) {\n                                            this.setState({\n                                                isTimeMachineModalOpen: true,\n                                                timeMachineRecord: timeMachineRecord\n                                            });\n                                        }\n                                    }} />\n                                ) : null}\n                            </DataTableColumn>\n                        ))}\n                    </DataTable>\n                </div>\n\n                <div className=\"-x-small-buttons--horizontal slds-p-top_small\">\n                    <SLDSPaginator totalItems={this.state.items.length > 0 ? this.state.extraInfo.total: 0} pageSize={ROWSXPAGE} onChangePage={(page, isInitialLoad) => {\n                        if(!isInitialLoad) {\n                            this.getDataHandler(page - 1, this.state.sortColumn, this.state.sortDirection);\n                        }\n                    }} />\n                </div>\n\n                <div className=\"-x-small-buttons--horizontal slds-p-top_medium\">\n                    <GRAXCSVExportButton params={{\n                        source: 'elastic',\n                        dataIndex: this.props.dataIndex,\n                        _select: _.union(this.props.columns, this.props.hiddenColumns).join(','),\n                        _q: this.props.filterQuery,\n                        _sort: this.state.sortColumn + ' ' + this.state.sortDirection,\n                        _sortType: this.getSortFieldType(this.state.sortColumn),\n                        columns: this.props.columns\n                    }} />\n                </div>\n\t\t\t</div>\n\t\t) : (\n            <div style={{ position: 'relative', height: '2rem' }}>\n                <Spinner size=\"medium\" variant=\"brand\" />\n            </div>\n        );\n\t}\n}","/* eslint-disable no-multi-str */\nimport React from \"react\";\nimport \"../public/js/jquery.sldsTree.js\";\n\nimport { Spinner } from \"@salesforce/design-system-react\";\n\nimport { $, baseUrl, GetParams } from \"../lib/grax-data-lake\";\n\nimport { getCookie, setCookie } from \"../lib/utils\";\n\nimport _ from \"lodash\";\n\nvar selectedDataIndex;\nvar cookieSubfix = \"Fields\";\n\nvar renderFieldListSelector = function(\n  $fieldListSelector,\n  $fieldlist,\n  data,\n  onLoadHandler,\n  onChangeHandler\n) {\n  data.sort(function(a, b) {\n    if (a.label > b.label) {\n      return 1;\n    }\n\n    if (a.label < b.label) {\n      return -1;\n    }\n\n    return 0;\n  });\n\n  var domPrefix = Date.now() + selectedDataIndex + cookieSubfix;\n\n  $fieldListSelector.sldsTree({\n    data: data,\n    attrs: {\n      root: { class: \"slds-scrollable_y\", style: \"max-height: 25vw\" }\n    },\n    onDiv: function($div, item, settings) {\n      $div.append(\n        '<div className=\"slds-size_1-of-1\">\\\n            <div className=\"slds-form-element\">\\\n                <div className=\"slds-form-element__control\">\\\n                    <span className=\"slds-checkbox\">\\\n                    <input name=\"field_' +\n          domPrefix +\n          item[settings.items.id] +\n          '\" id=\"field_' +\n          domPrefix +\n          item[settings.items.id] +\n          '\" type=\"checkbox\" ' +\n          (item.isSelected ? \"checked\" : \"\") +\n          ' />\\\n                    <label className=\"slds-checkbox__label\" for=\"field_' +\n          domPrefix +\n          item[settings.items.id] +\n          '\">\\\n                        <span className=\"slds-checkbox_faux\"></span>\\\n                        <span className=\"slds-form-element__label\">' +\n          item[settings.items.label] +\n          \"</span>\\\n                    </label>\\\n                    </span>\\\n                </div>\\\n                </div>\\\n            </div>\"\n      );\n    },\n    onFinish: function($root, items, settings) {\n      var fields = {};\n      var countChecked = 1;\n\n      var getSelectedFields = function() {\n        var selectedFields = [];\n\n        $.each(fields, function(field, selected) {\n          if (selected) {\n            selectedFields.push(field);\n          }\n        });\n\n        return selectedFields;\n      };\n\n      var cookieSelected = getCookie(selectedDataIndex + cookieSubfix);\n\n      var updateValue = function(eventHandler) {\n        var selectedFieldList = getSelectedFields();\n        var selectedFields = selectedFieldList.join(\",\");\n\n        $fieldlist.val(selectedFields);\n        setCookie(selectedDataIndex + cookieSubfix, selectedFields);\n\n        if (eventHandler) {\n          eventHandler(selectedFieldList);\n        }\n      };\n\n      $.each(items, function(i, item) {\n        var id = item[settings.items.id];\n\n        if (cookieSelected) {\n          fields[id] = cookieSelected.split(\",\").indexOf(id) !== -1;\n        } else {\n          fields[id] = item.isSelected;\n        }\n\n        $(\"#field_\" + domPrefix + id)\n          .on(\"change\", function(e) {\n            if (e.target.checked && countChecked >= 9) {\n              e.target.checked = false;\n              e.preventDefault();\n\n              return false;\n            }\n\n            fields[id] = e.target.checked;\n\n            if (e.target.checked) {\n              countChecked++;\n            } else {\n              countChecked--;\n            }\n\n            updateValue(onChangeHandler);\n          })\n          .prop(\"checked\", fields[id]);\n\n        //updateValue();\n      });\n\n      updateValue(onLoadHandler);\n    }\n  });\n};\n\nexport default class GRAXTree extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this._isMounted = false;\n\n    this.state = {\n      items: [],\n      isLoaded: false\n    };\n  }\n\n  getMappedFieldSelection(selectedFieldList) {\n    return _.reduce(\n      this.state.items,\n      (_selection, fieldItem) => {\n        if (selectedFieldList.indexOf(fieldItem.id) !== -1) {\n          _selection.push(fieldItem);\n        }\n\n        return _selection;\n      },\n      []\n    );\n  }\n\n  onLoadHandler(selectedFieldList) {\n    if (this.props.onLoad) {\n      this.props.onLoad(\n        this.getMappedFieldSelection(selectedFieldList),\n        selectedFieldList,\n        this.state.items\n      );\n    }\n  }\n\n  onChangeHandler(selectedFieldList) {\n    if (this.props.onChange) {\n      this.props.onChange(\n        this.getMappedFieldSelection(selectedFieldList),\n        selectedFieldList,\n        this.state.items\n      );\n    }\n  }\n\n  componentDidMount() {\n    this._isMounted = true;\n\n    selectedDataIndex = this.props.dataIndex;\n\n    if (this.props.cookieSubfix) {\n      cookieSubfix += this.props.cookieSubfix;\n    }\n\n    if (this.props.selection) {\n      setCookie(selectedDataIndex + cookieSubfix, this.props.selection.join(\",\"));\n    }\n\n    $.ajax({\n      type: \"GET\",\n      //dataType: 'jsonp',\n      url:\n        baseUrl +\n        \"/grax-app/grax-data-lake/getDataTypeFields/\" +\n        selectedDataIndex +\n        GetParams({ action: \"load\" }),\n      data: {},\n      success: function(data) {\n        if (this._isMounted) {\n          this.setState({\n            items: _.map(data, (val, key) => ({\n              id: key,\n              label: key,\n              type: val,\n              isSelected: !getCookie(selectedDataIndex + cookieSubfix) && key === \"Id\"\n            })),\n            isLoaded: true\n          });\n        }\n\n        this.$el = $(this.el);\n        this.$fieldlist = $(this.fieldList);\n\n        renderFieldListSelector(\n          this.$el,\n          this.$fieldlist,\n          this.state.items,\n          this.onLoadHandler.bind(this),\n          this.onChangeHandler.bind(this)\n        );\n      }.bind(this),\n      error: function(xhr, status, err) {\n        console.error(xhr, status, err);\n\n        if (this._isMounted) {\n          this.setState({\n            isLoaded: true,\n            error: err.toString()\n          });\n        }\n      }.bind(this)\n    });\n  }\n\n  componentWillUnmount() {\n    this._isMounted = false;\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return this.state.isLoaded !== nextState.isLoaded;\n  }\n\n  render() {\n    return (\n      <div style={{ position: \"relative\", minHeight: \"2rem\" }}>\n        {!this.state.isLoaded ? (\n          <Spinner size=\"small\" variant=\"base\" />\n        ) : (\n          <React.Fragment>\n            <input type=\"hidden\" ref={fieldlist => (this.fieldlist = fieldlist)} />\n            <div ref={el => (this.el = el)} />\n          </React.Fragment>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport SLDSSection from './SLDSSection';\nimport GRAXAuditDataTable from './GRAXAuditDataTable';\nimport GRAXFilterGeneration from './GRAXFilterGeneration';\nimport GRAXTree from './GRAXTree';\n\nimport {Button} from '@salesforce/design-system-react';\n\nimport {$, baseUrl, GetParams} from '../lib/grax-data-lake';\n\nimport _ from 'lodash';\n\nconst ELASTIC_SORTABLE_TYPES = ['text', 'date', 'number'];\n\nexport default class GRAXAudit extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this._isMounted = false;\n\n        this.state = {\n            retrieved: false,\n            retrievedCounter: 0,\n            _graxFields: null,\n            _graxFieldsSelection: null,\n            _graxFieldsSelectionList: this.props.columns || ['Id'],\n            _filterFunction: ((dataList) => dataList),\n            _getFilterQuery: (() => {}),\n            _filterValuesFields: [],\n            _graxSortableFields: null\n        }\n    }\n\n    getFilterQuery(_getFilterQuery) {\n        return _getFilterQuery();\n    }\n\n    hasFieldSelected() {\n        return this.state._graxFields != null && this.state._graxFieldsSelectionList != null && this.state._graxFieldsSelectionList.length > 0;\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        $.ajax({\n            type: 'GET',\n            //dataType: 'jsonp',\n            url: baseUrl + '/grax-app/grax-data-lake/getDataTypeFields/graxgraxtimemachineindex' + GetParams({action:'load'}),\n            data: {},\n            success: function(data) {\n                if(this._isMounted) {\n                    this.setState({\n                        _graxFields: _.map(this.state._graxFieldsSelectionList, (val, i) => ({\n                            id: val,\n                            label: val,\n                            type: data[val]\n                        })),\n                        retrieved: true\n                    });\n                }\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(xhr, status, err);\n\n                if(this._isMounted) {\n                    this.setState({\n                        retrieved: true,\n                        error: err.toString()\n                    });\n                }\n            }.bind(this)\n        });\n    }\n    \n    render() {\n        return (\n            <div>\n                <div style={{display: 'none'}}>\n                    <GRAXTree\n                        dataIndex=\"graxgraxtimemachineindex\"\n                        onLoad={(_graxFieldsSelection, _graxFieldsSelectionList, _graxFields) => {\n                            console.log('onLoad', _graxFieldsSelection, _graxFieldsSelectionList, _graxFields);\n\n                            this.setState({\n                                _graxFieldsSelection: _graxFieldsSelection,\n                                _graxSortableFields: _.reduce(_graxFields, (sortableFields, elasticField, i) => {\n                                    if(ELASTIC_SORTABLE_TYPES.indexOf(elasticField.type) !== -1) {\n                                        sortableFields.push(elasticField.id);\n                                    }\n                    \n                                    return sortableFields;\n                                }, [])\n                            });\n                        }}\n                        selection={this.state._graxFieldsSelectionList}\n                    />\n                </div>\n\n                <SLDSSection title=\"Filter Time Machine Records\">\n                    {this.state._graxFieldsSelectionList != null && (\n                        <GRAXFilterGeneration\n                            filterableFieldOptions={this.state._graxFields}\n                            onFilterValueChangeHandler={(_filterFunction, _filterValuesFields, _getFilterQuery) => {\n                                this.setState({\n                                    retrievedCounter: this.state.retrievedCounter,\n                                    _filterFunction: _filterFunction,\n                                    _getFilterQuery: _getFilterQuery,\n                                    _graxFieldsSelection: this.state._graxFieldsSelection,\n                                    _graxFieldsSelectionList: this.state._graxFieldsSelectionList,\n                                    _filterValuesFields: _filterValuesFields\n                                });\n                            }}\n                        />\n                    )}\n                </SLDSSection>\n\n                <SLDSSection title=\"GRAX Time Machine Records\" className=\"slds-p-top_large\">\n                    <div className=\"-x-small-buttons--horizontal slds-p-bottom_large\">\n\t\t\t\t\t    <Button label=\"Retrieve\" variant=\"brand\" onClick={() => {\n                            this.setState({\n                                retrievedCounter: this.state.retrievedCounter + 1\n                            })\n                        }} />\n                    </div>\n\n                    <GRAXAuditDataTable\n                        key={'GRAXAuditDataTable_' + this.state.retrievedCounter}\n                        renderKey={'GRAXAuditDataTable_' + this.state.retrievedCounter}\n                        columns={this.state._graxFieldsSelectionList}\n                        _graxFieldsSelection={this.state._graxFieldsSelection}\n                        sortableColumns={this.state._graxSortableFields}\n                        hiddenColumns={this.state._filterValuesFields}\n                        dataIndex=\"graxgraxtimemachineindex\"\n                        filterFunction={this.state._filterFunction}\n                        filterQuery={this.getFilterQuery(this.state._getFilterQuery)}\n                    />\n                </SLDSSection>\n            </div>\n        );\n    }\n}","/* eslint-disable no-useless-escape */\n/* --------------------------------------------------------------------------\n * This file is subject to the terms and conditions defined in\n * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,\n * which is part of this source code package.\n * --------------------------------------------------------------------------\n *          Copyright (c) 2017-2018 Harding Point\n *                  All rights reserved\n * --------------------------------------------------------------------------\n * Support:\tSupport@Grax.io\n * Website:\thttps://grax.io\n * Github:\thttps://github.com/HardingPoint/grax-application\n * License:\thttps://github.com/HardingPoint/grax-application/blob/master/LICENSE\n * --------------------------------------------------------------------------*/\n\nimport $ from \"jquery\";\n\n// export const isDev = window.location.port !== '80';\n\nexport const isDev = false;\n\nexport const baseUrl = isDev ? process.env.REACT_APP_BASE_URL : \"\";\n\nexport const token = window.__grax__.token;\nexport const _csrf = window.__grax__._csrf;\nexport const orgid = window.__grax__.orgid;\nexport const userid = window.__grax__.userid;\nexport const sessionid = null;\nexport const endpoint = null;\nexport const pageParams = window.__grax__.pageParams || {};\n\nexport function GetParams(params) {\n  if (params === null || params === undefined) params = {};\n\n  if (params.action === null || params.action === undefined || params.action === \"\")\n    params.action = \"load\";\n\n  return \"?\" + $.param(params);\n}\n\nfunction csrfSafeMethod(method) {\n  // these HTTP methods do not require CSRF protection\n  return /^(GET|HEAD|OPTIONS|TRACE)$/.test(method);\n}\n$.ajaxSetup({\n  beforeSend: function(xhr, settings) {\n    xhr.setRequestHeader(\"sfdcorgid\", orgid);\n\n    if (pageParams.authorization != null) {\n      xhr.setRequestHeader(\"Authorization\", \"Basic \" + pageParams.authorization);\n    } else {\n      // load token\n      // anticipates that the API token is in the referrer\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n    }\n\n    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n      xhr.setRequestHeader(\"X-CSRFToken\", _csrf);\n    }\n\n    xhr.withCredentials = true;\n\n    if (settings.skipFail !== true) {\n      xhr.fail((jqXHR, textStatus, errorThrown) => {\n        console.error(jqXHR);\n\n        if (jqXHR.status !== 404 && errorThrown !== \"Not Found\") {\n          window.showError(jqXHR.statusText + \": \" + jqXHR.responseText);\n        }\n      });\n    }\n  }\n});\n\nexport { $ };\n","import React from 'react';\nimport { Icon } from '@salesforce/design-system-react';\n\nexport default class SLDSSection extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isOpen: props.isOpen === true ? true : false || props.isCollapsible === undefined\n        };\n\n        this.handleToggle = this.handleToggle.bind(this);\n    }\n\n    handleToggle(e) {\n        var isOpen = !this.state.isOpen;\n\n        this.setState({\n            isOpen: isOpen\n        });\n\n        if(this.props.onToggle) {\n            this.props.onToggle(isOpen);\n        }\n\n        e.preventDefault();\n    }\n\n    render() {\n        var title = <span className={'slds-truncate' + (!this.props.isCollapsible ? ' slds-p-horizontal_small' : '')} title={this.props.title}>{this.props.title}</span>;\n\n        return (\n            <div id={this.props.id || this.props.key} className={['slds-section', this.state.isOpen && 'slds-is-open', this.props.className].join(' ')}>\n                <h3 className=\"slds-section__title slds-theme_shade\">\n                    {this.props.isCollapsible ? <button className=\"slds-button slds-section__title-action\" onClick={this.handleToggle}>\n                        <Icon\n                            assistiveText={{ label: this.props.title }}\n                            category=\"utility\"\n                            name=\"switch\"\n                            size=\"x-small\"\n                            className=\"slds-section__title-action-icon slds-button__icon slds-button__icon_left\"\n                        />\n                        {title}\n                    </button> : title}\n                </h3>\n                {this.state.isOpen && <div className=\"slds-section__content\">\n                    {this.props.children}\n                </div>}\n            </div>\n        );\n    }\n}","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { ButtonGroup, Button, Tooltip } from \"@salesforce/design-system-react\";\n\nconst propTypes = {\n  totalItems: PropTypes.number.isRequired,\n  onChangePage: PropTypes.func.isRequired,\n  currentPage: PropTypes.number,\n  pageSize: PropTypes.number\n};\n\nconst defaultProps = {\n  currentPage: 1,\n  pageSize: 10\n};\n\nconst getPager = (totalItems, currentPage, pageSize) => {\n  // default to first page\n  // eslint-disable-next-line no-param-reassign\n  currentPage = currentPage || 1;\n\n  // default page size is 10\n  // eslint-disable-next-line no-param-reassign\n  pageSize = pageSize || 10;\n\n  let isNarrow = false;\n\n  if (totalItems > 10000) {\n    // eslint-disable-next-line no-param-reassign\n    totalItems = 10000;\n    isNarrow = true;\n  }\n\n  // calculate total pages\n  const totalPages = Math.ceil(totalItems / pageSize);\n\n  let startPage;\n  let endPage;\n  if (totalPages <= 10) {\n    // less than 10 total pages so show all\n    startPage = 1;\n    endPage = totalPages;\n  } else {\n    // more than 10 total pages so calculate start and end pages\n    // eslint-disable-next-line no-lonely-if\n    if (currentPage <= 6) {\n      startPage = 1;\n      endPage = 10;\n    } else if (isNarrow && currentPage + 3 >= totalPages) {\n      startPage = totalPages - 8;\n      endPage = totalPages;\n    } else if (currentPage + 4 >= totalPages) {\n      startPage = totalPages - 9;\n      endPage = totalPages;\n    } else {\n      startPage = currentPage - 5;\n      endPage = currentPage + 4;\n    }\n  }\n\n  // calculate start and end item indexes\n  const startIndex = (currentPage - 1) * pageSize;\n  const endIndex = Math.min(startIndex + pageSize - 1, totalItems - 1);\n\n  // create an array of pages to ng-repeat in the pager control\n  const pages = [...Array(endPage + 1 - startPage).keys()].map(i => startPage + i);\n\n  // return object with all pager properties required by the view\n  return {\n    totalItems,\n    currentPage,\n    pageSize,\n    totalPages,\n    startPage,\n    endPage,\n    startIndex,\n    endIndex,\n    pages,\n    isNarrow\n  };\n};\n\nclass SLDSPaginator extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      pager: {}\n    };\n  }\n\n  // eslint-disable-next-line react/no-deprecated\n  componentWillMount() {\n    // set page if items array isn't empty\n    const { totalItems, currentPage } = this.props;\n    if (totalItems) {\n      this.setPage(currentPage, true);\n    }\n  }\n\n  setPage(page, isInitialLoad) {\n    const { totalItems, pageSize } = this.props;\n    let { pager } = this.state;\n\n    if (page < 1 || page > pager.totalPages) {\n      return;\n    }\n\n    // get new pager object for specified page\n    pager = getPager(totalItems, page, pageSize);\n\n    // update state\n    this.setState({ pager });\n\n    // call change page function in parent component\n    // eslint-disable-next-line react/destructuring-assignment\n    this.props.onChangePage(page, false || isInitialLoad);\n  }\n\n  render() {\n    const { pager } = this.state;\n\n    if (!pager.pages || pager.pages.length <= 1) {\n      // don't display pager if there is only 1 page\n      return null;\n    }\n\n    return (\n      <ButtonGroup>\n        <Button\n          iconCategory=\"utility\"\n          iconName=\"left\"\n          iconPosition=\"left\"\n          label=\"First\"\n          variant=\"neutral\"\n          onClick={() => this.setPage(1)}\n          disabled={pager.currentPage === 1}\n        />\n        <Button\n          iconCategory=\"utility\"\n          iconName=\"chevronleft\"\n          iconPosition=\"left\"\n          variant=\"neutral\"\n          onClick={() => this.setPage(pager.currentPage - 1)}\n          disabled={pager.currentPage === 1}\n        />\n        {pager.pages.map((page, index) => {\n          return (\n            <Button\n              // eslint-disable-next-line react/no-array-index-key\n              key={`SLDSPaginator${Date.now()}${index}`}\n              label={page}\n              variant={pager.currentPage === page ? \"brand\" : \"neutral\"}\n              onClick={() => this.setPage(page)}\n            />\n          );\n        })}\n        {pager.isNarrow && pager.currentPage >= pager.totalPages - 3 && (\n          <Tooltip\n            align=\"top right\"\n            content=\"The list is too long, try adding more filters to optimize the results.\"\n          >\n            <Button label=\"&middot;&middot;&middot;\" variant=\"neutral\" />\n          </Tooltip>\n        )}\n        <Button\n          iconCategory=\"utility\"\n          iconName=\"chevronright\"\n          iconPosition=\"right\"\n          variant=\"neutral\"\n          onClick={() => this.setPage(pager.currentPage + 1)}\n          disabled={pager.currentPage === pager.totalPages}\n        />\n        <Button\n          iconCategory=\"utility\"\n          iconName=\"right\"\n          iconPosition=\"right\"\n          label=\"Last\"\n          variant=\"neutral\"\n          onClick={() => this.setPage(pager.totalPages)}\n          disabled={pager.currentPage === pager.totalPages}\n        />\n      </ButtonGroup>\n    );\n  }\n}\n\nSLDSPaginator.propTypes = propTypes;\nSLDSPaginator.defaultProps = defaultProps;\nexport default SLDSPaginator;\n","/* eslint react/prop-types: 0 */\nimport React, { useState } from \"react\";\n\nimport { Datepicker } from \"@salesforce/design-system-react\";\n\nimport { moment, datePickerFormatter, datePickerParser } from \"../lib/utils\";\n\nconst GRAXDatePicker = props => {\n  const [isValidDate, setIsValidDate] = useState(true);\n\n  return (\n    <div className=\"slds-is-relative\">\n      <Datepicker\n        formatter={datePickerFormatter}\n        parser={datePickerParser}\n        // eslint-disable-next-line\n        {...props}\n        onChange={(event, data) => {\n          setIsValidDate(data.formattedDate === \"\" || moment(data.date).isValid());\n\n          if (props.onChange != null) {\n            props.onChange(event, data);\n          }\n        }}\n      />\n      {isValidDate === false ? (\n        <div className=\"slds-text-color_error\">\n          The date is invalid. Please select/write a valid date.\n        </div>\n      ) : null}\n    </div>\n  );\n};\n\nexport default GRAXDatePicker;\n","import React from 'react';\nimport _ from 'lodash';\n\nimport {Spinner, Combobox} from '@salesforce/design-system-react';\n\nimport {$, baseUrl, GetParams} from '../lib/grax-data-lake';\n\nimport {comboboxFilterAndLimit} from '../lib/utils';\n\n\nexport default class GRAXSFieldCombobox extends React.Component {\n    constructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n            options: [],\n\t\t\tinputValue: '',\n            selection: [],\n            isLoaded: false,\n            error: null\n\t\t};\n    }\n    \n    componentDidMount() {\n        $.ajax({\n            type: 'GET',\n            //dataType: 'jsonp',\n            url: baseUrl + '/grax-app/grax-data-lake/salesforce/sobjects/' + this.props.SObjectName + '/fields/' + this.props.fieldName + GetParams({action:'load'}),\n            data: {\n                _select: 'name,type,picklistValues'\n            },\n            success: function(data) {\n                this.setState({\n                    options: _.map(data.picklistValues || [], (item, i) => ({\n                        id: item.value,\n                        label: item.label\n                    })),\n                    isLoaded: true\n                });\n\n                if(this.props.onLoad) {\n                    this.props.onLoad(true);\n                }\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(xhr, status, err);\n\n                this.setState({\n                    isLoaded: true,\n                    error: err.toString()\n                });\n\n                if(this.props.onLoad) {\n                    this.props.onLoad(false, err);\n                }\n            }.bind(this)\n        });\n    }\n\n    render() {\n        if (this.state.error) {\n            return <div>Error: {this.state.error}</div>;\n        } else if (!this.state.isLoaded) {\n            return (\n                <div style={{ position: 'relative', height: '2rem' }}>\n                    <Spinner size=\"small\" variant=\"base\" />\n                </div>\n            );\n        } else {\n            if(this.state.options == null || this.state.options.length === 0) {\n                if(this.props.onElseComponent) {\n                    this.props.onRender(false);\n                }\n\n                return this.props.elseComponent;\n            } else if(this.props.onLoad) {\n                this.props.onRender(true);\n            }\n\n            return (\n                <React.Fragment>\n                    <Combobox\n                        classNameMenu={'scrollable-GRAXSFieldCombobox'}\n                        events={{\n                            onChange: (event, { value }) => {\n                                this.setState({\n                                    inputValue: value\n                                });\n\n                                if (this.props.onChange) {\n                                    this.props.onChange(event, value);\n                                }\n                            },\n                            onRequestRemoveSelectedOption: (event, data) => {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n\n                                if (this.props.onRequestRemoveSelectedOption) {\n                                    this.props.onRequestRemoveSelectedOption(event, data.selection);\n                                }\n                            },\n                            onSelect: (event, data) => {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n\n                                if (this.props.onSelect) {\n                                    this.props.onSelect(event, data.selection);\n                                }\n                            },\n                            onRequestClose: (event, data) => {\n                                if (this.props.onSelect && this.state.inputValue) {\n                                    this.props.onSelect(event, [{\n                                        id: this.state.inputValue,\n                                        label: this.state.inputValue\n                                    }]);\n                                }\n                            }\n                        }}\n                        labels={{\n                            placeholder: 'Select Option',\n                        }}\n                        options={comboboxFilterAndLimit({\n                            inputValue: this.state.inputValue,\n                            limit: 1000,\n                            options: this.state.options,\n                            selection: this.state.selection\n                        })}\n                        selection={this.state.selection}\n                        value={this.state.inputValue}\n                        variant={this.props.variant || 'inline-listbox'}\n                        multiple={this.props.multiple || false}\n                        required={true}\n                    />\n                </React.Fragment>\n            );\n        }\n    }\n}","/* eslint-disable no-useless-escape */\nimport React from 'react';\nimport _ from 'lodash';\nimport moment from 'moment';\n\nimport {\n  Spinner,\n  Combobox,\n  Input,\n  Button,\n  Checkbox,\n  comboboxFilterAndLimit\n} from \"@salesforce/design-system-react\";\nimport GRAXSFieldCombobox from './GRAXSFieldCombobox';\nimport GRAXDatePicker from \"./GRAXDatePicker\";\n\nimport { datePickerFormatter, datePickerParser } from \"../lib/utils\";\n\nvar sanitizeElasticFilterValue = function(filterValue) {\n    return filterValue\n        .replace(/[\\*\\+\\-=~><\\\"\\?^\\${}\\(\\)\\:\\!\\/[\\]\\\\\\s]/g, '\\\\$&') // replace single character special characters\n        .replace(/\\|\\|/g, '\\\\||') // replace ||\n        .replace(/\\&\\&/g, '\\\\&&') // replace &&\n        .replace(/AND/g, '\\\\A\\\\N\\\\D') // replace AND\n        .replace(/OR/g, '\\\\O\\\\R') // replace OR\n        .replace(/NOT/g, '\\\\N\\\\O\\\\T'); // replace NOT\n};\n\nconst FIELD = 'Field';\nconst OPERATOR = 'Operator';\nconst FILTER_VALUE = 'Filter Value';\nconst IS_ACTIVE = 'Is Active?';\n\nconst TYPE_VS_OPERATORS = {\n    'text': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=', isNegated: true},\n        {id: 'contains', label: 'contains', isNegated: false},\n        {id: 'contains', label: 'not contains', isNegated: true},\n        {id: 'in', label: 'in', isNegated: false},\n        {id: 'in', label: 'not in', isNegated: true},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'date': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=' , isNegated: true},\n        {id: 'gt', label: '>', isNegated: false},\n        {id: 'lt', label: '<', isNegated: false},\n        {id: 'gte', label: '>=', isNegated: false},\n        {id: 'lte', label: '<=', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'number': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=', isNegated: true},\n        {id: 'gt', label: '>', isNegated: false},\n        {id: 'lt', label: '<', isNegated: false},\n        {id: 'gte', label: '>=', isNegated: false},\n        {id: 'lte', label: '<=', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'long': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=', isNegated: true},\n        {id: 'gt', label: '>', isNegated: false},\n        {id: 'lt', label: '<', isNegated: false},\n        {id: 'gte', label: '>=', isNegated: false},\n        {id: 'lte', label: '<=', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'boolean': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false}\n    ]\n};\n\n\nexport class GRAXFilterableCombobox extends React.Component {\n    constructor(props) {\n\t\tsuper(props);\n\n        this._isMounted = false;\n\n\t\tthis.state = {\n\t\t\tinputValue: '',\n            selection: [],\n            isOpened: false\n\t\t};\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        if(this.props.selection) {\n            console.log(this.props.selection);\n\n            this.setState({\n                selection: this.props.selection\n            });\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    filterOptionsHandler() {\n        var options = this.props.options || [];\n\n        if(this.props.filterOptionsHandler && this.state.isOpened) {\n            options = this.props.filterOptionsHandler(options);\n        }\n\n        return comboboxFilterAndLimit({\n            inputValue: this.state.inputValue,\n            limit: 1000,\n            options: options,\n            selection: this.state.selection\n        })\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <Combobox\n                    classNameMenu={'scrollable-GRAXFilterableCombobox'}\n                    events={{\n                        onChange: (event, { value }) => {\n                            this.setState({\n                                inputValue: value\n                            });\n\n                            if (this.props.onChange) {\n                                this.props.onChange(event, value);\n                            }\n                        },\n                        onRequestRemoveSelectedOption: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n                            }\n\n                            if (this.props.onRequestRemoveSelectedOption) {\n                                this.props.onRequestRemoveSelectedOption(event, data.selection);\n                            }\n                        },\n                        onSelect: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n                            }\n\n                            if (this.props.onSelect) {\n                                this.props.onSelect(event, data.selection);\n                            }\n                        },\n                        onOpen: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    isOpened: true\n                                });\n                            }\n                        },\n                        onClose: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    isOpened: false\n                                });\n                            }\n                        }\n                    }}\n                    labels={{\n                        placeholder: this.props.placeholder,\n                    }}\n                    options={this.filterOptionsHandler()}\n                    selection={this.state.selection}\n                    value={this.state.inputValue}\n                    variant={this.props.variant || 'inline-listbox'}\n                    required={true}\n                    multiple={false}\n                />\n            </React.Fragment>\n        );\n    }\n}\n\n\nexport default class GRAXFilterGeneration extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            _filterValues: null,\n            _error: null,\n            _filterValuesFields: []\n        };\n    }\n\n    isLoaded() {\n        return this.state._error || (this.props.filterableFieldOptions != null);\n    }\n\n    getFilterValueStruct() {\n        return {\n            id: null,\n            value: null,\n            operator: 'eq',\n            isNegated: false,\n            isActive: true,\n            selectedField: null\n        };\n    }\n\n    getFilterValuesList(_filterValues) {\n        return _.map(_filterValues, (filterValue, fieldName) => {\n            var filterValueStruct = this.getFilterValueStruct();\n\n            filterValueStruct.id = fieldName;\n            filterValueStruct.value = filterValue.value;\n            filterValueStruct.operator = filterValue.operator;\n            filterValueStruct.isNegated = filterValue.isNegated;\n            filterValueStruct.isActive = filterValue.isActive;\n            filterValueStruct.selectedField = _.filter(this.props.filterableFieldOptions, (option, i) => {\n                return option && option.id === fieldName;\n            })[0] || null;\n\n            return filterValueStruct;\n        });\n    }\n\n    componentDidMount() {\n        var _filterValues = this.props.filterValues || {};\n        var _filterValuesFields = Object.keys(_filterValues);\n\n        this.setState({\n            _filterValues: _filterValues,\n            _filterValuesFields: _filterValuesFields,\n            _filterValuesList: this.getFilterValuesList(_filterValues)\n        });\n\n        this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this), _filterValuesFields, this.getFilterQuery.bind(this), this.state._filterValues);\n    }\n\n\n    onFilterValueChangeHandler(filterValue, selection) {\n        var _filterValues = this.state._filterValues;\n\n        if(selection && selection.length > 0) {\n            var selectedField = selection[0] || null;\n\n            filterValue.id = selectedField.id;\n            filterValue.selectedField = selectedField;\n\n            _filterValues[filterValue.id] = {\n                value: filterValue.value,\n                isActive: filterValue.isActive,\n                operator: filterValue.operator,\n                isNegated: filterValue.isNegated,\n                selectedField: selectedField\n            };\n        } else {\n            delete _filterValues[filterValue.id];\n            filterValue.id = null;\n            filterValue.selectedField = null;\n        }\n\n        var _filterValuesFields = Object.keys(_filterValues);\n\n        this.setState({\n            _filterValues: _filterValues,\n            _filterValuesFields: _filterValuesFields,\n            _filterValuesList: this.state._filterValuesList\n        });\n\n        if(this.props.onFilterValueChangeHandler) {\n            this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this), _filterValuesFields, this.getFilterQuery.bind(this), this.state._filterValues);\n        }\n    }\n\n    addAnotherFieldHandler() {\n        var _filterValuesList = this.state._filterValuesList;\n\n        if(_filterValuesList.length === 0 || _filterValuesList[_filterValuesList.length - 1].id != null) {\n            _filterValuesList.push(this.getFilterValueStruct());\n\n            this.setState({\n                _filterValuesList: _filterValuesList\n            });\n        }\n    }\n\n    removeFieldHandler(i) {\n        var _filterValues = this.state._filterValues;\n        var _filterValuesList = this.state._filterValuesList;\n\n        delete _filterValues[_filterValuesList[i].id];\n        _filterValuesList.splice(i, 1);\n\n        this.setState({\n            _filterValues: _filterValues,\n            _filterValuesFields: Object.keys(_filterValues),\n            _filterValuesList: _filterValuesList\n        });\n    }\n\n    getFilterFunction(dataList) {\n        return _.filter(dataList, (item, i) => {\n            var isReturned = true;\n\n            _.forEach(this.state._filterValues, (filterValue, fieldName) => {\n                if(!filterValue.isActive) return;\n\n                var filterOperator = filterValue.operator;\n                var filterVal = filterValue.value;\n\n                if(filterOperator !== 'in' && Array.isArray(filterVal)) {\n                    filterVal = filterVal.length > 0 ? filterVal[0] : null;\n                } else if(filterOperator === 'in' && !Array.isArray(filterVal)) {\n                    filterVal = filterVal.split(' OR ');\n                }\n\n                var filterIsNegated = filterValue.isNegated;\n                var isFilterMatch = false;\n                var itemVal = item[fieldName];\n\n                if(filterOperator === 'eq' && filterVal !== '' && !Boolean(filterVal)) {\n                    filterOperator = 'exists';\n                    filterIsNegated = false;\n                }\n\n                if(Array.isArray(filterVal) && filterOperator !== 'in') {\n                    filterVal = filterVal.length > 0 ? filterVal[0] : null;\n                }\n\n                if(filterValue.selectedField.type === 'date') {\n                    itemVal = moment(itemVal);\n\n                    if(itemVal) {\n                        itemVal = itemVal.format('YYYY-MM-DD');\n                    }\n\n                    filterVal = moment(filterVal);\n\n                    if(filterVal) {\n                        filterVal = filterVal.format('YYYY-MM-DD');\n                    }\n                }\n\n                if(filterValue.selectedField.type === 'boolean' && !Boolean(filterVal)) {\n                    filterVal = true;\n                    filterIsNegated = true;\n                }\n\n                if(filterOperator === 'exists') {\n                    isFilterMatch = Boolean(itemVal) === Boolean(filterVal);\n                } else if(filterOperator === 'contains') {\n                    isFilterMatch = String(itemVal).toLowerCase().includes(filterVal.toLowerCase());\n                } else if(filterOperator === 'in') {\n                    isFilterMatch = filterVal && filterVal.length > 0 && _.includes(filterVal, ...(typeof(itemVal) === 'string' ? [itemVal] : itemVal));\n                } else {\n                    isFilterMatch = _[filterOperator](itemVal, filterVal);\n                }\n\n                isReturned &= filterIsNegated ? !isFilterMatch : isFilterMatch;\n            });\n\n            return isReturned;\n        }) || [];\n    }\n\n    getFilterQuery() {\n        // Contains: doc.field:value, doc.field:*value*\n        // Equal: doc.field:\"value\" (Contains exact on text type)\n        // NotNull: _exists_:doc.field\n\n        // Gt: doc.field:[value TO *]; doc.field:>value\n        // Lt: doc.field:[* TO value]; doc.field:<value\n        // Gte: doc.field:>=value\n        // Lte: doc.field:<=value\n\n        // Boolean: +doc.field; -doc.field\n        // Negation: NOT (...)\n        // IN: (doc.field: 'a' OR doc.field: 'b' OR ...)\n        // Exists: __exists__:doc.field\n\n        var operatorByName = {\n            'gt': '>',\n            'gte': '>=',\n            'lt': '<',\n            'lte': '<='\n        };\n\n        var queryConditions = [];\n\n        _.forEach(this.state._filterValues, (filterValue, fieldName) => {\n            var filterOperator = filterValue.operator;\n\n            if(!filterValue.isActive || filterOperator.startsWith('_')) return;\n\n            var filterVal = filterValue.value;\n\n            if(filterOperator !== 'in' && Array.isArray(filterVal)) {\n                filterVal = filterVal.length > 0 ? sanitizeElasticFilterValue(filterVal[0]) : null;\n            } else if(filterOperator === 'in' && !Array.isArray(filterVal)) {\n                filterVal = _.map(filterVal.split(' OR '), (_filterVal) => {\n                    return sanitizeElasticFilterValue(_filterVal);\n                });\n            }\n\n            var filterIsNegated = filterValue.isNegated;\n\n            if(filterOperator === 'eq' && filterIsNegated && !Boolean(filterVal)) {\n                filterOperator = 'exists';\n                filterVal = filterIsNegated;\n            }\n\n            if(filterOperator === 'exists') {\n                filterIsNegated = !Boolean(filterVal);\n            }\n\n            var condition = '(';\n\n            if(filterIsNegated) {\n                condition += 'NOT ';\n            }\n\n            condition += '(';\n\n            if(filterValue.selectedField.type === 'boolean' && !Boolean(filterVal)) {\n                condition += 'NOT ';\n            }\n\n            if(filterOperator === 'in') {\n                var inConditions = [];\n\n                _.each(filterVal, (item, i) => {\n                    inConditions.push('\"' + item + '\"');\n                });\n\n                condition += 'doc.' + fieldName + ':(' + inConditions.join(' OR ') + ')';\n            } else if(filterOperator === 'exists') {\n                condition += '_exists_:doc.' + fieldName;\n            } else {\n                condition += 'doc.' + fieldName + ':';\n\n                if(filterOperator === 'eq') {\n                    if(filterValue.selectedField.type === 'boolean') {\n                        condition += 'true';\n                    } else if(filterValue.selectedField.type === 'number') {\n                        condition += filterVal ? parseFloat(filterVal) : '';\n                    } else if(filterValue.selectedField.type === 'date') {\n                        condition += filterVal ? moment(filterVal).format('YYYY-MM-DD') : '';\n                    } else {\n                        condition += '\"' + filterVal + '\"';\n                    }\n                } else if(filterOperator === 'contains') {\n                    var _filterVal = filterVal ? String(filterVal) : '';\n\n                    condition += '(';\n                    condition += '\"' + sanitizeElasticFilterValue(filterVal) + '\"';\n                    condition += ' OR ';\n                    condition += sanitizeElasticFilterValue(_filterVal.toLowerCase());\n                    condition += ' OR ';\n                    condition += '*' + sanitizeElasticFilterValue(_filterVal.toLowerCase()) + '*';\n                    condition += ')';\n                } else if(filterValue.selectedField.type === 'date') {\n                    condition += operatorByName[filterOperator] + (filterVal ? moment(filterVal).format('YYYY-MM-DD') : '');\n                } else {\n                    condition += operatorByName[filterOperator] + (filterVal ? sanitizeElasticFilterValue(filterVal) : '');\n                }\n\n            }\n\n            condition += '))';\n\n            queryConditions.push(condition);\n        });\n\n        return queryConditions.length > 0 ? queryConditions.join(' AND ') : null;\n    }\n\n    getSelectionValues(selection) {\n        return selection ? _.reduce(selection, function(selectionIds, item) {\n            selectionIds.push(item.id);\n\n            return selectionIds;\n        }, []) : null;\n    }\n\n    render() {\n        if (this.state._error) {\n            return <div>Error: {this.state._error}</div>;\n        } else if (!this.isLoaded()) {\n            return (\n                <div style={{ position: 'relative', height: '5rem' }}>\n                    <Spinner size=\"small\" variant=\"base\" />\n                </div>\n            );\n        } else {\n            return (\n                <React.Fragment>\n                    {/*<div className=\"slds-scrollable_y\" style={{maxHeight: '50vw'}}>*/}\n                        <table className=\"slds-table slds-table_cell-buffer slds-table_bordered slds-no-row-hover\">\n                            <thead>\n                                <tr className=\"slds-line-height_reset\">\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={FIELD}>{FIELD}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={OPERATOR}>{OPERATOR}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={FILTER_VALUE}>{FILTER_VALUE}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={IS_ACTIVE}>{IS_ACTIVE}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\"></div>\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {/* Iterate over fields */}\n                                {_.map(this.state._filterValuesList, function(filterValue, i) {\n                                    var fieldName = filterValue.id;\n\n                                    var selectedField = filterValue.selectedField || {};\n\n                                    return (\n                                        <tr className=\"slds-hint-parent\" key={'fieldName: ' + (fieldName || '')}>\n                                            <td data-label={FIELD} style={{width: '30vw'}}>\n                                                {fieldName ||\n                                                <GRAXFilterableCombobox\n                                                    placeholder=\"Select Field to filter\"\n                                                    options={this.props.filterableFieldOptions || []}\n                                                    filterOptionsHandler={(options) => {\n                                                        return _.filter(options, (option, i) => {\n                                                            return option && this.state._filterValuesFields.indexOf(option.id) === -1;\n                                                        }) || [];\n                                                    }}\n                                                    selection={_.find(this.props.filterableFieldOptions, (option) => {\n                                                        return option && option.id === fieldName;\n                                                    }) || []}\n                                                    onSelect={(event, selection) => this.onFilterValueChangeHandler(filterValue, selection)}\n                                                    onRequestRemoveSelectedOption={(event, selection) => this.onFilterValueChangeHandler(filterValue, selection)}\n                                                />}\n                                            </td>\n                                            <td data-label={OPERATOR} style={{width: '20vw'}}>\n                                                {selectedField && (\n                                                    (\n                                                        selectedField.type === 'boolean' && TYPE_VS_OPERATORS[selectedField.type].label\n                                                    ) || (\n                                                        <GRAXFilterableCombobox\n                                                            placeholder=\"Select Operator to Compare\"\n                                                            options={TYPE_VS_OPERATORS[selectedField.type] || []}\n                                                            selection={[]}\n                                                            variant=\"readonly\"\n                                                            onSelect={(event, selection) => {\n                                                                selection[0].type = selection[0].type || filterValue.selectedField.type;\n\n                                                                filterValue.operator = selection[0].id;\n                                                                filterValue.isNegated = selection[0].isNegated;\n\n                                                                if(filterValue.type !== selection[0].type) {\n                                                                    filterValue.value = null;\n\n                                                                    if(selection[0].type === 'boolean') {\n                                                                        filterValue.value = false;\n                                                                    }\n\n                                                                    if(selection[0].type === 'text') {\n                                                                        filterValue.value = '';\n                                                                    }\n\n                                                                    filterValue.type = selection[0].type;\n                                                                }\n\n                                                                this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField])\n                                                            }}\n                                                        />\n                                                    )\n                                                )}\n                                            </td>\n                                            <td data-label={FILTER_VALUE} style={{width: '30vw'}}>\n                                                {selectedField && (\n                                                    (\n                                                        (selectedField.type === 'boolean' || filterValue.operator === 'exists') && (\n                                                            <Checkbox\n                                                                defaultChecked={filterValue.value}\n                                                                onChange={(e) => {\n                                                                    filterValue.value = e.target.checked;\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                            />\n                                                        )\n                                                    ) || (\n                                                        (selectedField.type === 'text' || selectedField.type === 'number' || selectedField.type === 'long') && (\n                                                            <GRAXSFieldCombobox\n                                                                SObjectName={this.props.SObjectType}\n                                                                fieldName={selectedField.id}\n                                                                onSelect={(event, selection) => {\n                                                                    filterValue.value = this.getSelectionValues(selection);\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                                onRequestRemoveSelectedOption={(event, selection) => {\n                                                                    filterValue.value = this.getSelectionValues(selection);\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                                elseComponent={\n                                                                    <Input\n                                                                        defaultValue={filterValue.value}\n                                                                        assistiveText={{ label: selectedField.label }}\n                                                                        id={selectedField.id}\n                                                                        onBlur={(event) => {\n                                                                            filterValue.value = event.target.value;\n\n                                                                            this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                        }}\n                                                                    />\n                                                                }\n                                                                onRender={(isPicklist) => {}}\n                                                                multiple={filterValue.operator === 'in'}\n                                                                variant={filterValue.operator === 'in' ? 'base' : 'inline-listbox'}\n                                                            />\n                                                        )\n                                                    ) || (\n                                                        selectedField.type === 'date' && (\n                                                            <GRAXDatePicker\n                                                                value={filterValue.value}\n                                                                onChange={(event, data) => {\n                                                                    filterValue.value = data.date;\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                                className=\"inline-table\"\n                                                                menuPosition=\"relative\"\n                                                                hasStaticAlignment={true}\n                                                            />\n                                                        )\n                                                    )\n                                                )}\n                                            </td>\n                                            <td data-label={IS_ACTIVE} style={{width: '10vw'}}>\n                                                <Checkbox\n                                                    defaultChecked={filterValue.isActive}\n                                                    onChange={(e) => {\n                                                        filterValue.isActive = e.target.checked;\n\n                                                        this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                    }}\n                                                />\n                                            </td>\n                                            <td data-label={'Actions'} style={{width: '10vw'}}>\n                                                <Button label=\"Remove Filter\" variant=\"base\" onClick={() => {\n                                                    this.removeFieldHandler(i);\n                                                }}/>\n                                            </td>\n                                        </tr>\n                                    );\n                                }.bind(this))}\n                            </tbody>\n                        </table>\n                    {/*</div>*/}\n\n                    <div className=\"slds-p-top_medium\">\n                        <Button label=\"Add Filter\" variant=\"brand\" onClick={() => {\n                            this.addAnotherFieldHandler();\n                        }} disabled={this.props.filterableFieldOptions == null || this.props.filterableFieldOptions.length === 0 || this.props.filterableFieldOptions.length === this.state._filterValuesFields.length} />\n                    </div>\n                </React.Fragment>\n            );\n        }\n    }\n}","/* eslint-disable no-useless-constructor */\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport _ from \"lodash\";\n\nimport { baseUrl, GetParams, token, orgid } from \"../lib/grax-data-lake\";\n\nconst portalsRoot = document.getElementById(\"portals\");\n\nclass GRAXCSVExportForm extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return ReactDOM.createPortal(\n      <form\n        id={this.props.formId}\n        action={\n          baseUrl +\n          \"/grax-app/grax-data-lake/export/\" +\n          this.props.params.source +\n          \"/csv\" +\n          GetParams({\n            action: \"export\",\n            token,\n            orgid\n          })\n        }\n        target=\"_blank\"\n        method=\"POST\"\n        encType=\"application/x-www-form-urlencoded\"\n        style={{\n          margin: 0,\n          padding: 0,\n          border: 0,\n          display: \"inline-block\"\n        }}\n      >\n        {_.map(this.props.params, function(val, key) {\n          return (\n            <input type=\"hidden\" key={String(Date.now()) + key} name={key} value={val || \"\"} />\n          );\n        })}\n      </form>,\n      portalsRoot\n    );\n  }\n}\n\nexport default class GRAXCSVExportButton extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formId: \"csvExport\" + Date.now()\n    };\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <GRAXCSVExportForm formId={this.state.formId} params={this.props.params} />\n        <button className=\"slds-button slds-button_neutral\" type=\"submit\" form={this.state.formId}>\n          Export to CSV\n        </button>\n      </React.Fragment>\n    );\n  }\n}\n","import jQuery from 'jquery'\n\n(function($) {\n\tvar svgns = 'http://www.w3.org/2000/svg';\n\tvar xlinkns = 'http://www.w3.org/1999/xlink';\n\n    $.fn.sldsTree = function(options) {\n    \tvar $this = this;\n\n    \tvar settings = $.extend(true, {\n        \tdata: [],\n        \titems: {\n        \t\tid: 'id',\n        \t\tlabel: 'label',\n        \t\tchilds: 'childs',\n        \t},\n        \tattrs: {\n\t\t\t\troot: {'class': 'slds-tree_container'},\n\t\t\t\tul: {'class': 'slds-tree'},\n\t\t\t\tli: {\n\t\t\t\t\t'role': 'treeitem',\n\t\t\t\t\t'aria-level': '1',\n\t\t\t\t\t'aria-expanded': 'false'\n\t\t\t\t},\n\t\t\t\tdiv: {'class': 'slds-tree__item'},\n\t\t\t\tbutton: {\n\t\t\t\t\t'class': 'slds-button slds-button_icon slds-m-right_x-small',\n\t\t\t\t\t'aria-hidden': 'true',\n\t\t\t\t\t'tabindex': '-1'\n\t\t\t\t}\n\t\t\t},\n\t\t\texpandButton: {\n\t\t\t\t'disabled': 'slds-is-disabled'\n\t\t\t},\n\t\t\texpandIcon: {\n\t\t\t\t'class': 'slds-button__icon slds-button__icon_small',\n\t\t\t\t'path': './assets/icons/utility-sprite/svg/symbols.svg#chevronright'\n\t\t\t},\n        \tonUl: function($ul, items, settings) {},\n        \tonLi: function($li, item, settings) {},\n        \tonDiv: function($div, item, settings) {\n        \t\t$div.append(item[settings.items.label]);\n        \t},\n        \tonButton: function($button, item, settings) {},\n            onFinish: function($root, items, settings) {}\n        }, options);\n\n        var getTreeItemButton = function(item, disabled, $li) {\n        \tvar $button = $('<button>').attr(settings.attrs.button).toggleClass(settings.expandButton.disabled, disabled);\n\n        \tvar icon = document.createElementNS(svgns, 'svg');\n        \ticon.setAttribute('class', settings.expandIcon.class);\n        \ticon.setAttribute('aria-hidden', 'true');\n\n        \tvar icon_use = document.createElementNS(svgns, 'use');\n        \ticon_use.setAttributeNS(xlinkns, 'xlink:href', settings.expandIcon.path);\n        \t\n        \ticon.appendChild(icon_use);\n\n    \t\t$button.append(icon);\n\n        \t$button.on('click', function(e) {\n        \t\t$li.attr('aria-expanded', function(i, attr) {\n\t\t            return !(attr === 'true');\n\t\t        });\n\n\t\t        e.preventDefault();\n        \t});\n\n        \tsettings.onButton($button, item, settings);\n\n        \treturn $button;\n        }\n\n        var getTreeItemContent = function(item, level, $ul, $li) {\n        \tvar $div = $('<div>').attr(settings.attrs.div);\n\n\t\t\t$div.append(getTreeItemButton(item, !item[settings.items.childs] || item[settings.items.childs].length < 1, $li));\n\n        \tsettings.onDiv($div, item, settings);\n\n        \treturn $div;\n        }\n\n        var getTreeItem = function(item, level, $ul) {\n        \tvar $li = $('<li>').attr(settings.attrs.li);\n\n        \t$li.attr({'aria-level': level}).append(getTreeItemContent(item, level, $ul, $li));\n        \tif(item[settings.items.childs]) {\n        \t\t$li.append(getTree(item[settings.items.childs], level+1));\n        \t}\n\n        \tsettings.onLi($li, item, settings);\n\n        \treturn $li;\n        };\n\n        var getTree = function(items, level) {\n        \tvar $ul = $('<ul>').attr(settings.attrs.ul);\n\n        \tif(level > 1) $ul.attr({'role': 'group'});\n\n\t        $.each(items, function(i, item) {\n\t        \t$ul.append(getTreeItem(item, level, $ul));\n\t        });\n\n\t        settings.onUl($ul, items, settings);\n\n\t        return $ul;\n        };\n\n        $this.attr(settings.attrs.root).html(getTree(settings.data, 1));\n\n        settings.onFinish($this, settings.data, settings);\n\n        return $this;\n    };\n \n}(jQuery));"],"sourceRoot":""}