(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[2],{281:function(e,t,a){"use strict";var l=a(36),i=a(43),s=a(85),n=a(44),o=a(45),r=a(0),c=a.n(r),u=a(10),d=function(e){Object(n.a)(a,e);var t=Object(o.a)(a);function a(e){var i;Object(l.a)(this,a),i=t.call(this,e);var n=e.isOpen,o=e.isCollapsible;return i.state={isOpen:!0===n||void 0===o},i.handleToggle=i.handleToggle.bind(Object(s.a)(i)),i}return Object(i.a)(a,[{key:"handleToggle",value:function(e){var t=this.props.onToggle;this.setState((function(e){return{isOpen:!e.isOpen}})),t&&t(isOpen),e.preventDefault()}},{key:"render",value:function(){var e=this.props,t=e.id,a=e.key,l=e.isCollapsible,i=e.title,s=e.helpText,n=e.className,o=e.children,r=this.state.isOpen,d=c.a.createElement("span",{className:"slds-truncate".concat(l?"":" slds-p-horizontal_small"),title:i},i,s);return c.a.createElement("div",{id:t||a,className:["slds-section",r&&"slds-is-open",n].join(" ")},c.a.createElement("h3",{className:"slds-section__title slds-theme_shade"},l?c.a.createElement("button",{type:"button",className:"slds-button slds-section__title-action",onClick:this.handleToggle},c.a.createElement(u.a,{assistiveText:{label:i},category:"utility",name:"switch",size:"x-small",className:"slds-section__title-action-icon slds-button__icon slds-button__icon_left"}),d):d),r&&c.a.createElement("div",{className:"slds-section__content"},o))}}]),a}(c.a.Component);t.a=d},283:function(e,t,a){"use strict";var l=a(3),i=a(0),s=a.n(i),n=a(297),o=a(20);t.a=function(e){var t=Object(i.useState)(!0),a=Object(l.a)(t,2),r=a[0],c=a[1];return s.a.createElement("div",{className:"slds-is-relative"},s.a.createElement(n.a,Object.assign({formatter:o.f,parser:o.g},e,{onChange:function(t,a){c(""===a.formattedDate||Object(o.l)(a.date).isValid()),null!=e.onChange&&e.onChange(t,a)}})),!1===r?s.a.createElement("div",{className:"slds-text-color_error"},"The date is invalid. Please select/write a valid date."):null)}},284:function(e,t,a){"use strict";var l=a(40),i=a(36),s=a(43),n=a(44),o=a(45),r=a(0),c=a.n(r),u=a(31),d=a.n(u),p=a(21),h=a.n(p),v=a(269),b=a(268),m=a(74),f=a(72),g=a(255),O=a(15),y=a(279),F=a(20),N=function(e){Object(n.a)(a,e);var t=Object(o.a)(a);function a(e){var l;return Object(i.a)(this,a),(l=t.call(this,e)).state={options:[],inputValue:"",selection:[],isLoaded:!1,error:null},l}return Object(s.a)(a,[{key:"componentDidMount",value:function(){y.a.ajax({type:"GET",url:y.c+"/grax-app/grax-data-lake/salesforce/sobjects/"+this.props.SObjectName+"/fields/"+this.props.fieldName+Object(y.b)({action:"load"}),data:{_select:"name,type,picklistValues"},success:function(e){this.setState({options:d.a.map(e.picklistValues||[],(function(e,t){return{id:e.value,label:e.label}})),isLoaded:!0}),this.props.onLoad&&this.props.onLoad(!0)}.bind(this),error:function(e,t,a){console.error(e,t,a),this.setState({isLoaded:!0,error:a.toString()}),this.props.onLoad&&this.props.onLoad(!1,a)}.bind(this)})}},{key:"render",value:function(){var e=this;return this.state.error?c.a.createElement("div",null,"Error: ",this.state.error):this.state.isLoaded?null==this.state.options||0===this.state.options.length?(this.props.onElseComponent&&this.props.onRender(!1),this.props.elseComponent):(this.props.onLoad&&this.props.onRender(!0),c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{classNameMenu:"scrollable-GRAXSFieldCombobox",events:{onChange:function(t,a){var l=a.value;e.setState({inputValue:l}),e.props.onChange&&e.props.onChange(t,l)},onRequestRemoveSelectedOption:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onRequestRemoveSelectedOption&&e.props.onRequestRemoveSelectedOption(t,a.selection)},onSelect:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onSelect&&e.props.onSelect(t,a.selection)},onRequestClose:function(t,a){e.props.onSelect&&e.state.inputValue&&e.props.onSelect(t,[{id:e.state.inputValue,label:e.state.inputValue}])}},labels:{placeholder:"Select Option"},options:Object(F.e)({inputValue:this.state.inputValue,limit:1e3,options:this.state.options,selection:this.state.selection}),selection:this.state.selection,value:this.state.inputValue,variant:this.props.variant||"inline-listbox",multiple:this.props.multiple||!1,required:!0}))):c.a.createElement("div",{style:{position:"relative",height:"2rem"}},c.a.createElement(m.a,{size:"small",variant:"base"}))}}]),a}(c.a.Component),V=a(283);a.d(t,"a",(function(){return C}));var S=function(e){return e.replace(/[\*\+\-=~><\"\?^\${}\(\)\:\!\/[\]\\\s]/g,"\\$&").replace(/\|\|/g,"\\||").replace(/\&\&/g,"\\&&").replace(/AND/g,"\\A\\N\\D").replace(/OR/g,"\\O\\R").replace(/NOT/g,"\\N\\O\\T")},_={text:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"contains",label:"contains",isNegated:!1},{id:"contains",label:"not contains",isNegated:!0},{id:"in",label:"in",isNegated:!1},{id:"in",label:"not in",isNegated:!0},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],date:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"gt",label:">",isNegated:!1},{id:"lt",label:"<",isNegated:!1},{id:"gte",label:">=",isNegated:!1},{id:"lte",label:"<=",isNegated:!1},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],number:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"gt",label:">",isNegated:!1},{id:"lt",label:"<",isNegated:!1},{id:"gte",label:">=",isNegated:!1},{id:"lte",label:"<=",isNegated:!1},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],long:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"gt",label:">",isNegated:!1},{id:"lt",label:"<",isNegated:!1},{id:"gte",label:">=",isNegated:!1},{id:"lte",label:"<=",isNegated:!1},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],boolean:[{id:"eq",label:"==",isNegated:!1},{id:"exists",label:"exists",isNegated:!1}]},E=function(e){Object(n.a)(a,e);var t=Object(o.a)(a);function a(e){var l;return Object(i.a)(this,a),(l=t.call(this,e))._isMounted=!1,l.state={inputValue:"",selection:[],isOpened:!1},l}return Object(s.a)(a,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.selection&&(console.log(this.props.selection),this.setState({selection:this.props.selection}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"filterOptionsHandler",value:function(){var e=this.props.options||[];return this.props.filterOptionsHandler&&this.state.isOpened&&(e=this.props.filterOptionsHandler(e)),Object(v.a)({inputValue:this.state.inputValue,limit:1e3,options:e,selection:this.state.selection})}},{key:"render",value:function(){var e=this;return c.a.createElement(c.a.Fragment,null,c.a.createElement(b.a,{classNameMenu:"scrollable-GRAXFilterableCombobox",events:{onChange:function(t,a){var l=a.value;e.setState({inputValue:l}),e.props.onChange&&e.props.onChange(t,l)},onRequestRemoveSelectedOption:function(t,a){e._isMounted&&e.setState({inputValue:"",selection:a.selection}),e.props.onRequestRemoveSelectedOption&&e.props.onRequestRemoveSelectedOption(t,a.selection)},onSelect:function(t,a){e._isMounted&&e.setState({inputValue:"",selection:a.selection}),e.props.onSelect&&e.props.onSelect(t,a.selection)},onOpen:function(t,a){e._isMounted&&e.setState({isOpened:!0})},onClose:function(t,a){e._isMounted&&e.setState({isOpened:!1})}},labels:{placeholder:this.props.placeholder},options:this.filterOptionsHandler(),selection:this.state.selection,value:this.state.inputValue,variant:this.props.variant||"inline-listbox",required:!0,multiple:!1}))}}]),a}(c.a.Component),C=function(e){Object(n.a)(a,e);var t=Object(o.a)(a);function a(e){var l;return Object(i.a)(this,a),(l=t.call(this,e)).state={_filterValues:null,_error:null,_filterValuesFields:[]},l}return Object(s.a)(a,[{key:"isLoaded",value:function(){return this.state._error||null!=this.props.filterableFieldOptions}},{key:"getFilterValueStruct",value:function(){return{id:null,value:null,operator:"eq",isNegated:!1,isActive:!0,selectedField:null}}},{key:"getFilterValuesList",value:function(e){var t=this;return d.a.map(e,(function(e,a){var l=t.getFilterValueStruct();return l.id=a,l.value=e.value,l.operator=e.operator,l.isNegated=e.isNegated,l.isActive=e.isActive,l.selectedField=d.a.filter(t.props.filterableFieldOptions,(function(e,t){return e&&e.id===a}))[0]||null,l}))}},{key:"componentDidMount",value:function(){var e=this.props.filterValues||{},t=Object.keys(e);this.setState({_filterValues:e,_filterValuesFields:t,_filterValuesList:this.getFilterValuesList(e)}),this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this),t,this.getFilterQuery.bind(this),this.state._filterValues)}},{key:"onFilterValueChangeHandler",value:function(e,t){var a=this.state._filterValues;if(t&&t.length>0){var l=t[0]||null;e.id=l.id,e.selectedField=l,a[e.id]={value:e.value,isActive:e.isActive,operator:e.operator,isNegated:e.isNegated,selectedField:l}}else delete a[e.id],e.id=null,e.selectedField=null;var i=Object.keys(a);this.setState({_filterValues:a,_filterValuesFields:i,_filterValuesList:this.state._filterValuesList}),this.props.onFilterValueChangeHandler&&this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this),i,this.getFilterQuery.bind(this),this.state._filterValues)}},{key:"addAnotherFieldHandler",value:function(){var e=this.state._filterValuesList;0!==e.length&&null==e[e.length-1].id||(e.push(this.getFilterValueStruct()),this.setState({_filterValuesList:e}))}},{key:"removeFieldHandler",value:function(e){var t=this.state._filterValues,a=this.state._filterValuesList;delete t[a[e].id],a.splice(e,1),this.setState({_filterValues:t,_filterValuesFields:Object.keys(t),_filterValuesList:a})}},{key:"getFilterFunction",value:function(e){var t=this;return d.a.filter(e,(function(e,a){var i=!0;return d.a.forEach(t.state._filterValues,(function(t,a){if(t.isActive){var s=t.operator,n=t.value;"in"!==s&&Array.isArray(n)?n=n.length>0?n[0]:null:"in"!==s||Array.isArray(n)||(n=n.split(" OR "));var o=t.isNegated,r=!1,c=e[a];"eq"!==s||""===n||Boolean(n)||(s="exists",o=!1),Array.isArray(n)&&"in"!==s&&(n=n.length>0?n[0]:null),"date"===t.selectedField.type&&((c=h()(c))&&(c=c.format("YYYY-MM-DD")),(n=h()(n))&&(n=n.format("YYYY-MM-DD"))),"boolean"!==t.selectedField.type||Boolean(n)||(n=!0,o=!0),r="exists"===s?Boolean(c)===Boolean(n):"contains"===s?String(c).toLowerCase().includes(n.toLowerCase()):"in"===s?n&&n.length>0&&d.a.includes.apply(d.a,[n].concat(Object(l.a)("string"===typeof c?[c]:c))):d.a[s](c,n),i&=o?!r:r}})),i}))||[]}},{key:"getFilterQuery",value:function(){var e={gt:">",gte:">=",lt:"<",lte:"<="},t=[];return d.a.forEach(this.state._filterValues,(function(a,l){var i=a.operator;if(a.isActive&&!i.startsWith("_")){var s=a.value;"in"!==i&&Array.isArray(s)?s=s.length>0?S(s[0]):null:"in"!==i||Array.isArray(s)||(s=d.a.map(s.split(" OR "),(function(e){return S(e)})));var n=a.isNegated;"eq"===i&&n&&!Boolean(s)&&(i="exists",s=n),"exists"===i&&(n=!Boolean(s));var o="(";if(n&&(o+="NOT "),o+="(","boolean"!==a.selectedField.type||Boolean(s)||(o+="NOT "),"in"===i){var r=[];d.a.each(s,(function(e,t){r.push('"'+e+'"')})),o+="doc."+l+":("+r.join(" OR ")+")"}else if("exists"===i)o+="_exists_:doc."+l;else if(o+="doc."+l+":","eq"===i)"boolean"===a.selectedField.type?o+="true":"number"===a.selectedField.type?o+=s?parseFloat(s):"":"date"===a.selectedField.type?o+=s?h()(s).format("YYYY-MM-DD"):"":o+='"'+s+'"';else if("contains"===i){var c=s?String(s):"";o+="(",o+='"'+S(s)+'"',o+=" OR ",o+=S(c.toLowerCase()),o+=" OR ",o+="*"+S(c.toLowerCase())+"*",o+=")"}else"date"===a.selectedField.type?o+=e[i]+(s?h()(s).format("YYYY-MM-DD"):""):o+=e[i]+(s?S(s):"");o+="))",t.push(o)}})),t.length>0?t.join(" AND "):null}},{key:"getSelectionValues",value:function(e){return e?d.a.reduce(e,(function(e,t){return e.push(t.id),e}),[]):null}},{key:"render",value:function(){var e=this;return this.state._error?c.a.createElement("div",null,"Error: ",this.state._error):this.isLoaded()?c.a.createElement(c.a.Fragment,null,c.a.createElement("table",{className:"slds-table slds-table_cell-buffer slds-table_bordered slds-no-row-hover"},c.a.createElement("thead",null,c.a.createElement("tr",{className:"slds-line-height_reset"},c.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},c.a.createElement("div",{className:"slds-truncate",title:"Field"},"Field")),c.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},c.a.createElement("div",{className:"slds-truncate",title:"Operator"},"Operator")),c.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},c.a.createElement("div",{className:"slds-truncate",title:"Filter Value"},"Filter Value")),c.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},c.a.createElement("div",{className:"slds-truncate",title:"Is Active?"},"Is Active?")),c.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},c.a.createElement("div",{className:"slds-truncate"})))),c.a.createElement("tbody",null,d.a.map(this.state._filterValuesList,function(e,t){var a=this,l=e.id,i=e.selectedField||{};return c.a.createElement("tr",{className:"slds-hint-parent",key:"fieldName: "+(l||"")},c.a.createElement("td",{"data-label":"Field",style:{width:"30vw"}},l||c.a.createElement(E,{placeholder:"Select Field to filter",options:this.props.filterableFieldOptions||[],filterOptionsHandler:function(e){return d.a.filter(e,(function(e,t){return e&&-1===a.state._filterValuesFields.indexOf(e.id)}))||[]},selection:d.a.find(this.props.filterableFieldOptions,(function(e){return e&&e.id===l}))||[],onSelect:function(t,l){return a.onFilterValueChangeHandler(e,l)},onRequestRemoveSelectedOption:function(t,l){return a.onFilterValueChangeHandler(e,l)}})),c.a.createElement("td",{"data-label":"Operator",style:{width:"20vw"}},i&&("boolean"===i.type&&_[i.type].label||c.a.createElement(E,{placeholder:"Select Operator to Compare",options:_[i.type]||[],selection:[],variant:"readonly",onSelect:function(t,l){l[0].type=l[0].type||e.selectedField.type,e.operator=l[0].id,e.isNegated=l[0].isNegated,e.type!==l[0].type&&(e.value=null,"boolean"===l[0].type&&(e.value=!1),"text"===l[0].type&&(e.value=""),e.type=l[0].type),a.onFilterValueChangeHandler(e,[e.selectedField])}}))),c.a.createElement("td",{"data-label":"Filter Value",style:{width:"30vw"}},i&&(("boolean"===i.type||"exists"===e.operator)&&c.a.createElement(f.a,{defaultChecked:e.value,onChange:function(t){e.value=t.target.checked,a.onFilterValueChangeHandler(e,[e.selectedField])}})||("text"===i.type||"number"===i.type||"long"===i.type)&&c.a.createElement(N,{SObjectName:this.props.SObjectType,fieldName:i.id,onSelect:function(t,l){e.value=a.getSelectionValues(l),a.onFilterValueChangeHandler(e,[e.selectedField])},onRequestRemoveSelectedOption:function(t,l){e.value=a.getSelectionValues(l),a.onFilterValueChangeHandler(e,[e.selectedField])},elseComponent:c.a.createElement(g.a,{defaultValue:e.value,assistiveText:{label:i.label},id:i.id,onBlur:function(t){e.value=t.target.value,a.onFilterValueChangeHandler(e,[e.selectedField])}}),onRender:function(e){},multiple:"in"===e.operator,variant:"in"===e.operator?"base":"inline-listbox"})||"date"===i.type&&c.a.createElement(V.a,{value:e.value,onChange:function(t,l){e.value=l.date,a.onFilterValueChangeHandler(e,[e.selectedField])},className:"inline-table",menuPosition:"relative",hasStaticAlignment:!0}))),c.a.createElement("td",{"data-label":"Is Active?",style:{width:"10vw"}},c.a.createElement(f.a,{defaultChecked:e.isActive,onChange:function(t){e.isActive=t.target.checked,a.onFilterValueChangeHandler(e,[e.selectedField])}})),c.a.createElement("td",{"data-label":"Actions",style:{width:"10vw"}},c.a.createElement(O.a,{label:"Remove Filter",variant:"base",onClick:function(){a.removeFieldHandler(t)}})))}.bind(this)))),c.a.createElement("div",{className:"slds-p-top_medium"},c.a.createElement(O.a,{label:"Add Filter",variant:"brand",onClick:function(){e.addAnotherFieldHandler()},disabled:null==this.props.filterableFieldOptions||0===this.props.filterableFieldOptions.length||this.props.filterableFieldOptions.length===this.state._filterValuesFields.length}))):c.a.createElement("div",{style:{position:"relative",height:"5rem"}},c.a.createElement(m.a,{size:"small",variant:"base"}))}}]),a}(c.a.Component)},288:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var l=a(36),i=a(43),s=a(44),n=a(45),o=a(0),r=a.n(o),c=a(74),u=a(268),d=a(279),p=a(31),h=a.n(p),v=a(20),b=function(e){Object(s.a)(a,e);var t=Object(n.a)(a);function a(e){var i;return Object(l.a)(this,a),(i=t.call(this,e)).state={options:[],inputValue:"",selection:[],isLoaded:!1,error:null},i}return Object(i.a)(a,[{key:"componentDidMount",value:function(){d.a.ajax({type:"GET",url:d.c+"/grax-app/grax-data-lake/getDataTypes"+Object(d.b)({action:"load"}),data:{},success:function(e){var t=this;this.props.excludeIds&&(e=h.a.filter(e,(function(e){return-1===t.props.excludeIds.indexOf(e.id)}))),this.setState({options:e,isLoaded:!0})}.bind(this),error:function(e,t,a){console.error(e,t,a),this.setState({isLoaded:!0,error:a.toString()})}.bind(this)})}},{key:"render",value:function(){var e=this;return this.state.error?r.a.createElement("div",null,"Error: ",this.state.error):this.state.isLoaded?r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{classNameMenu:"scrollable-GRAXObjectCombobox",events:{onChange:function(t,a){var l=a.value;e.setState({inputValue:l}),e.props.onChange&&e.props.onChange(t,l)},onRequestRemoveSelectedOption:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onRequestRemoveSelectedOption&&e.props.onRequestRemoveSelectedOption(t,a.selection)},onSelect:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onSelect&&e.props.onSelect(t,a.selection)}},labels:{placeholder:"Search GRAX Table"},options:Object(v.e)({inputValue:this.state.inputValue,limit:1e3,options:this.state.options,selection:this.state.selection}),selection:this.state.selection,value:this.state.inputValue,variant:"inline-listbox",required:!0})):r.a.createElement("div",{style:{position:"relative",height:"2rem"}},r.a.createElement(c.a,{size:"small",variant:"base"}))}}]),a}(r.a.Component)}}]);
//# sourceMappingURL=2.e62f63c3.chunk.js.map