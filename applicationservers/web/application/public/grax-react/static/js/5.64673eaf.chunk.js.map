{"version":3,"sources":["lib/grax-data-lake.js","components/SLDSSection.jsx","components/GRAXSFieldCombobox.jsx","components/GRAXFilterGeneration.jsx","components/SLDSPaginator.jsx","components/GRAXCSVExportButton.jsx","public/js/jquery.sldsTree.js","components/GRAXAuditDataTable.jsx","components/GRAXTree.jsx","components/GRAXAudit.jsx"],"names":["isDev","baseUrl","token","window","__grax__","_csrf","orgid","pageParams","userid","GetParams","params","undefined","action","$","param","ajaxSetup","beforeSend","xhr","settings","method","setRequestHeader","authorization","type","test","this","crossDomain","withCredentials","skipFail","fail","jqXHR","textStatus","errorThrown","console","error","status","showError","statusText","responseText","SLDSSection","props","state","isOpen","isCollapsible","handleToggle","bind","e","setState","onToggle","preventDefault","title","className","id","key","join","onClick","assistiveText","label","category","name","size","children","React","Component","GRAXSFieldCombobox","options","inputValue","selection","isLoaded","ajax","url","SObjectName","fieldName","data","_select","success","_","map","picklistValues","item","i","value","onLoad","err","toString","length","onElseComponent","onRender","elseComponent","Fragment","classNameMenu","events","onChange","event","onRequestRemoveSelectedOption","onSelect","onRequestClose","labels","placeholder","comboboxFilterAndLimit","limit","variant","multiple","required","style","position","height","sanitizeElasticFilterValue","filterValue","replace","TYPE_VS_OPERATORS","isNegated","GRAXFilterableCombobox","_isMounted","isOpened","log","filterOptionsHandler","onOpen","onClose","GRAXFilterGeneration","_filterValues","_error","_filterValuesFields","filterableFieldOptions","operator","isActive","selectedField","filterValueStruct","getFilterValueStruct","filter","option","filterValues","Object","keys","_filterValuesList","getFilterValuesList","onFilterValueChangeHandler","getFilterFunction","getFilterQuery","push","splice","dataList","isReturned","forEach","filterOperator","filterVal","Array","isArray","split","filterIsNegated","isFilterMatch","itemVal","Boolean","moment","format","String","toLowerCase","includes","operatorByName","queryConditions","startsWith","_filterVal","condition","inConditions","each","parseFloat","reduce","selectionIds","scope","data-label","width","indexOf","find","defaultChecked","target","checked","SObjectType","getSelectionValues","defaultValue","onBlur","isPicklist","date","menuPosition","hasStaticAlignment","removeFieldHandler","addAnotherFieldHandler","disabled","SLDSPaginator","pager","totalItems","setPage","currentPage","page","isInitialLoad","pageSize","totalPages","getPager","onChangePage","isNarrow","startPage","endPage","Math","ceil","startIndex","endIndex","min","pages","iconCategory","iconName","iconPosition","index","Date","now","align","content","defaultProps","portalsRoot","document","getElementById","GRAXCSVExportForm","ReactDOM","createPortal","formId","source","encType","margin","padding","border","display","val","GRAXCSVExportButton","form","svgns","fn","sldsTree","extend","items","childs","attrs","root","ul","li","div","button","expandButton","expandIcon","onUl","$ul","onLi","$li","onDiv","$div","append","onButton","$button","onFinish","$root","getTreeItemContent","level","attr","toggleClass","icon","createElementNS","setAttribute","class","icon_use","setAttributeNS","path","appendChild","on","getTreeItemButton","getTreeItem","getTree","html","jQuery","GRAXTimeMachineCell","onClickHandler","displayName","DataTableCell","selectedDataIndex","GRAXAuditDataTable","sortColumn","sortDirection","extraInfo","isLoading","isTimeMachineModalOpen","timeMachineRecord","nextProps","nextState","renderKey","dataIndex","union","columns","hiddenColumns","_q","filterQuery","_limit","_from","_sort","_sortType","getSortFieldType","results","filterFunction","SF_DATETIME_REGEXP","m","isValid","tz","TZ","_i","DATETIME_FORMAT","DATE_FORMAT","total","totalRetrieved","getDataHandler","property","sortField","_graxFieldsSelection","dialogLabel","overflow","JSON","stringify","actionsHeader","columnSort","columnSortedAscending","columnSortedDescending","selectAllRows","selectRow","fixedLayout","onSort","handleSort","columnName","isSorted","endsWith","match","sortable","isSortable","sortableColumns","Key","slice","cookieSubfix","renderFieldListSelector","$fieldListSelector","$fieldlist","onLoadHandler","onChangeHandler","sort","a","b","domPrefix","isSelected","fields","countChecked","cookieSelected","getCookie","updateValue","eventHandler","selectedFieldList","selectedFields","field","selected","getSelectedFields","setCookie","prop","GRAXTree","_selection","fieldItem","getMappedFieldSelection","$el","el","fieldList","minHeight","ref","fieldlist","ELASTIC_SORTABLE_TYPES","GRAXAudit","retrieved","retrievedCounter","_graxFields","_graxFieldsSelectionList","_filterFunction","_getFilterQuery","_graxSortableFields","sortableFields","elasticField"],"mappings":"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","file":"static/js/5.64673eaf.chunk.js","sourcesContent":["/* eslint-disable no-useless-escape */\n/* --------------------------------------------------------------------------\n * This file is subject to the terms and conditions defined in\n * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,\n * which is part of this source code package.\n * --------------------------------------------------------------------------\n *          Copyright (c) 2017-2018 Harding Point\n *                  All rights reserved\n * --------------------------------------------------------------------------\n * Support:\tSupport@Grax.io\n * Website:\thttps://grax.io\n * Github:\thttps://github.com/HardingPoint/grax-application\n * License:\thttps://github.com/HardingPoint/grax-application/blob/master/LICENSE\n * --------------------------------------------------------------------------*/\n\nimport $ from \"jquery\";\n\n// export const isDev = window.location.port !== '80';\n\nexport const isDev = false;\n\nconst devBaseUrl = \"https://grax-datalake-demo2.herokuapp.com\";\n\nexport const baseUrl = isDev ? devBaseUrl : \"\";\n\nexport const token = window.__grax__.token;\nexport const _csrf = window.__grax__._csrf;\nexport const orgid = window.__grax__.orgid;\nexport const userid = window.__grax__.userid;\nexport const sessionid = null;\nexport const endpoint = null;\nexport const pageParams = window.__grax__.pageParams || {};\n\nexport function GetParams(params) {\n  if (params === null || params === undefined) params = {};\n\n  if (params.action === null || params.action === undefined || params.action === \"\")\n    params.action = \"load\";\n\n  return \"?\" + $.param(params);\n}\n\nfunction csrfSafeMethod(method) {\n  // these HTTP methods do not require CSRF protection\n  return /^(GET|HEAD|OPTIONS|TRACE)$/.test(method);\n}\n$.ajaxSetup({\n  beforeSend: function(xhr, settings) {\n    xhr.setRequestHeader(\"sfdcorgid\", orgid);\n\n    if (pageParams.authorization != null) {\n      xhr.setRequestHeader(\"Authorization\", pageParams.authorization);\n    } else {\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n    }\n\n    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n      xhr.setRequestHeader(\"X-CSRFToken\", _csrf);\n    }\n\n    xhr.withCredentials = true;\n\n    if (settings.skipFail !== true) {\n      xhr.fail((jqXHR, textStatus, errorThrown) => {\n        console.error(jqXHR);\n\n        if (jqXHR.status !== 404 && errorThrown !== \"Not Found\") {\n          window.showError(jqXHR.statusText + \": \" + jqXHR.responseText);\n        }\n      });\n    }\n  }\n});\n\nexport { $ };\n","import React from 'react';\nimport { Icon } from '@salesforce/design-system-react';\n\nexport default class SLDSSection extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isOpen: props.isOpen === true ? true : false || props.isCollapsible === undefined\n        };\n\n        this.handleToggle = this.handleToggle.bind(this);\n    }\n\n    handleToggle(e) {\n        var isOpen = !this.state.isOpen;\n\n        this.setState({\n            isOpen: isOpen\n        });\n\n        if(this.props.onToggle) {\n            this.props.onToggle(isOpen);\n        }\n\n        e.preventDefault();\n    }\n\n    render() {\n        var title = <span className={'slds-truncate' + (!this.props.isCollapsible ? ' slds-p-horizontal_small' : '')} title={this.props.title}>{this.props.title}</span>;\n\n        return (\n            <div id={this.props.id || this.props.key} className={['slds-section', this.state.isOpen && 'slds-is-open', this.props.className].join(' ')}>\n                <h3 className=\"slds-section__title slds-theme_shade\">\n                    {this.props.isCollapsible ? <button className=\"slds-button slds-section__title-action\" onClick={this.handleToggle}>\n                        <Icon\n                            assistiveText={{ label: this.props.title }}\n                            category=\"utility\"\n                            name=\"switch\"\n                            size=\"x-small\"\n                            className=\"slds-section__title-action-icon slds-button__icon slds-button__icon_left\"\n                        />\n                        {title}\n                    </button> : title}\n                </h3>\n                {this.state.isOpen && <div className=\"slds-section__content\">\n                    {this.props.children}\n                </div>}\n            </div>\n        );\n    }\n}","import React from 'react';\nimport _ from 'lodash';\n\nimport {Spinner, Combobox} from '@salesforce/design-system-react';\n\nimport {$, baseUrl, GetParams} from '../lib/grax-data-lake';\n\nimport {comboboxFilterAndLimit} from '../lib/utils';\n\n\nexport default class GRAXSFieldCombobox extends React.Component {\n    constructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n            options: [],\n\t\t\tinputValue: '',\n            selection: [],\n            isLoaded: false,\n            error: null\n\t\t};\n    }\n    \n    componentDidMount() {\n        $.ajax({\n            type: 'GET',\n            //dataType: 'jsonp',\n            url: baseUrl + '/grax-app/grax-data-lake/salesforce/sobjects/' + this.props.SObjectName + '/fields/' + this.props.fieldName + GetParams({action:'load'}),\n            data: {\n                _select: 'name,type,picklistValues'\n            },\n            success: function(data) {\n                this.setState({\n                    options: _.map(data.picklistValues || [], (item, i) => ({\n                        id: item.value,\n                        label: item.label\n                    })),\n                    isLoaded: true\n                });\n\n                if(this.props.onLoad) {\n                    this.props.onLoad(true);\n                }\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(xhr, status, err);\n\n                this.setState({\n                    isLoaded: true,\n                    error: err.toString()\n                });\n\n                if(this.props.onLoad) {\n                    this.props.onLoad(false, err);\n                }\n            }.bind(this)\n        });\n    }\n\n    render() {\n        if (this.state.error) {\n            return <div>Error: {this.state.error}</div>;\n        } else if (!this.state.isLoaded) {\n            return (\n                <div style={{ position: 'relative', height: '2rem' }}>\n                    <Spinner size=\"small\" variant=\"base\" />\n                </div>\n            );\n        } else {\n            if(this.state.options == null || this.state.options.length === 0) {\n                if(this.props.onElseComponent) {\n                    this.props.onRender(false);\n                }\n\n                return this.props.elseComponent;\n            } else if(this.props.onLoad) {\n                this.props.onRender(true);\n            }\n\n            return (\n                <React.Fragment>\n                    <Combobox\n                        classNameMenu={'scrollable-GRAXSFieldCombobox'}\n                        events={{\n                            onChange: (event, { value }) => {\n                                this.setState({\n                                    inputValue: value\n                                });\n\n                                if (this.props.onChange) {\n                                    this.props.onChange(event, value);\n                                }\n                            },\n                            onRequestRemoveSelectedOption: (event, data) => {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n\n                                if (this.props.onRequestRemoveSelectedOption) {\n                                    this.props.onRequestRemoveSelectedOption(event, data.selection);\n                                }\n                            },\n                            onSelect: (event, data) => {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n\n                                if (this.props.onSelect) {\n                                    this.props.onSelect(event, data.selection);\n                                }\n                            },\n                            onRequestClose: (event, data) => {\n                                if (this.props.onSelect && this.state.inputValue) {\n                                    this.props.onSelect(event, [{\n                                        id: this.state.inputValue,\n                                        label: this.state.inputValue\n                                    }]);\n                                }\n                            }\n                        }}\n                        labels={{\n                            placeholder: 'Select Option',\n                        }}\n                        options={comboboxFilterAndLimit({\n                            inputValue: this.state.inputValue,\n                            limit: 1000,\n                            options: this.state.options,\n                            selection: this.state.selection\n                        })}\n                        selection={this.state.selection}\n                        value={this.state.inputValue}\n                        variant={this.props.variant || 'inline-listbox'}\n                        multiple={this.props.multiple || false}\n                        required={true}\n                    />\n                </React.Fragment>\n            );\n        }\n    }\n}","/* eslint-disable no-useless-escape */\nimport React from 'react';\nimport _ from 'lodash';\nimport moment from 'moment';\n\nimport {Spinner, Combobox, Input, Datepicker, Button, Checkbox, comboboxFilterAndLimit} from '@salesforce/design-system-react';\nimport GRAXSFieldCombobox from './GRAXSFieldCombobox';\n\n// import {comboboxFilterAndLimit} from '../lib/utils';\n\nvar sanitizeElasticFilterValue = function(filterValue) {\n    return filterValue\n        .replace(/[\\*\\+\\-=~><\\\"\\?^\\${}\\(\\)\\:\\!\\/[\\]\\\\\\s]/g, '\\\\$&') // replace single character special characters\n        .replace(/\\|\\|/g, '\\\\||') // replace ||\n        .replace(/\\&\\&/g, '\\\\&&') // replace &&\n        .replace(/AND/g, '\\\\A\\\\N\\\\D') // replace AND\n        .replace(/OR/g, '\\\\O\\\\R') // replace OR\n        .replace(/NOT/g, '\\\\N\\\\O\\\\T'); // replace NOT\n};\n\nconst FIELD = 'Field';\nconst OPERATOR = 'Operator';\nconst FILTER_VALUE = 'Filter Value';\nconst IS_ACTIVE = 'Is Active?';\n\nconst TYPE_VS_OPERATORS = {\n    'text': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=', isNegated: true},\n        {id: 'contains', label: 'contains', isNegated: false},\n        {id: 'contains', label: 'not contains', isNegated: true},\n        {id: 'in', label: 'in', isNegated: false},\n        {id: 'in', label: 'not in', isNegated: true},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'date': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=' , isNegated: true},\n        {id: 'gt', label: '>', isNegated: false},\n        {id: 'lt', label: '<', isNegated: false},\n        {id: 'gte', label: '>=', isNegated: false},\n        {id: 'lte', label: '<=', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'number': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=', isNegated: true},\n        {id: 'gt', label: '>', isNegated: false},\n        {id: 'lt', label: '<', isNegated: false},\n        {id: 'gte', label: '>=', isNegated: false},\n        {id: 'lte', label: '<=', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'long': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=', isNegated: true},\n        {id: 'gt', label: '>', isNegated: false},\n        {id: 'lt', label: '<', isNegated: false},\n        {id: 'gte', label: '>=', isNegated: false},\n        {id: 'lte', label: '<=', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'boolean': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false}\n    ]\n};\n\n\nexport class GRAXFilterableCombobox extends React.Component {\n    constructor(props) {\n\t\tsuper(props);\n\n        this._isMounted = false;\n\n\t\tthis.state = {\n\t\t\tinputValue: '',\n            selection: [],\n            isOpened: false\n\t\t};\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        if(this.props.selection) {\n            console.log(this.props.selection);\n\n            this.setState({\n                selection: this.props.selection\n            });\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    filterOptionsHandler() {\n        var options = this.props.options || [];\n\n        if(this.props.filterOptionsHandler && this.state.isOpened) {\n            options = this.props.filterOptionsHandler(options);\n        }\n\n        return comboboxFilterAndLimit({\n            inputValue: this.state.inputValue,\n            limit: 1000,\n            options: options,\n            selection: this.state.selection\n        })\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <Combobox\n                    classNameMenu={'scrollable-GRAXFilterableCombobox'}\n                    events={{\n                        onChange: (event, { value }) => {\n                            this.setState({\n                                inputValue: value\n                            });\n\n                            if (this.props.onChange) {\n                                this.props.onChange(event, value);\n                            }\n                        },\n                        onRequestRemoveSelectedOption: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n                            }\n\n                            if (this.props.onRequestRemoveSelectedOption) {\n                                this.props.onRequestRemoveSelectedOption(event, data.selection);\n                            }\n                        },\n                        onSelect: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n                            }\n\n                            if (this.props.onSelect) {\n                                this.props.onSelect(event, data.selection);\n                            }\n                        },\n                        onOpen: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    isOpened: true\n                                });\n                            }\n                        },\n                        onClose: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    isOpened: false\n                                });\n                            }\n                        }\n                    }}\n                    labels={{\n                        placeholder: this.props.placeholder,\n                    }}\n                    options={this.filterOptionsHandler()}\n                    selection={this.state.selection}\n                    value={this.state.inputValue}\n                    variant={this.props.variant || 'inline-listbox'}\n                    required={true}\n                    multiple={false}\n                />\n            </React.Fragment>\n        );\n    }\n}\n\n\nexport default class GRAXFilterGeneration extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            _filterValues: null,\n            _error: null,\n            _filterValuesFields: []\n        };\n    }\n\n    isLoaded() {\n        return this.state._error || (this.props.filterableFieldOptions != null);\n    }\n\n    getFilterValueStruct() {\n        return {\n            id: null,\n            value: null,\n            operator: 'eq',\n            isNegated: false,\n            isActive: true,\n            selectedField: null\n        };\n    }\n\n    getFilterValuesList(_filterValues) {\n        return _.map(_filterValues, (filterValue, fieldName) => {\n            var filterValueStruct = this.getFilterValueStruct();\n\n            filterValueStruct.id = fieldName;\n            filterValueStruct.value = filterValue.value;\n            filterValueStruct.operator = filterValue.operator;\n            filterValueStruct.isNegated = filterValue.isNegated;\n            filterValueStruct.isActive = filterValue.isActive;\n            filterValueStruct.selectedField = _.filter(this.props.filterableFieldOptions, (option, i) => {\n                return option && option.id === fieldName;\n            })[0] || null;\n\n            return filterValueStruct;\n        });\n    }\n\n    componentDidMount() {\n        var _filterValues = this.props.filterValues || {};\n        var _filterValuesFields = Object.keys(_filterValues);\n\n        this.setState({\n            _filterValues: _filterValues,\n            _filterValuesFields: _filterValuesFields,\n            _filterValuesList: this.getFilterValuesList(_filterValues)\n        });\n\n        this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this), _filterValuesFields, this.getFilterQuery.bind(this), this.state._filterValues);\n    }\n\n\n    onFilterValueChangeHandler(filterValue, selection) {\n        var _filterValues = this.state._filterValues;\n\n        if(selection && selection.length > 0) {\n            var selectedField = selection[0] || null;\n\n            filterValue.id = selectedField.id;\n            filterValue.selectedField = selectedField;\n\n            _filterValues[filterValue.id] = {\n                value: filterValue.value,\n                isActive: filterValue.isActive,\n                operator: filterValue.operator,\n                isNegated: filterValue.isNegated,\n                selectedField: selectedField\n            };\n        } else {\n            delete _filterValues[filterValue.id];\n            filterValue.id = null;\n            filterValue.selectedField = null;\n        }\n\n        var _filterValuesFields = Object.keys(_filterValues);\n\n        this.setState({\n            _filterValues: _filterValues,\n            _filterValuesFields: _filterValuesFields,\n            _filterValuesList: this.state._filterValuesList\n        });\n\n        if(this.props.onFilterValueChangeHandler) {\n            this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this), _filterValuesFields, this.getFilterQuery.bind(this), this.state._filterValues);\n        }\n    }\n\n    addAnotherFieldHandler() {\n        var _filterValuesList = this.state._filterValuesList;\n\n        if(_filterValuesList.length === 0 || _filterValuesList[_filterValuesList.length - 1].id != null) {\n            _filterValuesList.push(this.getFilterValueStruct());\n\n            this.setState({\n                _filterValuesList: _filterValuesList\n            });\n        }\n    }\n\n    removeFieldHandler(i) {\n        var _filterValues = this.state._filterValues;\n        var _filterValuesList = this.state._filterValuesList;\n\n        delete _filterValues[_filterValuesList[i].id];\n        _filterValuesList.splice(i, 1);\n\n        this.setState({\n            _filterValues: _filterValues,\n            _filterValuesFields: Object.keys(_filterValues),\n            _filterValuesList: _filterValuesList\n        });\n    }\n\n    getFilterFunction(dataList) {\n        return _.filter(dataList, (item, i) => {\n            var isReturned = true;\n\n            _.forEach(this.state._filterValues, (filterValue, fieldName) => {\n                if(!filterValue.isActive) return;\n\n                var filterOperator = filterValue.operator;\n                var filterVal = filterValue.value;\n\n                if(filterOperator !== 'in' && Array.isArray(filterVal)) {\n                    filterVal = filterVal.length > 0 ? filterVal[0] : null;\n                } else if(filterOperator === 'in' && !Array.isArray(filterVal)) {\n                    filterVal = filterVal.split(' OR ');\n                }\n\n                var filterIsNegated = filterValue.isNegated;\n                var isFilterMatch = false;\n                var itemVal = item[fieldName];\n\n                if(filterOperator === 'eq' && filterVal !== '' && !Boolean(filterVal)) {\n                    filterOperator = 'exists';\n                    filterIsNegated = false;\n                }\n\n                if(Array.isArray(filterVal) && filterOperator !== 'in') {\n                    filterVal = filterVal.length > 0 ? filterVal[0] : null;\n                }\n\n                if(filterValue.selectedField.type === 'date') {\n                    itemVal = moment(itemVal);\n\n                    if(itemVal) {\n                        itemVal = itemVal.format('YYYY-MM-DD');\n                    }\n\n                    filterVal = moment(filterVal);\n\n                    if(filterVal) {\n                        filterVal = filterVal.format('YYYY-MM-DD');\n                    }\n                }\n\n                if(filterValue.selectedField.type === 'boolean' && !Boolean(filterVal)) {\n                    filterVal = true;\n                    filterIsNegated = true;\n                }\n\n                if(filterOperator === 'exists') {\n                    isFilterMatch = Boolean(itemVal) === Boolean(filterVal);\n                } else if(filterOperator === 'contains') {\n                    isFilterMatch = String(itemVal).toLowerCase().includes(filterVal.toLowerCase());\n                } else if(filterOperator === 'in') {\n                    isFilterMatch = filterVal && filterVal.length > 0 && _.includes(filterVal, ...(typeof(itemVal) === 'string' ? [itemVal] : itemVal));\n                } else {\n                    isFilterMatch = _[filterOperator](itemVal, filterVal);\n                }\n\n                isReturned &= filterIsNegated ? !isFilterMatch : isFilterMatch;\n            });\n\n            return isReturned;\n        }) || [];\n    }\n\n    getFilterQuery() {\n        // Contains: doc.field:value, doc.field:*value*\n        // Equal: doc.field:\"value\" (Contains exact on text type)\n        // NotNull: _exists_:doc.field\n\n        // Gt: doc.field:[value TO *]; doc.field:>value\n        // Lt: doc.field:[* TO value]; doc.field:<value\n        // Gte: doc.field:>=value\n        // Lte: doc.field:<=value\n\n        // Boolean: +doc.field; -doc.field\n        // Negation: NOT (...)\n        // IN: (doc.field: 'a' OR doc.field: 'b' OR ...)\n        // Exists: __exists__:doc.field\n\n        var operatorByName = {\n            'gt': '>',\n            'gte': '>=',\n            'lt': '<',\n            'lte': '<='\n        };\n\n        var queryConditions = [];\n\n        _.forEach(this.state._filterValues, (filterValue, fieldName) => {\n            var filterOperator = filterValue.operator;\n\n            if(!filterValue.isActive || filterOperator.startsWith('_')) return;\n\n            var filterVal = filterValue.value;\n\n            if(filterOperator !== 'in' && Array.isArray(filterVal)) {\n                filterVal = filterVal.length > 0 ? sanitizeElasticFilterValue(filterVal[0]) : null;\n            } else if(filterOperator === 'in' && !Array.isArray(filterVal)) {\n                filterVal = _.map(filterVal.split(' OR '), (_filterVal) => {\n                    return sanitizeElasticFilterValue(_filterVal);\n                });\n            }\n\n            var filterIsNegated = filterValue.isNegated;\n\n            if(filterOperator === 'eq' && filterIsNegated && !Boolean(filterVal)) {\n                filterOperator = 'exists';\n                filterVal = filterIsNegated;\n            }\n\n            if(filterOperator === 'exists') {\n                filterIsNegated = !Boolean(filterVal);\n            }\n\n            var condition = '(';\n\n            if(filterIsNegated) {\n                condition += 'NOT ';\n            }\n\n            condition += '(';\n\n            if(filterValue.selectedField.type === 'boolean' && !Boolean(filterVal)) {\n                condition += 'NOT ';\n            }\n\n            if(filterOperator === 'in') {\n                var inConditions = [];\n\n                _.each(filterVal, (item, i) => {\n                    inConditions.push('\"' + item + '\"');\n                });\n\n                condition += 'doc.' + fieldName + ':(' + inConditions.join(' OR ') + ')';\n            } else if(filterOperator === 'exists') {\n                condition += '_exists_:doc.' + fieldName;\n            } else {\n                condition += 'doc.' + fieldName + ':';\n\n                if(filterOperator === 'eq') {\n                    if(filterValue.selectedField.type === 'boolean') {\n                        condition += 'true';\n                    } else if(filterValue.selectedField.type === 'number') {\n                        condition += filterVal ? parseFloat(filterVal) : '';\n                    } else if(filterValue.selectedField.type === 'date') {\n                        condition += filterVal ? moment(filterVal).format('YYYY-MM-DD') : '';\n                    } else {\n                        condition += '\"' + filterVal + '\"';\n                    }\n                } else if(filterOperator === 'contains') {\n                    var _filterVal = filterVal ? String(filterVal) : '';\n\n                    condition += '(';\n                    condition += '\"' + sanitizeElasticFilterValue(filterVal) + '\"';\n                    condition += ' OR ';\n                    condition += sanitizeElasticFilterValue(_filterVal.toLowerCase());\n                    condition += ' OR ';\n                    condition += '*' + sanitizeElasticFilterValue(_filterVal.toLowerCase()) + '*';\n                    condition += ')';\n                } else if(filterValue.selectedField.type === 'date') {\n                    condition += operatorByName[filterOperator] + (filterVal ? moment(filterVal).format('YYYY-MM-DD') : '');\n                } else {\n                    condition += operatorByName[filterOperator] + (filterVal ? sanitizeElasticFilterValue(filterVal) : '');\n                }\n\n            }\n\n            condition += '))';\n\n            queryConditions.push(condition);\n        });\n\n        return queryConditions.length > 0 ? queryConditions.join(' AND ') : null;\n    }\n\n    getSelectionValues(selection) {\n        return selection ? _.reduce(selection, function(selectionIds, item) {\n            selectionIds.push(item.id);\n\n            return selectionIds;\n        }, []) : null;\n    }\n\n    render() {\n        if (this.state._error) {\n            return <div>Error: {this.state._error}</div>;\n        } else if (!this.isLoaded()) {\n            return (\n                <div style={{ position: 'relative', height: '5rem' }}>\n                    <Spinner size=\"small\" variant=\"base\" />\n                </div>\n            );\n        } else {\n            return (\n                <React.Fragment>\n                    {/*<div className=\"slds-scrollable_y\" style={{maxHeight: '50vw'}}>*/}\n                        <table className=\"slds-table slds-table_cell-buffer slds-table_bordered slds-no-row-hover\">\n                            <thead>\n                                <tr className=\"slds-line-height_reset\">\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={FIELD}>{FIELD}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={OPERATOR}>{OPERATOR}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={FILTER_VALUE}>{FILTER_VALUE}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={IS_ACTIVE}>{IS_ACTIVE}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\"></div>\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {/* Iterate over fields */}\n                                {_.map(this.state._filterValuesList, function(filterValue, i) {\n                                    var fieldName = filterValue.id;\n\n                                    var selectedField = filterValue.selectedField || {};\n\n                                    return (\n                                        <tr className=\"slds-hint-parent\" key={'fieldName: ' + (fieldName || '')}>\n                                            <td data-label={FIELD} style={{width: '30vw'}}>\n                                                {fieldName ||\n                                                <GRAXFilterableCombobox\n                                                    placeholder=\"Select Field to filter\"\n                                                    options={this.props.filterableFieldOptions || []}\n                                                    filterOptionsHandler={(options) => {\n                                                        return _.filter(options, (option, i) => {\n                                                            return option && this.state._filterValuesFields.indexOf(option.id) === -1;\n                                                        }) || [];\n                                                    }}\n                                                    selection={_.find(this.props.filterableFieldOptions, (option) => {\n                                                        return option && option.id === fieldName;\n                                                    }) || []}\n                                                    onSelect={(event, selection) => this.onFilterValueChangeHandler(filterValue, selection)}\n                                                    onRequestRemoveSelectedOption={(event, selection) => this.onFilterValueChangeHandler(filterValue, selection)}\n                                                />}\n                                            </td>\n                                            <td data-label={OPERATOR} style={{width: '20vw'}}>\n                                                {selectedField && (\n                                                    (\n                                                        selectedField.type === 'boolean' && TYPE_VS_OPERATORS[selectedField.type].label\n                                                    ) || (\n                                                        <GRAXFilterableCombobox\n                                                            placeholder=\"Select Operator to Compare\"\n                                                            options={TYPE_VS_OPERATORS[selectedField.type] || []}\n                                                            selection={[]}\n                                                            variant=\"readonly\"\n                                                            onSelect={(event, selection) => {\n                                                                selection[0].type = selection[0].type || filterValue.selectedField.type;\n\n                                                                filterValue.operator = selection[0].id;\n                                                                filterValue.isNegated = selection[0].isNegated;\n\n                                                                if(filterValue.type !== selection[0].type) {\n                                                                    filterValue.value = null;\n\n                                                                    if(selection[0].type === 'boolean') {\n                                                                        filterValue.value = false;\n                                                                    }\n\n                                                                    if(selection[0].type === 'text') {\n                                                                        filterValue.value = '';\n                                                                    }\n\n                                                                    filterValue.type = selection[0].type;\n                                                                }\n\n                                                                this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField])\n                                                            }}\n                                                        />\n                                                    )\n                                                )}\n                                            </td>\n                                            <td data-label={FILTER_VALUE} style={{width: '30vw'}}>\n                                                {selectedField && (\n                                                    (\n                                                        (selectedField.type === 'boolean' || filterValue.operator === 'exists') && (\n                                                            <Checkbox\n                                                                defaultChecked={filterValue.value}\n                                                                onChange={(e) => {\n                                                                    filterValue.value = e.target.checked;\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                            />\n                                                        )\n                                                    ) || (\n                                                        (selectedField.type === 'text' || selectedField.type === 'number' || selectedField.type === 'long') && (\n                                                            <GRAXSFieldCombobox\n                                                                SObjectName={this.props.SObjectType}\n                                                                fieldName={selectedField.id}\n                                                                onSelect={(event, selection) => {\n                                                                    filterValue.value = this.getSelectionValues(selection);\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                                onRequestRemoveSelectedOption={(event, selection) => {\n                                                                    filterValue.value = this.getSelectionValues(selection);\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                                elseComponent={\n                                                                    <Input\n                                                                        defaultValue={filterValue.value}\n                                                                        assistiveText={{ label: selectedField.label }}\n                                                                        id={selectedField.id}\n                                                                        onBlur={(event) => {\n                                                                            filterValue.value = event.target.value;\n\n                                                                            this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                        }}\n                                                                    />\n                                                                }\n                                                                onRender={(isPicklist) => {}}\n                                                                multiple={filterValue.operator === 'in'}\n                                                                variant={filterValue.operator === 'in' ? 'base' : 'inline-listbox'}\n                                                            />\n                                                        )\n                                                    ) || (\n                                                        selectedField.type === 'date' && (\n                                                            <Datepicker\n                                                                value={filterValue.value}\n                                                                onChange={(event, data) => {\n                                                                    filterValue.value = data.date;\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                                className=\"inline-table\"\n                                                                menuPosition=\"relative\"\n                                                                hasStaticAlignment={true}\n                                                            />\n                                                        )\n                                                    )\n                                                )}\n                                            </td>\n                                            <td data-label={IS_ACTIVE} style={{width: '10vw'}}>\n                                                <Checkbox\n                                                    defaultChecked={filterValue.isActive}\n                                                    onChange={(e) => {\n                                                        filterValue.isActive = e.target.checked;\n\n                                                        this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                    }}\n                                                />\n                                            </td>\n                                            <td data-label={'Actions'} style={{width: '10vw'}}>\n                                                <Button label=\"Remove Filter\" variant=\"base\" onClick={() => {\n                                                    this.removeFieldHandler(i);\n                                                }}/>\n                                            </td>\n                                        </tr>\n                                    );\n                                }.bind(this))}\n                            </tbody>\n                        </table>\n                    {/*</div>*/}\n\n                    <div className=\"slds-p-top_medium\">\n                        <Button label=\"Add Filter\" variant=\"brand\" onClick={() => {\n                            this.addAnotherFieldHandler();\n                        }} disabled={this.props.filterableFieldOptions == null || this.props.filterableFieldOptions.length === 0 || this.props.filterableFieldOptions.length === this.state._filterValuesFields.length} />\n                    </div>\n                </React.Fragment>\n            );\n        }\n    }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {ButtonGroup, Button, Tooltip} from '@salesforce/design-system-react';\n \nconst propTypes = {\n    totalItems: PropTypes.number.isRequired,\n    onChangePage: PropTypes.func.isRequired,\n    currentPage: PropTypes.number,\n    pageSize: PropTypes.number,\n}\n \nconst defaultProps = {\n    currentPage: 1,\n    pageSize: 10\n}\n \nclass SLDSPaginator extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            pager: {}\n        };\n    }\n \n    componentWillMount() {\n        // set page if items array isn't empty\n        if (this.props.totalItems) {\n            this.setPage(this.props.currentPage, true);\n        }\n    }\n \n    setPage(page, isInitialLoad) {\n        var { totalItems, pageSize } = this.props;\n        var pager = this.state.pager;\n \n        if (page < 1 || page > pager.totalPages) {\n            return;\n        }\n \n        // get new pager object for specified page\n        pager = this.getPager(totalItems, page, pageSize);\n \n        // update state\n        this.setState({ pager: pager });\n \n        // call change page function in parent component\n        this.props.onChangePage(page, false || isInitialLoad);\n    }\n \n    getPager(totalItems, currentPage, pageSize) {\n        // default to first page\n        currentPage = currentPage || 1;\n \n        // default page size is 10\n        pageSize = pageSize || 10;\n\n        var isNarrow = false;\n\n        if(totalItems > 10000) {\n            totalItems = 10000;\n            isNarrow = true;\n        }\n \n        // calculate total pages\n        var totalPages = Math.ceil(totalItems / pageSize);\n \n        var startPage, endPage;\n        if (totalPages <= 10) {\n            // less than 10 total pages so show all\n            startPage = 1;\n            endPage = totalPages;\n        } else {\n            // more than 10 total pages so calculate start and end pages\n            if (currentPage <= 6) {\n                startPage = 1;\n                endPage = 10;\n            } else if (isNarrow && (currentPage + 3) >= totalPages) {\n                startPage = totalPages - 8;\n                endPage = totalPages;\n            } else if ((currentPage + 4) >= totalPages) {\n                startPage = totalPages - 9;\n                endPage = totalPages;\n            } else {\n                startPage = currentPage - 5;\n                endPage = currentPage + 4;\n            }\n        }\n \n        // calculate start and end item indexes\n        var startIndex = (currentPage - 1) * pageSize;\n        var endIndex = Math.min(startIndex + pageSize - 1, totalItems - 1);\n \n        // create an array of pages to ng-repeat in the pager control\n        var pages = [...Array((endPage + 1) - startPage).keys()].map(i => startPage + i);\n \n        // return object with all pager properties required by the view\n        return {\n            totalItems: totalItems,\n            currentPage: currentPage,\n            pageSize: pageSize,\n            totalPages: totalPages,\n            startPage: startPage,\n            endPage: endPage,\n            startIndex: startIndex,\n            endIndex: endIndex,\n            pages: pages,\n            isNarrow: isNarrow\n        };\n    }\n \n    render() {\n        var pager = this.state.pager;\n \n        if (!pager.pages || pager.pages.length <= 1) {\n            // don't display pager if there is only 1 page\n            return null;\n        }\n \n        return (\n            <ButtonGroup>\n                <Button iconCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"left\"\n\t\t\t\t\t\ticonPosition=\"left\" label=\"First\" variant=\"neutral\" onClick={() => this.setPage(1)} disabled={pager.currentPage === 1} />\n                <Button iconCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"chevronleft\"\n\t\t\t\t\t\ticonPosition=\"left\" variant=\"neutral\" onClick={() => this.setPage(pager.currentPage - 1)} disabled={pager.currentPage === 1} />\n                {pager.pages.map((page, index) => {\n                    return (\n                        <Button key={'SLDSPaginator' + Date.now() + index} label={page} variant={pager.currentPage === page ? 'brand' : 'neutral'} onClick={() => this.setPage(page)} />\n                    )\n                })}\n                {pager.isNarrow && pager.currentPage >= (pager.totalPages - 3) && (\n                    <Tooltip\n                        align=\"top right\"\n                        content=\"The list is too long, try adding more filters to optimize the results.\"\n                    >\n                        <Button label=\"&middot;&middot;&middot;\" variant=\"neutral\" />\n                    </Tooltip>\n                )}\n                <Button iconCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"chevronright\"\n\t\t\t\t\t\ticonPosition=\"right\" variant=\"neutral\" onClick={() => this.setPage(pager.currentPage + 1)} disabled={pager.currentPage === pager.totalPages} />\n                <Button iconCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"right\"\n\t\t\t\t\t\ticonPosition=\"right\" label=\"Last\" variant=\"neutral\" onClick={() => this.setPage(pager.totalPages)} disabled={pager.currentPage === pager.totalPages} />\n            </ButtonGroup>\n        );\n    }\n}\n \nSLDSPaginator.propTypes = propTypes;\nSLDSPaginator.defaultProps = defaultProps;\nexport default SLDSPaginator;","/* eslint-disable no-useless-constructor */\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\n\nimport _ from \"lodash\";\n\nimport { baseUrl, GetParams, token, orgid } from \"../lib/grax-data-lake\";\n\nconst portalsRoot = document.getElementById(\"portals\");\n\nclass GRAXCSVExportForm extends React.Component {\n  constructor(props) {\n    super(props);\n  }\n\n  render() {\n    return ReactDOM.createPortal(\n      <form\n        id={this.props.formId}\n        action={\n          baseUrl +\n          \"/grax-app/grax-data-lake/export/\" +\n          this.props.params.source +\n          \"/csv\" +\n          GetParams({\n            action: \"export\",\n            token,\n            orgid\n          })\n        }\n        target=\"_blank\"\n        method=\"POST\"\n        encType=\"application/x-www-form-urlencoded\"\n        style={{\n          margin: 0,\n          padding: 0,\n          border: 0,\n          display: \"inline-block\"\n        }}\n      >\n        {_.map(this.props.params, function(val, key) {\n          return (\n            <input type=\"hidden\" key={String(Date.now()) + key} name={key} value={val || \"\"} />\n          );\n        })}\n      </form>,\n      portalsRoot\n    );\n  }\n}\n\nexport default class GRAXCSVExportButton extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      formId: \"csvExport\" + Date.now()\n    };\n  }\n\n  render() {\n    return (\n      <React.Fragment>\n        <GRAXCSVExportForm formId={this.state.formId} params={this.props.params} />\n        <button className=\"slds-button slds-button_neutral\" type=\"submit\" form={this.state.formId}>\n          Export to CSV\n        </button>\n      </React.Fragment>\n    );\n  }\n}\n","import jQuery from 'jquery'\n\n(function($) {\n\tvar svgns = 'http://www.w3.org/2000/svg';\n\tvar xlinkns = 'http://www.w3.org/1999/xlink';\n\n    $.fn.sldsTree = function(options) {\n    \tvar $this = this;\n\n    \tvar settings = $.extend(true, {\n        \tdata: [],\n        \titems: {\n        \t\tid: 'id',\n        \t\tlabel: 'label',\n        \t\tchilds: 'childs',\n        \t},\n        \tattrs: {\n\t\t\t\troot: {'class': 'slds-tree_container'},\n\t\t\t\tul: {'class': 'slds-tree'},\n\t\t\t\tli: {\n\t\t\t\t\t'role': 'treeitem',\n\t\t\t\t\t'aria-level': '1',\n\t\t\t\t\t'aria-expanded': 'false'\n\t\t\t\t},\n\t\t\t\tdiv: {'class': 'slds-tree__item'},\n\t\t\t\tbutton: {\n\t\t\t\t\t'class': 'slds-button slds-button_icon slds-m-right_x-small',\n\t\t\t\t\t'aria-hidden': 'true',\n\t\t\t\t\t'tabindex': '-1'\n\t\t\t\t}\n\t\t\t},\n\t\t\texpandButton: {\n\t\t\t\t'disabled': 'slds-is-disabled'\n\t\t\t},\n\t\t\texpandIcon: {\n\t\t\t\t'class': 'slds-button__icon slds-button__icon_small',\n\t\t\t\t'path': './assets/icons/utility-sprite/svg/symbols.svg#chevronright'\n\t\t\t},\n        \tonUl: function($ul, items, settings) {},\n        \tonLi: function($li, item, settings) {},\n        \tonDiv: function($div, item, settings) {\n        \t\t$div.append(item[settings.items.label]);\n        \t},\n        \tonButton: function($button, item, settings) {},\n            onFinish: function($root, items, settings) {}\n        }, options);\n\n        var getTreeItemButton = function(item, disabled, $li) {\n        \tvar $button = $('<button>').attr(settings.attrs.button).toggleClass(settings.expandButton.disabled, disabled);\n\n        \tvar icon = document.createElementNS(svgns, 'svg');\n        \ticon.setAttribute('class', settings.expandIcon.class);\n        \ticon.setAttribute('aria-hidden', 'true');\n\n        \tvar icon_use = document.createElementNS(svgns, 'use');\n        \ticon_use.setAttributeNS(xlinkns, 'xlink:href', settings.expandIcon.path);\n        \t\n        \ticon.appendChild(icon_use);\n\n    \t\t$button.append(icon);\n\n        \t$button.on('click', function(e) {\n        \t\t$li.attr('aria-expanded', function(i, attr) {\n\t\t            return !(attr === 'true');\n\t\t        });\n\n\t\t        e.preventDefault();\n        \t});\n\n        \tsettings.onButton($button, item, settings);\n\n        \treturn $button;\n        }\n\n        var getTreeItemContent = function(item, level, $ul, $li) {\n        \tvar $div = $('<div>').attr(settings.attrs.div);\n\n\t\t\t$div.append(getTreeItemButton(item, !item[settings.items.childs] || item[settings.items.childs].length < 1, $li));\n\n        \tsettings.onDiv($div, item, settings);\n\n        \treturn $div;\n        }\n\n        var getTreeItem = function(item, level, $ul) {\n        \tvar $li = $('<li>').attr(settings.attrs.li);\n\n        \t$li.attr({'aria-level': level}).append(getTreeItemContent(item, level, $ul, $li));\n        \tif(item[settings.items.childs]) {\n        \t\t$li.append(getTree(item[settings.items.childs], level+1));\n        \t}\n\n        \tsettings.onLi($li, item, settings);\n\n        \treturn $li;\n        };\n\n        var getTree = function(items, level) {\n        \tvar $ul = $('<ul>').attr(settings.attrs.ul);\n\n        \tif(level > 1) $ul.attr({'role': 'group'});\n\n\t        $.each(items, function(i, item) {\n\t        \t$ul.append(getTreeItem(item, level, $ul));\n\t        });\n\n\t        settings.onUl($ul, items, settings);\n\n\t        return $ul;\n        };\n\n        $this.attr(settings.attrs.root).html(getTree(settings.data, 1));\n\n        settings.onFinish($this, settings.data, settings);\n\n        return $this;\n    };\n \n}(jQuery));","/* eslint-disable jsx-a11y/anchor-is-valid */\nimport React from 'react';\n\nimport {Spinner, DataTable, DataTableColumn, DataTableCell, Modal} from '@salesforce/design-system-react';\nimport SLDSPaginator from './SLDSPaginator';\nimport GRAXCSVExportButton from './GRAXCSVExportButton';\n\nimport {$, baseUrl, GetParams} from '../lib/grax-data-lake';\nimport {moment, SF_DATETIME_REGEXP, DATETIME_FORMAT, DATE_FORMAT, TZ} from '../lib/utils';\n\nimport _ from 'lodash';\n\nconst ROWSXPAGE = 20;\n\n\nconst GRAXTimeMachineCell = ({ children, ...props }) => {\n\treturn (\n        <DataTableCell title={children}>\n            {children && (\n                <a onClick={(e) => {\n                    if(props.onClickHandler) {\n                        props.onClickHandler(children);\n                    }\n\n                    e.preventDefault();\n                }}>\n                    Load this version\n                </a>\n            )}\n        </DataTableCell>\n    );\n};\nGRAXTimeMachineCell.displayName = DataTableCell.displayName;\n\n\nexport default class GRAXAuditDataTable extends React.Component {\n\tconstructor(props) {\n        super(props);\n\n        this.state = {\n\t\t\tsortColumn: 'CreatedDate',\n\t\t\tsortDirection: 'desc',\n            items: [],\n            extraInfo: {},\n            page: 0,\n            isLoaded: false,\n            isLoading: false,\n            isTimeMachineModalOpen: false,\n            timeMachineRecord: null\n\t\t};\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return this.props.renderKey !== nextProps.renderKey || this.state.items !== nextState.items || this.state.isLoaded !== nextState.isLoaded || this.state.isLoading !== nextState.isLoading || this.state.sortColumn !== nextState.sortColumn || this.state.sortDirection !== nextState.sortDirection || this.state.isTimeMachineModalOpen !== nextState.isTimeMachineModalOpen;\n    }\n\n    getDataHandler(page, sortColumn, sortDirection) {\n        this.setState({\n            isLoading: true,\n            page: page,\n            sortColumn: sortColumn,\n            sortDirection: sortDirection\n        });\n\n        $.ajax({\n            type: 'GET',\n            //dataType: 'jsonp',\n            url: baseUrl + '/grax-app/grax-data-lake' + GetParams({\n                action:'load',\n                dataIndex: this.props.dataIndex,\n                _select: _.union(this.props.columns, this.props.hiddenColumns).join(',') || 'Id',\n                _q: this.props.filterQuery,\n                _limit: ROWSXPAGE,\n                _from: ROWSXPAGE * page,\n                _sort: sortColumn + ' ' + sortDirection,\n                _sortType: this.getSortFieldType(sortColumn)\n            }),\n            /*data: {\n                _select: this.props.columns.join(',')\n            },*/\n            success: function(data) {\n                var results = data.results;\n\n                if(this.props.filterFunction) {\n                    results = this.props.filterFunction(results);\n                }\n\n                results = _.map(results, (item, i) => {\n                    _.forEach(item, (val, key) => {\n                        if(typeof(val) == 'string') {\n                            if(SF_DATETIME_REGEXP.test(val)) {\n                                var m = moment(val);\n\n                                if(m.isValid()) {\n                                    item[key] = m.tz(TZ).format(m._i.indexOf(':') !== -1 ? DATETIME_FORMAT : DATE_FORMAT);\n                                }\n                            }\n                        }\n                    });\n\n                    return {\n                        ...item,\n                        ...{id: i.toString()}\n                    }\n                });\n\n                this.setState({\n                    page: 0,\n                    data: results,\n                    extraInfo: data.extraInfo || {total: 0, size: ROWSXPAGE, totalRetrieved: 0},\n                    items: results,\n                    isLoaded: true,\n                    isLoading: false\n                });\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(xhr, status, err);\n\n                this.setState({\n                    isLoaded: true,\n                    isLoading: false,\n                    items: [],\n                    error: err.toString()\n                });\n            }.bind(this)\n        });\n    }\n    \n    componentDidMount() {\n        this.getDataHandler(0, this.state.sortColumn, this.state.sortDirection);\n    }\n\n\thandleSort(sortColumn, ...rest) {        \n        if(sortColumn.property) {\n            this.getDataHandler(this.state.page, sortColumn.property, sortColumn.sortDirection);\n        }\n    }\n    \n    getSortFieldType(sortField) {\n        if(!this.props._graxFieldsSelection) return null;\n\n        return (this.props._graxFieldsSelection.find((item) => {\n            return item.id === sortField;\n        }) || {}).type;\n    }\n\n\trender() {\n\t\treturn this.state.isLoaded ? (\n\t\t\t<div>\n                {this.state.isTimeMachineModalOpen ? (\n                    <Modal\n                        assistiveText={{ dialogLabel: 'Time Machine Record' }}\n                        isOpen={this.state.isTimeMachineModalOpen}\n                        onRequestClose={() => {\n                            this.setState({\n                                isTimeMachineModalOpen: false,\n                                timeMachineRecord: null\n                            });\n                        }}\n                        align=\"top\"\n                        size=\"large\"\n                    >\n                        <section className=\"slds-p-around_medium\" style={{\n                            overflow: 'auto'\n                        }}>\n                            {JSON.stringify(this.state.timeMachineRecord)}\n                        </section>\n                    </Modal>\n                ) : null}\n\n                <div style={{position: 'relative'}}>\n                    {this.state.isLoading && <Spinner size=\"large\" variant=\"brand\" />}\n                    <DataTable\n                        assistiveText={{\n                            actionsHeader: 'actions',\n                            columnSort: 'sort this column',\n                            columnSortedAscending: 'asc',\n                            columnSortedDescending: 'desc',\n                            selectAllRows: 'all rows',\n                            selectRow: 'select this row',\n                        }}\n                        fixedLayout\n                        items={this.state.items}\n                        id=\"GRAXAuditDataTable\"\n                        onSort={this.handleSort.bind(this)}\n                    >\n\n                        {this.props.columns.map((columnName) => (\n                            <DataTableColumn\n                                key={'col' + columnName}\n                                id={columnName}\n                                isSorted={this.state.sortColumn === columnName}\n                                label={columnName.endsWith('.keyword') ? columnName.match(/(.+)\\.keyword/)[1] : columnName}\n                                property={columnName}\n                                sortable\n                                sortDirection={this.state.sortDirection}\n                                isSortable={this.props.sortableColumns == null || this.props.sortableColumns.indexOf(columnName) !== -1}\n                            >\n                                {(columnName === 'ObjectVersion') ? (\n                                    <GRAXTimeMachineCell onClickHandler={(timeMachineRecord) => {\n                                        console.log({\n                                            Key: timeMachineRecord.split(/(\\/grax\\/)/).slice(1).join('')\n                                        });\n\n                                        /*var params = {\n                                            \"orgid\" : \"00D1I000003nRMaUAM\",\n                                            \"objecttype\" : \"Account\",\n                                            \"objectid\" : \"0014600000VpLa3AAF\",\n                                            \"filename\" : \"Account-0014600000VpLa3AAF-2018-10-23T15-38-14.json\"\n                                        };*/\n                                        \n                                        if(timeMachineRecord) {\n                                            this.setState({\n                                                isTimeMachineModalOpen: true,\n                                                timeMachineRecord: timeMachineRecord\n                                            });\n                                        }\n                                    }} />\n                                ) : null}\n                            </DataTableColumn>\n                        ))}\n                    </DataTable>\n                </div>\n\n                <div className=\"-x-small-buttons--horizontal slds-p-top_small\">\n                    <SLDSPaginator totalItems={this.state.items.length > 0 ? this.state.extraInfo.total: 0} pageSize={ROWSXPAGE} onChangePage={(page, isInitialLoad) => {\n                        if(!isInitialLoad) {\n                            this.getDataHandler(page - 1, this.state.sortColumn, this.state.sortDirection);\n                        }\n                    }} />\n                </div>\n\n                <div className=\"-x-small-buttons--horizontal slds-p-top_medium\">\n                    <GRAXCSVExportButton params={{\n                        source: 'elastic',\n                        dataIndex: this.props.dataIndex,\n                        _select: _.union(this.props.columns, this.props.hiddenColumns).join(','),\n                        _q: this.props.filterQuery,\n                        _sort: this.state.sortColumn + ' ' + this.state.sortDirection,\n                        _sortType: this.getSortFieldType(this.state.sortColumn),\n                        columns: this.props.columns\n                    }} />\n                </div>\n\t\t\t</div>\n\t\t) : (\n            <div style={{ position: 'relative', height: '2rem' }}>\n                <Spinner size=\"medium\" variant=\"brand\" />\n            </div>\n        );\n\t}\n}","/* eslint-disable no-multi-str */\nimport React from 'react';\nimport '../public/js/jquery.sldsTree.js';\n\nimport {Spinner} from '@salesforce/design-system-react';\n\nimport {$, baseUrl, GetParams} from '../lib/grax-data-lake';\n\nimport {getCookie, setCookie} from '../lib/utils';\n\nimport _ from 'lodash';\n\n\nvar selectedDataIndex;\nvar cookieSubfix = 'Fields';\n\nvar renderFieldListSelector = function($fieldListSelector, $fieldlist, data, onLoadHandler, onChangeHandler) {\n    data.sort(function (a, b) {\n        if (a.label > b.label) {\n            return 1;\n        }\n\n        if (a.label < b.label) {\n            return -1;\n        }\n\n        return 0;\n    });\n\n    var domPrefix = Date.now() + selectedDataIndex + cookieSubfix;\n\n    $fieldListSelector.sldsTree({\n        data: data,\n        attrs: {\n            root: {'class': 'slds-scrollable_y', 'style': 'max-height: 25vw'}\n        },\n        onDiv: function($div, item, settings) {\n            $div.append('<div className=\"slds-size_1-of-1\">\\\n            <div className=\"slds-form-element\">\\\n                <div className=\"slds-form-element__control\">\\\n                    <span className=\"slds-checkbox\">\\\n                    <input name=\"field_' + domPrefix + item[settings.items.id] + '\" id=\"field_' + domPrefix + item[settings.items.id] + '\" type=\"checkbox\" ' + (item.isSelected ? 'checked' : '') + ' />\\\n                    <label className=\"slds-checkbox__label\" for=\"field_' + domPrefix + item[settings.items.id] + '\">\\\n                        <span className=\"slds-checkbox_faux\"></span>\\\n                        <span className=\"slds-form-element__label\">' + item[settings.items.label] + '</span>\\\n                    </label>\\\n                    </span>\\\n                </div>\\\n                </div>\\\n            </div>');\n        },\n        onFinish: function($root, items, settings) {\n            var fields = {};\n            var countChecked = 1;\n\n            var getSelectedFields = function() {\n                var selectedFields = [];\n\n                $.each(fields, function(field, selected) {\n                    if(selected) {\n                        selectedFields.push(field);\n                    }\n                });\n\n                return selectedFields;\n            };\n\n            var cookieSelected = getCookie(selectedDataIndex + cookieSubfix);\n\n            var updateValue = function(eventHandler) {\n                var selectedFieldList = getSelectedFields();\n                var selectedFields = selectedFieldList.join(',');\n\n                $fieldlist.val(selectedFields);\n                setCookie(selectedDataIndex + cookieSubfix, selectedFields);\n\n                if(eventHandler) {\n                    eventHandler(selectedFieldList);\n                }\n            };\n\n            $.each(items, function(i, item) {\n                var id = item[settings.items.id];\n\n                if(cookieSelected) {\n                    fields[id] = cookieSelected.split(',').indexOf(id) !== -1;\n                } else {\n                    fields[id] = item.isSelected;\n                }\n\n                $('#field_' + domPrefix + id).on('change', function(e) {\n                    if(e.target.checked && countChecked >= 9) {\n                        e.target.checked = false;\n                        e.preventDefault();\n\n                        return false;\n                    }\n\n                    fields[id] = e.target.checked;\n\n                    if(e.target.checked) {\n                        countChecked++;\n                    } else {\n                        countChecked--;\n                    }\n\n                    updateValue(onChangeHandler);\n                }).prop('checked', fields[id]);\n\n                //updateValue();\n            });\n\n\n            updateValue(onLoadHandler);\n        }\n    });\n};\n\nexport default class GRAXTree extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this._isMounted = false;\n\n        this.state = {\n            items: [],\n            isLoaded: false\n        };\n    }\n\n    getMappedFieldSelection(selectedFieldList) {\n        return _.reduce(this.state.items, (_selection, fieldItem) => {\n            if (selectedFieldList.indexOf(fieldItem.id) !== -1) {\n                _selection.push(fieldItem);\n            }\n\n            return _selection;\n        }, []);\n    }\n\n    onLoadHandler(selectedFieldList) {\n        if(this.props.onLoad) {\n            this.props.onLoad(this.getMappedFieldSelection(selectedFieldList), selectedFieldList, this.state.items);\n        }\n    }\n\n    onChangeHandler(selectedFieldList) {\n        if(this.props.onChange) {\n            this.props.onChange(this.getMappedFieldSelection(selectedFieldList), selectedFieldList, this.state.items);\n        }\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        selectedDataIndex = this.props.dataIndex;\n\n        if(this.props.cookieSubfix) {\n            cookieSubfix += this.props.cookieSubfix;\n        }\n\n        if(this.props.selection) {\n            setCookie(selectedDataIndex + cookieSubfix, this.props.selection.join(','));\n        }\n\n        $.ajax({\n            type: 'GET',\n            //dataType: 'jsonp',\n            url: baseUrl + '/grax-app/grax-data-lake/getDataTypeFields/' + selectedDataIndex + GetParams({action:'load'}),\n            data: {},\n            success: function(data) {\n                if(this._isMounted) {\n                    this.setState({\n                        items: _.map(data, (val, key) => ({\n                            id: key,\n                            label: key,\n                            type: val,\n                            isSelected: (!getCookie(selectedDataIndex + cookieSubfix) && key === 'Id')\n                        })),\n                        isLoaded: true\n                    });\n                }\n\n                this.$el = $(this.el);\n                this.$fieldlist = $(this.fieldList);\n\n                renderFieldListSelector(this.$el, this.$fieldlist, this.state.items, this.onLoadHandler.bind(this), this.onChangeHandler.bind(this));\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(xhr, status, err);\n\n                if(this._isMounted) {\n                    this.setState({\n                        isLoaded: true,\n                        error: err.toString()\n                    });\n                }\n            }.bind(this)\n        });\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    shouldComponentUpdate(nextProps, nextState) {\n        return this.state.isLoaded !== nextState.isLoaded;\n    }\n\n    render() {\n        return (\n            <div style={{ position: 'relative', minHeight: '2rem' }}>\n                {!this.state.isLoaded ? <Spinner size=\"small\" variant=\"base\" /> : (\n                    <React.Fragment>\n                        <input type=\"hidden\" ref={fieldlist => this.fieldlist = fieldlist} />\n                        <div ref={el => this.el = el} />\n                    </React.Fragment>\n                )}\n            </div>\n        );\n    }\n}","import React from 'react';\nimport SLDSSection from './SLDSSection';\nimport GRAXAuditDataTable from './GRAXAuditDataTable';\nimport GRAXFilterGeneration from './GRAXFilterGeneration';\nimport GRAXTree from './GRAXTree';\n\nimport {Button} from '@salesforce/design-system-react';\n\nimport {$, baseUrl, GetParams} from '../lib/grax-data-lake';\n\nimport _ from 'lodash';\n\nconst ELASTIC_SORTABLE_TYPES = ['text', 'date', 'number'];\n\nexport default class GRAXAudit extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this._isMounted = false;\n\n        this.state = {\n            retrieved: false,\n            retrievedCounter: 0,\n            _graxFields: null,\n            _graxFieldsSelection: null,\n            _graxFieldsSelectionList: this.props.columns || ['Id'],\n            _filterFunction: ((dataList) => dataList),\n            _getFilterQuery: (() => {}),\n            _filterValuesFields: [],\n            _graxSortableFields: null\n        }\n    }\n\n    getFilterQuery(_getFilterQuery) {\n        return _getFilterQuery();\n    }\n\n    hasFieldSelected() {\n        return this.state._graxFields != null && this.state._graxFieldsSelectionList != null && this.state._graxFieldsSelectionList.length > 0;\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        $.ajax({\n            type: 'GET',\n            //dataType: 'jsonp',\n            url: baseUrl + '/grax-app/grax-data-lake/getDataTypeFields/graxgraxtimemachineindex' + GetParams({action:'load'}),\n            data: {},\n            success: function(data) {\n                if(this._isMounted) {\n                    this.setState({\n                        _graxFields: _.map(this.state._graxFieldsSelectionList, (val, i) => ({\n                            id: val,\n                            label: val,\n                            type: data[val]\n                        })),\n                        retrieved: true\n                    });\n                }\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(xhr, status, err);\n\n                if(this._isMounted) {\n                    this.setState({\n                        retrieved: true,\n                        error: err.toString()\n                    });\n                }\n            }.bind(this)\n        });\n    }\n    \n    render() {\n        return (\n            <div>\n                <div style={{display: 'none'}}>\n                    <GRAXTree\n                        dataIndex=\"graxgraxtimemachineindex\"\n                        onLoad={(_graxFieldsSelection, _graxFieldsSelectionList, _graxFields) => {\n                            console.log('onLoad', _graxFieldsSelection, _graxFieldsSelectionList, _graxFields);\n\n                            this.setState({\n                                _graxFieldsSelection: _graxFieldsSelection,\n                                _graxSortableFields: _.reduce(_graxFields, (sortableFields, elasticField, i) => {\n                                    if(ELASTIC_SORTABLE_TYPES.indexOf(elasticField.type) !== -1) {\n                                        sortableFields.push(elasticField.id);\n                                    }\n                    \n                                    return sortableFields;\n                                }, [])\n                            });\n                        }}\n                        selection={this.state._graxFieldsSelectionList}\n                    />\n                </div>\n\n                <SLDSSection title=\"Filter Time Machine Records\">\n                    {this.state._graxFieldsSelectionList != null && (\n                        <GRAXFilterGeneration\n                            filterableFieldOptions={this.state._graxFields}\n                            onFilterValueChangeHandler={(_filterFunction, _filterValuesFields, _getFilterQuery) => {\n                                this.setState({\n                                    retrievedCounter: this.state.retrievedCounter,\n                                    _filterFunction: _filterFunction,\n                                    _getFilterQuery: _getFilterQuery,\n                                    _graxFieldsSelection: this.state._graxFieldsSelection,\n                                    _graxFieldsSelectionList: this.state._graxFieldsSelectionList,\n                                    _filterValuesFields: _filterValuesFields\n                                });\n                            }}\n                        />\n                    )}\n                </SLDSSection>\n\n                <SLDSSection title=\"GRAX Time Machine Records\" className=\"slds-p-top_large\">\n                    <div className=\"-x-small-buttons--horizontal slds-p-bottom_large\">\n\t\t\t\t\t    <Button label=\"Retrieve\" variant=\"brand\" onClick={() => {\n                            this.setState({\n                                retrievedCounter: this.state.retrievedCounter + 1\n                            })\n                        }} />\n                    </div>\n\n                    <GRAXAuditDataTable\n                        key={'GRAXAuditDataTable_' + this.state.retrievedCounter}\n                        renderKey={'GRAXAuditDataTable_' + this.state.retrievedCounter}\n                        columns={this.state._graxFieldsSelectionList}\n                        _graxFieldsSelection={this.state._graxFieldsSelection}\n                        sortableColumns={this.state._graxSortableFields}\n                        hiddenColumns={this.state._filterValuesFields}\n                        dataIndex=\"graxgraxtimemachineindex\"\n                        filterFunction={this.state._filterFunction}\n                        filterQuery={this.getFilterQuery(this.state._getFilterQuery)}\n                    />\n                </SLDSSection>\n            </div>\n        );\n    }\n}"],"sourceRoot":""}