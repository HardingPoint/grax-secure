(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[17],{258:function(t,e,a){"use strict";a.r(e);var s=a(36),r=a(42),n=a(43),i=a(44),c=a(0),l=a.n(c),o=a(75),u=a(85),d=a(76),m=a(7),h=a(5),b=a(88),f=a(53),S=a(282),g=a(72),p=a(16),v=a(269),E=a(284),j=a(280),_=a(281),O=a.n(_),y=a(21),D=a(290),C=a(291),x=function(t){Object(n.a)(a,t);var e=Object(i.a)(a);function a(t){var r;Object(s.a)(this,a),(r=e.call(this,t)).chart=l.a.createRef(),r.summaryDataResults=[];var n=new Date,i=new Date;return n.setHours(0),n.setMinutes(0),i.setHours(23),i.setMinutes(59),r.state={isLoading:!0,fromDate:n,toDate:i,_currentOrgRecords:!0,objectInput:"",objectSelection:[],objectOptions:[],chartData:[],chartSelected:[]},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.loadSummaries=function(){this.setState({isLoading:!0});var t=this.state.fromDate;t=t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,0)+"-"+t.getDate().toString().padStart(2,0);var e=this.state.toDate;e=e.getFullYear()+"-"+(e.getMonth()+1).toString().padStart(2,0)+"-"+e.getDate().toString().padStart(2,0);var a={AND:[{GTE:{"summaryResults.startTime":t=Object(y.j)({date:t})[0]}},{LTE:{"summaryResults.startTime":e=Object(y.j)({date:e})[1]}}]};this.state._currentOrgRecords&&a.AND.push({KEQ:{graxorgid:j.d}}),O.a.ajax({type:"GET",url:j.c+"/grax-app/grax-data-lake"+Object(j.b)({action:"load",dataIndex:"graxgrax_backup_summaryindex",_index:"graxgrax_backup_summaryindex,graxgrax_summaryindex",_select:"summaryMap,spName,CreatedDate,summaryResults",_q:JSON.stringify(a),_limit:1e3,_from:0,_sort:"",_sortType:"",_ignore_unavailable:!0}),success:function(t){t.results&&(this.summaryDataResults=t.results),this.setState({isLoading:!1},(function(){this.loadSummaryData()}))}.bind(this),error:function(t,e,a){console.error(t,e,a),this.setState({isLoading:!1})}.bind(this)})},this.loadSummaryData=function(){var t=this.summaryDataResults,e=new Set,a=[];t.forEach((function(t){for(var a in t.summaryMap)Object(D.isObjectExcludedFromSummary)(a)||e.add(a)})),(a=Object(b.a)(Array,Object(f.a)(e))).sort((function(t,e){return t<e?-1:t>e?1:0}));var s=[{label:"All",id:"ALL"}];a.forEach((function(t){s.push({label:t,id:t})})),this.setState({isLoading:!1,objectOptions:s,objectSelection:[s[0]]},this.refreshChart)},this.refreshChart=function(){var t=this.summaryDataResults,e=[],a=[];this.state.objectSelection&&"ALL"!==this.state.objectSelection[0].id?e.push(this.state.objectSelection[0].id):this.state.objectOptions.forEach((function(t){e.push(t.id)})),t.forEach((function(t){e.forEach((function(e){if(!Object(D.isObjectExcludedFromSummary)(e)&&t.summaryMap[e]){var s={summaryMap:Object(m.a)({},e,Object(h.a)({},t.summaryMap[e])),spName:t.spName,summaryResults:Object(h.a)({},t.summaryMap[e])};a.push(s)}}))})),this.setState({isLoading:!1,chartData:a},function(){this.chart.current.drawChart()}.bind(this))},this.chartSelection=function(t){this.setState({chartSelected:t})},this.formatStartTime=function(t){return t.getFullYear()+"-"+(t.getMonth()+1).toString().padStart(2,"0")+"-"+t.getDate().toString().padStart(2,"0")+" "+t.getHours().toString().padStart(2,"0")+":"+t.getMinutes().toString().padStart(2,"0")+":"+t.getSeconds().toString().padStart(2,"0")},this.formatDate=function(t){return t.getMonth()+1+"/"+t.getDate()+"/"+t.getFullYear()},this.setState({isLoading:!1})}},{key:"render",value:function(){var t=this;return l.a.createElement("div",null,this.state.isLoading&&l.a.createElement(o.a,{size:"large",variant:"brand"}),l.a.createElement("div",{className:"slds-grid slds-wrap"},l.a.createElement("div",{className:"slds-col slds-size_1-of-1"},l.a.createElement(S.a,{title:"Filter Criteria"},l.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1"},l.a.createElement("dl",{className:"slds-list_stacked"},l.a.createElement("dt",{className:"slds-item_label slds-text-color_weak slds-truncate",title:"From"},l.a.createElement("label",{className:"slds-form-element__label"},"From")),l.a.createElement("dd",{className:"slds-item_detail"},l.a.createElement(E.a,{onChange:function(e,a){t.setState({fromDate:a.date})},value:this.state.fromDate})),l.a.createElement("dt",{className:"slds-item_label slds-text-color_weak slds-truncate",title:"To"},l.a.createElement("label",{className:"slds-form-element__label"},"To")),l.a.createElement("dd",{className:"slds-item_detail"},l.a.createElement(E.a,{onChange:function(e,a){t.setState({toDate:a.date})},value:this.state.toDate})))),l.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_2-of-4 slds-large-size_1-of-4 slds-m-top_small"},l.a.createElement(g.a,{className:"inline-block",defaultChecked:!this.state._currentOrgRecords,onChange:function(e){t.setState({_currentOrgRecords:!e.target.checked})},assistiveText:{label:"Show records from all environments?"},variant:"toggle",labels:{toggleDisabled:"Current Environment",toggleEnabled:"All connected SF environments"}}),l.a.createElement("div",{className:"slds-float_right"},l.a.createElement(p.a,{label:"Retrieve",variant:"brand",onClick:function(){t.loadSummaries(),t.chart.current.setDateFilter(t.state.fromDate,t.state.toDate),t.setState({chartSelected:t.chart.current.state.chartSelection})}}))))),this.state.objectOptions&&l.a.createElement("div",{className:"slds-col slds-size_1-of-1"},l.a.createElement(S.a,{title:"Chart Options",isCollapsible:"true"},l.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_1-of-1 slds-large-size_1-of-1"},l.a.createElement(v.a,{events:{onChange:function(e,a){var s=a.value;t.setState({objectInput:s},t.refreshChart)},onRequestRemoveSelectedOption:function(e,a){t.setState({objectInput:"",objectSelection:a.selection})},onSelect:function(e,a){t.setState({objectInput:"",objectSelection:a.selection},t.refreshChart)}},labels:{label:"Salesforce Object",placeholder:"-- SELECT SALESFORCE OBJECT --"},options:Object(y.f)({inputValue:this.state.objectInput,limit:1e3,options:this.state.objectOptions,selection:this.state.objectSelection}),selection:this.state.objectSelection,value:this.state.objectInput,variant:"readonly"})),this.chart.current&&l.a.createElement(v.a,{events:{onChange:function(e,a){var s=a.value;t.chart.current.chartInput=s,t.chart.current.setState({chartInput:s})},onRequestRemoveSelectedOption:function(e,a){t.chart.current.selectChart(a.selection)},onSelect:function(e,a){a.selection.length>0&&(t.chart.current.selectChart(a.selection),t.setState({chartSelected:a.selection}))}},labels:{label:"Chart Type",placeholder:"-- SELECT CHART TYPE --"},options:Object(y.f)({inputValue:this.chart.current.state.chartInput,limit:1e3,options:this.chart.current.state.chartOptions,selection:this.state.chartSelected?this.state.chartSelected:this.chart.current.state.chartSelection}),selection:this.state.chartSelected,value:this.chart.current.state.chartInput,variant:"readonly"})))),l.a.createElement(C.a,{ref:this.chart,summaryData:this.state.chartData,showAttributeFilter:!1,hideChartOptions:!0,onChartSelect:function(e,a){t.chartSelection(a)}}))}}]),a}(l.a.Component),N=a(292);a.d(e,"default",(function(){return R}));var R=function(t){Object(n.a)(a,t);var e=Object(i.a)(a);function a(t){var r;return Object(s.a)(this,a),(r=e.call(this,t)).state={isLoading:!0},r}return Object(r.a)(a,[{key:"componentDidMount",value:function(){this.setState({isLoading:!1})}},{key:"render",value:function(){return this.state.isLoading?l.a.createElement(o.a,{size:"large",variant:"brand"}):l.a.createElement("div",{style:{minHeight:1e3}},l.a.createElement(u.a,{variant:this.props.variant,id:"tabs-simple-advanced"},l.a.createElement(d.a,{label:"Simple"},l.a.createElement(x,null)),l.a.createElement(d.a,{label:"Advanced",style:{padding:0}},l.a.createElement(N.b,null))))}}]),a}(l.a.Component)}}]);
//# sourceMappingURL=17.d180526b.chunk.js.map