(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{154:function(e,t,a){"use strict";a.r(t),a.d(t,"default",function(){return I});var n=a(19),i=a(10),o=a(11),s=a(14),l=a(12),r=a(13),c=a(1),u=a.n(c),d=a(57),m=a(61),g=a(51),h=a(108),f=a(160),p=a(137),b=a(8),v=a.n(b),C=Object(c.lazy)(function(){return Promise.all([a.e(0),a.e(16)]).then(a.bind(null,142))}),S=Object(c.lazy)(function(){return Promise.all([a.e(0),a.e(2),a.e(19)]).then(a.bind(null,143))}),E="New Configuration",O=u.a.createElement("img",{src:"./grax-x.svg",className:"slds-m-right_x-small",style:{width:"14px",height:"14px",alignSelf:"center"}}),N=u.a.createElement(d.a,{assistiveText:{icon:"Expand"},category:"utility",name:"salesforce1",size:"xx-small",variant:"icon",className:"slds-m-right_x-small",style:{fill:"#009EDB"}}),k=null,H=0,y=1,x=2,j=3,F=4,_=5,z=6,w=7,T=8,L=9,D=11,M=12,A=function(e){function t(e){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).call(this,e))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"slds-tree_container",style:{maxWidth:"none",minWidth:"none"}},void 0!==this.props.label?u.a.createElement("h4",{className:"slds-tree__group-header"},this.props.label):null,u.a.createElement("ul",{"aria-labelledby":"treeheading",className:"slds-tree",role:"tree"},this.props.children))}}]),t}(u.a.Component),G=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={isOpen:!1,isCollapsible:!1,isEditable:!0},a.toggleHandler=a.toggleHandler.bind(Object(n.a)(a)),a.clickHandler=a.clickHandler.bind(Object(n.a)(a)),a.editHandler=a.editHandler.bind(Object(n.a)(a)),a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=!1,t=!1,a=!1;this.props.isOpen&&(e=this.props.isOpen),void 0!==this.props.children&&this.props.children.length>0&&(t=!0),this.props.isCollapsible&&(t=this.props.isCollapsible),this.props.isEditable&&(a=this.props.isEditable),this.setState({isOpen:e,isCollapsible:t,isEditable:a})}},{key:"toggleHandler",value:function(){var e=!this.state.isOpen;this.setState({isOpen:e}),this.props.onToggle&&this.props.onToggle(e)}},{key:"clickHandler",value:function(){!0===this.props.isToggleOnClick&&this.toggleHandler(),this.props.onClick&&this.props.onClick()}},{key:"editHandler",value:function(){this.props.onEdit&&this.props.onEdit()}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("li",{"aria-level":this.props.level,"aria-expanded":this.state.isOpen,role:"treeitem",tabIndex:"0"},u.a.createElement("div",{className:"slds-tree__item"+(void 0!==this.props.content?" slds-tree__item--no-hover":"")},u.a.createElement(m.a,{assistiveText:{icon:"Expand"},iconCategory:"utility",iconName:"chevronright",iconSize:"small",className:"slds-m-right_x-small"+(this.state.isCollapsible?"":" slds-is-disabled"),variant:"icon",onClick:this.toggleHandler}),void 0!==this.props.icon?u.a.createElement("div",{className:"slds-m-right_x-small slds-tree__item--icon"},this.props.icon):null,void 0!==this.props.content?this.props.content:u.a.createElement("span",{className:"slds-has-flexi-truncate",onClick:this.clickHandler},u.a.createElement("span",{className:"slds-tree__item-label slds-truncate",title:this.props.label},this.props.label)),this.state.isEditable?u.a.createElement("button",{className:"slds-button slds-button_icon slds-m-right_x-small",title:"Edit",onClick:this.editHandler},u.a.createElement(d.a,{assistiveText:{icon:"Expand"},category:"utility",name:"edit",size:"xx-small",variant:"icon"})):null),this.state.isOpen?u.a.createElement("ul",{role:"group"},this.props.children):null))}}]),t}(u.a.Component),I=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={isLoading:!0,error:null,configurations:{},modalSize:"large",isModalOpen:!1,isConfigurationFormOpened:!1,isSFLoginFormOpened:!1,selectedConfigurationName:null,configurationName:E,configuration:null,selectedDataSourceName:null,dataSource:null,configurationCollapsibleOpen:null},a.actionHandler=a.actionHandler.bind(Object(n.a)(a)),a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({configurations:this.props.configurations,isLoading:!1})}},{key:"generateConfigurationStructure",value:function(){return{dataSources:[],elastic:[],storage:[]}}},{key:"actionHandler",value:function(e,t){var a,n=this;if(e===D&&this.setState({isModalOpen:!0,modalSize:"medium",isConfigurationFormOpened:!0}),e===H&&(this.actionHandler(D),this.setState({selectedConfigurationName:null,configurationName:E,configuration:this.generateConfigurationStructure()})),e===y&&(this.actionHandler(D),this.setState({selectedConfigurationName:t.configurationName,configurationName:t.configurationName,configuration:v.a.cloneDeep(t.configuration)})),e===M&&this.setState({isModalOpen:!0,modalSize:"medium",isSFLoginFormOpened:!0}),e===F&&(this.actionHandler(M),this.setState({selectedConfigurationName:t.configurationName,dataSource:t.dataSource})),e===j&&(this.actionHandler(M),this.setState({selectedConfigurationName:t.configurationName,dataSource:{name:"New Data Source"}})),e===z){if(""===this.state.configurationName.trim())return void alert("The Name cannot be blank.");if((a=this.state.configurations)[this.state.configurationName]&&this.state.configurationName!==this.state.selectedConfigurationName)return void alert("Name in use...");null!=this.state.selectedConfigurationName&&delete a[this.state.selectedConfigurationName],a[this.state.configurationName]=this.state.configuration,this.setState({action:e,configurations:a}),this.actionHandler(T)}if(e===x&&(delete(a=this.state.configurations)[this.state.selectedConfigurationName],this.setState({configurations:a}),this.actionHandler(T)),e===T&&this.setState({isModalOpen:!1,isConfigurationFormOpened:!1,selectedConfigurationName:null,configurationName:null}),e===w){if(""===this.state.dataSource.name.trim())return void alert("The Name cannot be blank.");a=this.state.configurations;var i=v.a.findIndex(a[this.state.selectedConfigurationName].dataSources,function(e){return e.name===n.state.dataSource.name});-1!==i?a[this.state.selectedConfigurationName].dataSources[i]=this.state.dataSource:a[this.state.selectedConfigurationName].dataSources.push(this.state.dataSource),this.setState({configurations:a}),this.actionHandler(L)}e===_&&(a=this.state.configurations,v.a.remove(a[this.state.selectedConfigurationName].dataSources,function(e){return e.name===n.state.dataSource.name}),this.setState({configurations:a}),this.actionHandler(L)),e===L&&this.setState({isModalOpen:!1,isSFLoginFormOpened:!1,selectedConfigurationName:null,dataSource:null}),e===k&&(this.actionHandler(T),this.actionHandler(L)),this.setState({action:e})}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return u.a.createElement(g.a,{size:"large",variant:"brand"});var t=null==this.state.configurations||0===Object.keys(this.state.configurations).length;return u.a.createElement("div",{className:"slds-grid slds-grid_vertical",style:{flexGrow:1}},this.state.isModalOpen?u.a.createElement(h.a,{assistiveText:{dialogLabel:"Configuration Form"},isOpen:this.state.isModalOpen,footer:[this.state.isConfigurationFormOpened?u.a.createElement(u.a.Fragment,{key:"modal-action-"+this.state.action},this.state.action===y?u.a.createElement(m.a,{variant:"destructive",label:"Delete",onClick:function(){e.actionHandler(x)}}):null,u.a.createElement(m.a,{key:"configuration-save",label:"Save",variant:"brand",onClick:function(){e.actionHandler(z)}})):null,this.state.isSFLoginFormOpened?u.a.createElement(u.a.Fragment,{key:"modal-action-"+this.state.action},this.state.action===F?u.a.createElement(m.a,{variant:"destructive",label:"Delete",onClick:function(){e.actionHandler(_)}}):null,u.a.createElement(m.a,{label:"Save",variant:"brand",onClick:function(){e.actionHandler(w)}})):null,u.a.createElement(m.a,{key:"configuration-cancel",label:"Cancel",onClick:function(){e.actionHandler(k)}})],onRequestClose:function(){e.actionHandler(k)},align:"top",size:this.state.modalSize,ariaHideApp:!1},u.a.createElement(c.Suspense,{fallback:u.a.createElement(g.a,{size:"large",variant:"brand"})},this.state.isConfigurationFormOpened?u.a.createElement(C,{title:this.state.configurationName,configuration:this.state.configuration,onChange:function(t,a){console.log(t,a),e.setState({configurationName:t,configuration:a})}}):null,this.state.isSFLoginFormOpened?u.a.createElement(S,{dataSource:this.state.dataSource,onChange:function(e){console.log(JSON.stringify(e))},onLogin:function(e){console.log(JSON.stringify(e))}}):null)):null,u.a.createElement(f.a,{id:"grax-cloud-configurations",heading:"GRAX Configurations",empty:t?u.a.createElement(p.a,{heading:"No GRAX Configurations"},u.a.createElement(m.a,{label:"Add Configuration",onClick:function(){e.actionHandler(H)}})):null,style:{flexGrow:1}},u.a.createElement("div",{id:"grax-cloud-configurations-accordion",className:"slds-p-around_medium"},u.a.createElement(A,null,v.a.map(this.state.configurations,function(t,a){var n=v.a.uniqueId("grax-cloud-configurations-accordion-");return u.a.createElement(G,{isOpen:e.state.configurationCollapsibleOpen===a,isCollapsible:!0,id:n,key:n,onToggle:function(t){e.setState({configurationCollapsibleOpen:t?a:null})},isToggleOnClick:!0,label:a,level:1,isEditable:!0,icon:O,onEdit:function(){e.actionHandler(y,{configurationName:a,configuration:t})}},v.a.map(t.dataSources,function(t){var n=v.a.uniqueId("grax-cloud-configurations-accordion-item");return u.a.createElement(G,{id:n,key:n,label:t.name,level:2,isEditable:!0,icon:N,onEdit:function(){e.actionHandler(F,{configurationName:a,dataSource:t})}})}),u.a.createElement(G,{content:u.a.createElement(m.a,{label:"Add SFDC Connection",onClick:function(){e.actionHandler(j,{configurationName:a})}}),level:2}))}),u.a.createElement(G,{content:u.a.createElement(m.a,{label:"Add GRAX Configuration",onClick:function(){e.actionHandler(H)}}),level:1})))))}}]),t}(u.a.Component)}}]);