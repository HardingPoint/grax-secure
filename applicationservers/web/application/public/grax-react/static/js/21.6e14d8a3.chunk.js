(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{144:function(e,t,a){"use strict";a.r(t);var n=a(19),i=a(10),o=a(11),r=a(14),s=a(12),l=a(13),c=a(1),d=a.n(c),u=a(58),m=a(59),f=a(50),p=a(107),h=a(0),g=a.n(h),b=a(3),y=a.n(b),v=a(2);function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function O(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}var C="slds-media",S="slds-media__figure",_="slds-media__body",k=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}var a,n,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,d.a.Component),a=t,(n=[{key:"render",value:function(){return d.a.createElement("div",{className:y()(C,{"slds-media_center":this.props.verticalCenter,"slds-has-flexi-truncate":this.props.canTruncate},this.props.className)},this.props.figure?d.a.createElement("div",{className:S},this.props.figure," "):null,d.a.createElement("div",{className:_},this.props.body))}}])&&E(a.prototype,n),i&&E(a,i),t}();Object.defineProperty(k,"displayName",{configurable:!0,enumerable:!0,writable:!0,value:v.D}),Object.defineProperty(k,"propTypes",{configurable:!0,enumerable:!0,writable:!0,value:{canTruncate:g.a.bool,className:g.a.oneOfType([g.a.array,g.a.object,g.a.string]),body:g.a.node,figure:g.a.node,verticalCenter:g.a.bool}});var j=k;function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var H=function(e,t){var a=d.a.cloneElement(e,{id:e.props.id||t});return d.a.createElement("div",{className:"slds-input-has-icon slds-input-has-icon_left slds-size_1-of-3"},a)};H.displayName="renderFilter";var T=function(e){var t=null;("string"===typeof e.heading||e.heading instanceof String)&&(t=e.heading);var a,n=d.a.createElement("h2",{id:e.headingId,className:"slds-text-heading_small slds-truncate",title:t},e.heading);a=e.header?d.a.cloneElement(e.header,function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},n=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(a).filter(function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable}))),n.forEach(function(t){x(e,t,a[t])})}return e}({figure:e.icon,body:n,verticalCenter:!0,canTruncate:!0},e.header.props)):d.a.createElement(j,{figure:e.icon,body:n,verticalCenter:!0,canTruncate:!0});var i=!!e.filter||null;return d.a.createElement("div",{className:y()("slds-card__header","slds-grid")},a,e.filter?H(e.filter,e.filterId):null,d.a.createElement("div",{id:e.headerActionsId,className:y()("slds-no-flex",{"slds-size_1-of-3":i,"slds-text-align_right":i})},e.headerActions))};T.displayName=v.k,T.propTypes={filter:g.a.node,filterId:g.a.string,header:g.a.node,headerActions:g.a.node,headerActionsId:g.a.string,heading:g.a.oneOfType([g.a.element,g.a.string]).isRequired,headingId:g.a.string,icon:g.a.node};var w=T,F=function(e){return d.a.createElement("div",{className:y()("slds-card__body",e.className),id:e.id},e.children)};F.displayName=v.h,F.propTypes={children:g.a.node,className:g.a.oneOfType([g.a.array,g.a.object,g.a.string]),id:g.a.string};var z=F,A=function(e){return d.a.createElement("div",{className:"slds-card__footer"},e.children)};A.displayName=v.j,A.propTypes={children:g.a.node};var I=A,P=function(e){return d.a.createElement("div",{className:"slds-p-horizontal_small"},d.a.createElement("div",{className:"slds-text-align_center slds-m-bottom_x-large"},d.a.createElement("h3",{className:"slds-text-heading_small slds-p-top_large slds-p-bottom_large"},e.heading),e.children))};P.displayName=v.i,P.propTypes={children:g.a.node,heading:g.a.string},P.defaultProps={heading:"No Related Items"};var D=P,L="__body",M="__header-actions",R="__heading",q="__filter-input",G=function(e){var t=e.id?e.id+L:null,a=e.id?e.id+q:null,n=e.id?e.id+R:null,i=e.id?e.id+M:null,o=e.empty;return!0===o&&(o=d.a.createElement(D,{id:e.id,heading:e.heading})),d.a.createElement("article",{id:e.id,className:y()("slds-card",e.className),style:e.style},d.a.createElement(w,{header:e.header,headingId:n,icon:e.icon,filter:e.filter,filterId:a,heading:e.heading,headerActions:e.headerActions,headerActionsId:i}),o?d.a.createElement(z,{id:t,className:e.bodyClassName},o):d.a.createElement(z,{id:t,className:e.bodyClassName},e.children),e.footer?d.a.createElement(I,null,e.footer):null)};G.displayName=v.g,G.defaultProps={heading:"Related Items"},G.propTypes={bodyClassName:g.a.oneOfType([g.a.array,g.a.object,g.a.string]),children:g.a.node,className:g.a.oneOfType([g.a.array,g.a.object,g.a.string]),empty:g.a.oneOfType([g.a.bool,g.a.node]),filter:g.a.node,footer:g.a.node,header:g.a.node,heading:g.a.oneOfType([g.a.node,g.a.string]).isRequired,headerActions:g.a.node,icon:g.a.node,id:g.a.string,style:g.a.object};var J=G,X=a(7),W=a.n(X);a.d(t,"default",function(){return me});var B=Object(c.lazy)(function(){return Promise.all([a.e(0),a.e(14)]).then(a.bind(null,141))}),K=Object(c.lazy)(function(){return Promise.all([a.e(0),a.e(17),a.e(19)]).then(a.bind(null,142))}),Q="New Configuration",U=d.a.createElement("img",{src:"./grax-x.svg",className:"slds-m-right_x-small",style:{width:"14px",height:"14px",alignSelf:"center"}}),V=d.a.createElement(u.a,{assistiveText:{icon:"Expand"},category:"utility",name:"salesforce1",size:"xx-small",variant:"icon",className:"slds-m-right_x-small",style:{fill:"#009EDB"}}),Y=null,Z=0,$=1,ee=2,te=3,ae=4,ne=5,ie=6,oe=7,re=8,se=9,le=11,ce=12,de=function(e){function t(e){return Object(i.a)(this,t),Object(r.a)(this,Object(s.a)(t).call(this,e))}return Object(l.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return d.a.createElement("div",{className:"slds-tree_container",style:{maxWidth:"none",minWidth:"none"}},void 0!==this.props.label?d.a.createElement("h4",{className:"slds-tree__group-header"},this.props.label):null,d.a.createElement("ul",{"aria-labelledby":"treeheading",className:"slds-tree",role:"tree"},this.props.children))}}]),t}(d.a.Component),ue=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={isOpen:!1,isCollapsible:!1,isEditable:!0},a.toggleHandler=a.toggleHandler.bind(Object(n.a)(a)),a.clickHandler=a.clickHandler.bind(Object(n.a)(a)),a.editHandler=a.editHandler.bind(Object(n.a)(a)),a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=!1,t=!1,a=!1;this.props.isOpen&&(e=this.props.isOpen),void 0!==this.props.children&&this.props.children.length>0&&(t=!0),this.props.isCollapsible&&(t=this.props.isCollapsible),this.props.isEditable&&(a=this.props.isEditable),this.setState({isOpen:e,isCollapsible:t,isEditable:a})}},{key:"toggleHandler",value:function(){var e=!this.state.isOpen;this.setState({isOpen:e}),this.props.onToggle&&this.props.onToggle(e)}},{key:"clickHandler",value:function(){!0===this.props.isToggleOnClick&&this.toggleHandler(),this.props.onClick&&this.props.onClick()}},{key:"editHandler",value:function(){this.props.onEdit&&this.props.onEdit()}},{key:"render",value:function(){return d.a.createElement(d.a.Fragment,null,d.a.createElement("li",{"aria-level":this.props.level,"aria-expanded":this.state.isOpen,role:"treeitem",tabIndex:"0"},d.a.createElement("div",{className:"slds-tree__item"+(void 0!==this.props.content?" slds-tree__item--no-hover":"")},d.a.createElement(m.a,{assistiveText:{icon:"Expand"},iconCategory:"utility",iconName:"chevronright",iconSize:"small",className:"slds-m-right_x-small"+(this.state.isCollapsible?"":" slds-is-disabled"),variant:"icon",onClick:this.toggleHandler}),void 0!==this.props.icon?d.a.createElement("div",{className:"slds-m-right_x-small slds-tree__item--icon"},this.props.icon):null,void 0!==this.props.content?this.props.content:d.a.createElement("span",{className:"slds-has-flexi-truncate",onClick:this.clickHandler},d.a.createElement("span",{className:"slds-tree__item-label slds-truncate",title:this.props.label},this.props.label)),this.state.isEditable?d.a.createElement("button",{className:"slds-button slds-button_icon slds-m-right_x-small",title:"Edit",onClick:this.editHandler},d.a.createElement(u.a,{assistiveText:{icon:"Expand"},category:"utility",name:"edit",size:"xx-small",variant:"icon"})):null),this.state.isOpen?d.a.createElement("ul",{role:"group"},this.props.children):null))}}]),t}(d.a.Component),me=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={isLoading:!0,error:null,configurations:{},modalSize:"large",isModalOpen:!1,isConfigurationFormOpened:!1,isSFLoginFormOpened:!1,selectedConfigurationName:null,configurationName:Q,configuration:null,selectedDataSourceName:null,dataSource:null,configurationCollapsibleOpen:null},a.actionHandler=a.actionHandler.bind(Object(n.a)(a)),a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({configurations:this.props.configurations,isLoading:!1})}},{key:"generateConfigurationStructure",value:function(){return{dataSources:[],elastic:[],storage:[]}}},{key:"actionHandler",value:function(e,t){var a,n=this;if(e===le&&this.setState({isModalOpen:!0,modalSize:"medium",isConfigurationFormOpened:!0}),e===Z&&(this.actionHandler(le),this.setState({selectedConfigurationName:null,configurationName:Q,configuration:this.generateConfigurationStructure()})),e===$&&(this.actionHandler(le),this.setState({selectedConfigurationName:t.configurationName,configurationName:t.configurationName,configuration:W.a.cloneDeep(t.configuration)})),e===ce&&this.setState({isModalOpen:!0,modalSize:"medium",isSFLoginFormOpened:!0}),e===ae&&(this.actionHandler(ce),this.setState({selectedConfigurationName:t.configurationName,dataSource:t.dataSource})),e===te&&(this.actionHandler(ce),this.setState({selectedConfigurationName:t.configurationName,dataSource:{name:"New Data Source"}})),e===ie){if(""===this.state.configurationName.trim())return void alert("The Name cannot be blank.");if((a=this.state.configurations)[this.state.configurationName]&&this.state.configurationName!==this.state.selectedConfigurationName)return void alert("Name in use...");null!=this.state.selectedConfigurationName&&delete a[this.state.selectedConfigurationName],a[this.state.configurationName]=this.state.configuration,this.setState({action:e,configurations:a}),this.actionHandler(re)}if(e===ee&&(delete(a=this.state.configurations)[this.state.selectedConfigurationName],this.setState({configurations:a}),this.actionHandler(re)),e===re&&this.setState({isModalOpen:!1,isConfigurationFormOpened:!1,selectedConfigurationName:null,configurationName:null}),e===oe){if(""===this.state.dataSource.name.trim())return void alert("The Name cannot be blank.");a=this.state.configurations;var i=W.a.findIndex(a[this.state.selectedConfigurationName].dataSources,function(e){return e.name===n.state.dataSource.name});-1!==i?a[this.state.selectedConfigurationName].dataSources[i]=this.state.dataSource:a[this.state.selectedConfigurationName].dataSources.push(this.state.dataSource),this.setState({configurations:a}),this.actionHandler(se)}e===ne&&(a=this.state.configurations,W.a.remove(a[this.state.selectedConfigurationName].dataSources,function(e){return e.name===n.state.dataSource.name}),this.setState({configurations:a}),this.actionHandler(se)),e===se&&this.setState({isModalOpen:!1,isSFLoginFormOpened:!1,selectedConfigurationName:null,dataSource:null}),e===Y&&(this.actionHandler(re),this.actionHandler(se)),this.setState({action:e})}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return d.a.createElement(f.a,{size:"large",variant:"brand"});var t=null==this.state.configurations||0===Object.keys(this.state.configurations).length;return d.a.createElement("div",{className:"slds-grid slds-grid_vertical",style:{flexGrow:1}},this.state.isModalOpen?d.a.createElement(p.a,{assistiveText:{dialogLabel:"Configuration Form"},isOpen:this.state.isModalOpen,footer:[this.state.isConfigurationFormOpened?d.a.createElement(d.a.Fragment,{key:"modal-action-"+this.state.action},this.state.action===$?d.a.createElement(m.a,{variant:"destructive",label:"Delete",onClick:function(){e.actionHandler(ee)}}):null,d.a.createElement(m.a,{key:"configuration-save",label:"Save",variant:"brand",onClick:function(){e.actionHandler(ie)}})):null,this.state.isSFLoginFormOpened?d.a.createElement(d.a.Fragment,{key:"modal-action-"+this.state.action},this.state.action===ae?d.a.createElement(m.a,{variant:"destructive",label:"Delete",onClick:function(){e.actionHandler(ne)}}):null,d.a.createElement(m.a,{label:"Save",variant:"brand",onClick:function(){e.actionHandler(oe)}})):null,d.a.createElement(m.a,{key:"configuration-cancel",label:"Cancel",onClick:function(){e.actionHandler(Y)}})],onRequestClose:function(){e.actionHandler(Y)},align:"top",size:this.state.modalSize,ariaHideApp:!1},d.a.createElement(c.Suspense,{fallback:d.a.createElement(f.a,{size:"large",variant:"brand"})},this.state.isConfigurationFormOpened?d.a.createElement(B,{title:this.state.configurationName,configuration:this.state.configuration,onChange:function(t,a){console.log(t,a),e.setState({configurationName:t,configuration:a})}}):null,this.state.isSFLoginFormOpened?d.a.createElement(K,{dataSource:this.state.dataSource,onChange:function(e){console.log(JSON.stringify(e))},onLogin:function(e){console.log(JSON.stringify(e))}}):null)):null,d.a.createElement(J,{id:"grax-cloud-configurations",heading:"GRAX Configurations",empty:t?d.a.createElement(D,{heading:"No GRAX Configurations"},d.a.createElement(m.a,{label:"Add Configuration",onClick:function(){e.actionHandler(Z)}})):null,style:{flexGrow:1}},d.a.createElement("div",{id:"grax-cloud-configurations-accordion",className:"slds-p-around_medium"},d.a.createElement(de,null,W.a.map(this.state.configurations,function(t,a){var n=W.a.uniqueId("grax-cloud-configurations-accordion-");return d.a.createElement(ue,{isOpen:e.state.configurationCollapsibleOpen===a,isCollapsible:!0,id:n,key:n,onToggle:function(t){e.setState({configurationCollapsibleOpen:t?a:null})},isToggleOnClick:!0,label:a,level:1,isEditable:!0,icon:U,onEdit:function(){e.actionHandler($,{configurationName:a,configuration:t})}},W.a.map(t.dataSources,function(t){var n=W.a.uniqueId("grax-cloud-configurations-accordion-item");return d.a.createElement(ue,{id:n,key:n,label:t.name,level:2,isEditable:!0,icon:V,onEdit:function(){e.actionHandler(ae,{configurationName:a,dataSource:t})}})}),d.a.createElement(ue,{content:d.a.createElement(m.a,{label:"Add SFDC Connection",onClick:function(){e.actionHandler(te,{configurationName:a})}}),level:2}))}),d.a.createElement(ue,{content:d.a.createElement(m.a,{label:"Add GRAX Configuration",onClick:function(){e.actionHandler(Z)}}),level:1})))))}}]),t}(d.a.Component)}}]);