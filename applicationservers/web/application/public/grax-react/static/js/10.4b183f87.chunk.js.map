{"version":3,"sources":["components/SLDSSection.jsx","components/GRAXSFieldCombobox.jsx","components/GRAXFilterGeneration.jsx","components/SLDSPaginator.jsx","components/GRAXObjectCombobox.jsx","components/GRAXDeleteDataTable.jsx","components/GRAXDelete.jsx"],"names":["SLDSSection","props","state","isOpen","undefined","isCollapsible","handleToggle","bind","e","this","setState","onToggle","preventDefault","title","className","id","key","join","onClick","assistiveText","label","category","name","size","children","React","Component","GRAXSFieldCombobox","options","inputValue","selection","isLoaded","error","$","ajax","type","url","baseUrl","SObjectName","fieldName","GetParams","action","data","_select","success","_","map","picklistValues","item","i","value","onLoad","xhr","status","err","console","toString","length","onElseComponent","onRender","elseComponent","Fragment","classNameMenu","events","onChange","event","onRequestRemoveSelectedOption","onSelect","onRequestClose","labels","placeholder","comboboxFilterAndLimit","limit","variant","multiple","required","style","position","height","sanitizeElasticFilterValue","filterValue","replace","TYPE_VS_OPERATORS","isNegated","GRAXFilterableCombobox","_isMounted","isOpened","log","filterOptionsHandler","onOpen","onClose","GRAXFilterGeneration","_filterValues","_error","_filterValuesFields","filterableFieldOptions","operator","isActive","selectedField","filterValueStruct","getFilterValueStruct","filter","option","filterValues","Object","keys","_filterValuesList","getFilterValuesList","onFilterValueChangeHandler","getFilterFunction","getFilterQuery","push","splice","dataList","isReturned","forEach","filterOperator","filterVal","Array","isArray","split","filterIsNegated","isFilterMatch","itemVal","Boolean","moment","format","String","toLowerCase","includes","operatorByName","queryConditions","startsWith","_filterVal","condition","inConditions","each","parseFloat","reduce","selectionIds","scope","data-label","width","indexOf","find","defaultChecked","target","checked","SObjectType","getSelectionValues","defaultValue","onBlur","isPicklist","date","menuPosition","hasStaticAlignment","removeFieldHandler","addAnotherFieldHandler","disabled","SLDSPaginator","pager","totalItems","setPage","currentPage","page","isInitialLoad","pageSize","totalPages","getPager","onChangePage","isNarrow","startPage","endPage","Math","ceil","startIndex","endIndex","min","pages","iconCategory","iconName","iconPosition","index","Date","now","align","content","defaultProps","GRAXObjectCombobox","excludeIds","GRAXDeleteDataTable","sortColumn","sortDirection","chunks","items","extraInfo","isLoading","deleteConfirmIsOpen","deleteConfirmIsChecked","deleteConfirmCallback","deleteConfirmTotal","nextProps","nextState","renderKey","_sort","dataIndex","union","columns","hiddenColumns","_q","filterQuery","_limit","_from","_includeMetadata","results","filterFunction","val","SF_DATETIME_REGEXP","test","m","isValid","tz","TZ","_i","DATETIME_FORMAT","DATE_FORMAT","total","totalRetrieved","getDataHandler","slice","property","actionsHeader","columnSort","columnSortedAscending","columnSortedDescending","selectAllRows","selectRow","fixedLayout","onRowChange","handleChanged","onSort","handleSort","selectRows","columnName","isSorted","sortable","sortableColumns","confirm","contentType","JSON","stringify","pick","alert","dismissible","footer","class","prompt","dismissOnClickOutside","ELASTIC_SORTABLE_TYPES","GRAXDelete","selectedDataIndex","retrieved","retrievedCounter","_graxFields","_graxFieldsSelection","_graxFieldsSelectionList","_filterFunction","_getFilterQuery","_graxSortableFields","GRAXFieldsCombobox","sortableFields","elasticField","hasFieldSelected"],"mappings":"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","file":"static/js/10.4b183f87.chunk.js","sourcesContent":["import React from 'react';\nimport { Icon } from '@salesforce/design-system-react';\n\nexport default class SLDSSection extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isOpen: props.isOpen === true ? true : false || props.isCollapsible === undefined\n        };\n\n        this.handleToggle = this.handleToggle.bind(this);\n    }\n\n    handleToggle(e) {\n        var isOpen = !this.state.isOpen;\n\n        this.setState({\n            isOpen: isOpen\n        });\n\n        if(this.props.onToggle) {\n            this.props.onToggle(isOpen);\n        }\n\n        e.preventDefault();\n    }\n\n    render() {\n        var title = <span className={'slds-truncate' + (!this.props.isCollapsible ? ' slds-p-horizontal_small' : '')} title={this.props.title}>{this.props.title}</span>;\n\n        return (\n            <div id={this.props.id || this.props.key} className={['slds-section', this.state.isOpen && 'slds-is-open', this.props.className].join(' ')}>\n                <h3 className=\"slds-section__title slds-theme_shade\">\n                    {this.props.isCollapsible ? <button className=\"slds-button slds-section__title-action\" onClick={this.handleToggle}>\n                        <Icon\n                            assistiveText={{ label: this.props.title }}\n                            category=\"utility\"\n                            name=\"switch\"\n                            size=\"x-small\"\n                            className=\"slds-section__title-action-icon slds-button__icon slds-button__icon_left\"\n                        />\n                        {title}\n                    </button> : title}\n                </h3>\n                {this.state.isOpen && <div className=\"slds-section__content\">\n                    {this.props.children}\n                </div>}\n            </div>\n        );\n    }\n}","import React from 'react';\nimport _ from 'lodash';\n\nimport {Spinner, Combobox} from '@salesforce/design-system-react';\n\nimport {$, baseUrl, GetParams} from '../lib/grax-data-lake';\n\nimport {comboboxFilterAndLimit} from '../lib/utils';\n\n\nexport default class GRAXSFieldCombobox extends React.Component {\n    constructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n            options: [],\n\t\t\tinputValue: '',\n            selection: [],\n            isLoaded: false,\n            error: null\n\t\t};\n    }\n    \n    componentDidMount() {\n        $.ajax({\n            type: 'GET',\n            //dataType: 'jsonp',\n            url: baseUrl + '/grax-app/grax-data-lake/salesforce/sobjects/' + this.props.SObjectName + '/fields/' + this.props.fieldName + GetParams({action:'load'}),\n            data: {\n                _select: 'name,type,picklistValues'\n            },\n            success: function(data) {\n                this.setState({\n                    options: _.map(data.picklistValues || [], (item, i) => ({\n                        id: item.value,\n                        label: item.label\n                    })),\n                    isLoaded: true\n                });\n\n                if(this.props.onLoad) {\n                    this.props.onLoad(true);\n                }\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(xhr, status, err);\n\n                this.setState({\n                    isLoaded: true,\n                    error: err.toString()\n                });\n\n                if(this.props.onLoad) {\n                    this.props.onLoad(false, err);\n                }\n            }.bind(this)\n        });\n    }\n\n    render() {\n        if (this.state.error) {\n            return <div>Error: {this.state.error}</div>;\n        } else if (!this.state.isLoaded) {\n            return (\n                <div style={{ position: 'relative', height: '2rem' }}>\n                    <Spinner size=\"small\" variant=\"base\" />\n                </div>\n            );\n        } else {\n            if(this.state.options == null || this.state.options.length === 0) {\n                if(this.props.onElseComponent) {\n                    this.props.onRender(false);\n                }\n\n                return this.props.elseComponent;\n            } else if(this.props.onLoad) {\n                this.props.onRender(true);\n            }\n\n            return (\n                <React.Fragment>\n                    <Combobox\n                        classNameMenu={'scrollable-GRAXSFieldCombobox'}\n                        events={{\n                            onChange: (event, { value }) => {\n                                this.setState({\n                                    inputValue: value\n                                });\n\n                                if (this.props.onChange) {\n                                    this.props.onChange(event, value);\n                                }\n                            },\n                            onRequestRemoveSelectedOption: (event, data) => {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n\n                                if (this.props.onRequestRemoveSelectedOption) {\n                                    this.props.onRequestRemoveSelectedOption(event, data.selection);\n                                }\n                            },\n                            onSelect: (event, data) => {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n\n                                if (this.props.onSelect) {\n                                    this.props.onSelect(event, data.selection);\n                                }\n                            },\n                            onRequestClose: (event, data) => {\n                                if (this.props.onSelect && this.state.inputValue) {\n                                    this.props.onSelect(event, [{\n                                        id: this.state.inputValue,\n                                        label: this.state.inputValue\n                                    }]);\n                                }\n                            }\n                        }}\n                        labels={{\n                            placeholder: 'Select Option',\n                        }}\n                        options={comboboxFilterAndLimit({\n                            inputValue: this.state.inputValue,\n                            limit: 1000,\n                            options: this.state.options,\n                            selection: this.state.selection\n                        })}\n                        selection={this.state.selection}\n                        value={this.state.inputValue}\n                        variant={this.props.variant || 'inline-listbox'}\n                        multiple={this.props.multiple || false}\n                        required={true}\n                    />\n                </React.Fragment>\n            );\n        }\n    }\n}","/* eslint-disable no-useless-escape */\nimport React from 'react';\nimport _ from 'lodash';\nimport moment from 'moment';\n\nimport {Spinner, Combobox, Input, Datepicker, Button, Checkbox, comboboxFilterAndLimit} from '@salesforce/design-system-react';\nimport GRAXSFieldCombobox from './GRAXSFieldCombobox';\n\n// import {comboboxFilterAndLimit} from '../lib/utils';\n\nvar sanitizeElasticFilterValue = function(filterValue) {\n    return filterValue\n        .replace(/[\\*\\+\\-=~><\\\"\\?^\\${}\\(\\)\\:\\!\\/[\\]\\\\\\s]/g, '\\\\$&') // replace single character special characters\n        .replace(/\\|\\|/g, '\\\\||') // replace ||\n        .replace(/\\&\\&/g, '\\\\&&') // replace &&\n        .replace(/AND/g, '\\\\A\\\\N\\\\D') // replace AND\n        .replace(/OR/g, '\\\\O\\\\R') // replace OR\n        .replace(/NOT/g, '\\\\N\\\\O\\\\T'); // replace NOT\n};\n\nconst FIELD = 'Field';\nconst OPERATOR = 'Operator';\nconst FILTER_VALUE = 'Filter Value';\nconst IS_ACTIVE = 'Is Active?';\n\nconst TYPE_VS_OPERATORS = {\n    'text': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=', isNegated: true},\n        {id: 'contains', label: 'contains', isNegated: false},\n        {id: 'contains', label: 'not contains', isNegated: true},\n        {id: 'in', label: 'in', isNegated: false},\n        {id: 'in', label: 'not in', isNegated: true},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'date': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=' , isNegated: true},\n        {id: 'gt', label: '>', isNegated: false},\n        {id: 'lt', label: '<', isNegated: false},\n        {id: 'gte', label: '>=', isNegated: false},\n        {id: 'lte', label: '<=', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'number': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=', isNegated: true},\n        {id: 'gt', label: '>', isNegated: false},\n        {id: 'lt', label: '<', isNegated: false},\n        {id: 'gte', label: '>=', isNegated: false},\n        {id: 'lte', label: '<=', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'long': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'eq', label: '!=', isNegated: true},\n        {id: 'gt', label: '>', isNegated: false},\n        {id: 'lt', label: '<', isNegated: false},\n        {id: 'gte', label: '>=', isNegated: false},\n        {id: 'lte', label: '<=', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false, type: 'boolean'}\n    ],\n    'boolean': [\n        {id: 'eq', label: '==', isNegated: false},\n        {id: 'exists', label: 'exists', isNegated: false}\n    ]\n};\n\n\nexport class GRAXFilterableCombobox extends React.Component {\n    constructor(props) {\n\t\tsuper(props);\n\n        this._isMounted = false;\n\n\t\tthis.state = {\n\t\t\tinputValue: '',\n            selection: [],\n            isOpened: false\n\t\t};\n    }\n\n    componentDidMount() {\n        this._isMounted = true;\n\n        if(this.props.selection) {\n            console.log(this.props.selection);\n\n            this.setState({\n                selection: this.props.selection\n            });\n        }\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n    }\n\n    filterOptionsHandler() {\n        var options = this.props.options || [];\n\n        if(this.props.filterOptionsHandler && this.state.isOpened) {\n            options = this.props.filterOptionsHandler(options);\n        }\n\n        return comboboxFilterAndLimit({\n            inputValue: this.state.inputValue,\n            limit: 1000,\n            options: options,\n            selection: this.state.selection\n        })\n    }\n\n    render() {\n        return (\n            <React.Fragment>\n                <Combobox\n                    classNameMenu={'scrollable-GRAXFilterableCombobox'}\n                    events={{\n                        onChange: (event, { value }) => {\n                            this.setState({\n                                inputValue: value\n                            });\n\n                            if (this.props.onChange) {\n                                this.props.onChange(event, value);\n                            }\n                        },\n                        onRequestRemoveSelectedOption: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n                            }\n\n                            if (this.props.onRequestRemoveSelectedOption) {\n                                this.props.onRequestRemoveSelectedOption(event, data.selection);\n                            }\n                        },\n                        onSelect: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n                            }\n\n                            if (this.props.onSelect) {\n                                this.props.onSelect(event, data.selection);\n                            }\n                        },\n                        onOpen: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    isOpened: true\n                                });\n                            }\n                        },\n                        onClose: (event, data) => {\n                            if(this._isMounted) {\n                                this.setState({\n                                    isOpened: false\n                                });\n                            }\n                        }\n                    }}\n                    labels={{\n                        placeholder: this.props.placeholder,\n                    }}\n                    options={this.filterOptionsHandler()}\n                    selection={this.state.selection}\n                    value={this.state.inputValue}\n                    variant={this.props.variant || 'inline-listbox'}\n                    required={true}\n                    multiple={false}\n                />\n            </React.Fragment>\n        );\n    }\n}\n\n\nexport default class GRAXFilterGeneration extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            _filterValues: null,\n            _error: null,\n            _filterValuesFields: []\n        };\n    }\n\n    isLoaded() {\n        return this.state._error || (this.props.filterableFieldOptions != null);\n    }\n\n    getFilterValueStruct() {\n        return {\n            id: null,\n            value: null,\n            operator: 'eq',\n            isNegated: false,\n            isActive: true,\n            selectedField: null\n        };\n    }\n\n    getFilterValuesList(_filterValues) {\n        return _.map(_filterValues, (filterValue, fieldName) => {\n            var filterValueStruct = this.getFilterValueStruct();\n\n            filterValueStruct.id = fieldName;\n            filterValueStruct.value = filterValue.value;\n            filterValueStruct.operator = filterValue.operator;\n            filterValueStruct.isNegated = filterValue.isNegated;\n            filterValueStruct.isActive = filterValue.isActive;\n            filterValueStruct.selectedField = _.filter(this.props.filterableFieldOptions, (option, i) => {\n                return option && option.id === fieldName;\n            })[0] || null;\n\n            return filterValueStruct;\n        });\n    }\n\n    componentDidMount() {\n        var _filterValues = this.props.filterValues || {};\n        var _filterValuesFields = Object.keys(_filterValues);\n\n        this.setState({\n            _filterValues: _filterValues,\n            _filterValuesFields: _filterValuesFields,\n            _filterValuesList: this.getFilterValuesList(_filterValues)\n        });\n\n        this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this), _filterValuesFields, this.getFilterQuery.bind(this), this.state._filterValues);\n    }\n\n\n    onFilterValueChangeHandler(filterValue, selection) {\n        var _filterValues = this.state._filterValues;\n\n        if(selection && selection.length > 0) {\n            var selectedField = selection[0] || null;\n\n            filterValue.id = selectedField.id;\n            filterValue.selectedField = selectedField;\n\n            _filterValues[filterValue.id] = {\n                value: filterValue.value,\n                isActive: filterValue.isActive,\n                operator: filterValue.operator,\n                isNegated: filterValue.isNegated,\n                selectedField: selectedField\n            };\n        } else {\n            delete _filterValues[filterValue.id];\n            filterValue.id = null;\n            filterValue.selectedField = null;\n        }\n\n        var _filterValuesFields = Object.keys(_filterValues);\n\n        this.setState({\n            _filterValues: _filterValues,\n            _filterValuesFields: _filterValuesFields,\n            _filterValuesList: this.state._filterValuesList\n        });\n\n        if(this.props.onFilterValueChangeHandler) {\n            this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this), _filterValuesFields, this.getFilterQuery.bind(this), this.state._filterValues);\n        }\n    }\n\n    addAnotherFieldHandler() {\n        var _filterValuesList = this.state._filterValuesList;\n\n        if(_filterValuesList.length === 0 || _filterValuesList[_filterValuesList.length - 1].id != null) {\n            _filterValuesList.push(this.getFilterValueStruct());\n\n            this.setState({\n                _filterValuesList: _filterValuesList\n            });\n        }\n    }\n\n    removeFieldHandler(i) {\n        var _filterValues = this.state._filterValues;\n        var _filterValuesList = this.state._filterValuesList;\n\n        delete _filterValues[_filterValuesList[i].id];\n        _filterValuesList.splice(i, 1);\n\n        this.setState({\n            _filterValues: _filterValues,\n            _filterValuesFields: Object.keys(_filterValues),\n            _filterValuesList: _filterValuesList\n        });\n    }\n\n    getFilterFunction(dataList) {\n        return _.filter(dataList, (item, i) => {\n            var isReturned = true;\n\n            _.forEach(this.state._filterValues, (filterValue, fieldName) => {\n                if(!filterValue.isActive) return;\n\n                var filterOperator = filterValue.operator;\n                var filterVal = filterValue.value;\n\n                if(filterOperator !== 'in' && Array.isArray(filterVal)) {\n                    filterVal = filterVal.length > 0 ? filterVal[0] : null;\n                } else if(filterOperator === 'in' && !Array.isArray(filterVal)) {\n                    filterVal = filterVal.split(' OR ');\n                }\n\n                var filterIsNegated = filterValue.isNegated;\n                var isFilterMatch = false;\n                var itemVal = item[fieldName];\n\n                if(filterOperator === 'eq' && filterVal !== '' && !Boolean(filterVal)) {\n                    filterOperator = 'exists';\n                    filterIsNegated = false;\n                }\n\n                if(Array.isArray(filterVal) && filterOperator !== 'in') {\n                    filterVal = filterVal.length > 0 ? filterVal[0] : null;\n                }\n\n                if(filterValue.selectedField.type === 'date') {\n                    itemVal = moment(itemVal);\n\n                    if(itemVal) {\n                        itemVal = itemVal.format('YYYY-MM-DD');\n                    }\n\n                    filterVal = moment(filterVal);\n\n                    if(filterVal) {\n                        filterVal = filterVal.format('YYYY-MM-DD');\n                    }\n                }\n\n                if(filterValue.selectedField.type === 'boolean' && !Boolean(filterVal)) {\n                    filterVal = true;\n                    filterIsNegated = true;\n                }\n\n                if(filterOperator === 'exists') {\n                    isFilterMatch = Boolean(itemVal) === Boolean(filterVal);\n                } else if(filterOperator === 'contains') {\n                    isFilterMatch = String(itemVal).toLowerCase().includes(filterVal.toLowerCase());\n                } else if(filterOperator === 'in') {\n                    isFilterMatch = filterVal && filterVal.length > 0 && _.includes(filterVal, ...(typeof(itemVal) === 'string' ? [itemVal] : itemVal));\n                } else {\n                    isFilterMatch = _[filterOperator](itemVal, filterVal);\n                }\n\n                isReturned &= filterIsNegated ? !isFilterMatch : isFilterMatch;\n            });\n\n            return isReturned;\n        }) || [];\n    }\n\n    getFilterQuery() {\n        // Contains: doc.field:value, doc.field:*value*\n        // Equal: doc.field:\"value\" (Contains exact on text type)\n        // NotNull: _exists_:doc.field\n\n        // Gt: doc.field:[value TO *]; doc.field:>value\n        // Lt: doc.field:[* TO value]; doc.field:<value\n        // Gte: doc.field:>=value\n        // Lte: doc.field:<=value\n\n        // Boolean: +doc.field; -doc.field\n        // Negation: NOT (...)\n        // IN: (doc.field: 'a' OR doc.field: 'b' OR ...)\n        // Exists: __exists__:doc.field\n\n        var operatorByName = {\n            'gt': '>',\n            'gte': '>=',\n            'lt': '<',\n            'lte': '<='\n        };\n\n        var queryConditions = [];\n\n        _.forEach(this.state._filterValues, (filterValue, fieldName) => {\n            var filterOperator = filterValue.operator;\n\n            if(!filterValue.isActive || filterOperator.startsWith('_')) return;\n\n            var filterVal = filterValue.value;\n\n            if(filterOperator !== 'in' && Array.isArray(filterVal)) {\n                filterVal = filterVal.length > 0 ? sanitizeElasticFilterValue(filterVal[0]) : null;\n            } else if(filterOperator === 'in' && !Array.isArray(filterVal)) {\n                filterVal = _.map(filterVal.split(' OR '), (_filterVal) => {\n                    return sanitizeElasticFilterValue(_filterVal);\n                });\n            }\n\n            var filterIsNegated = filterValue.isNegated;\n\n            if(filterOperator === 'eq' && filterIsNegated && !Boolean(filterVal)) {\n                filterOperator = 'exists';\n                filterVal = filterIsNegated;\n            }\n\n            if(filterOperator === 'exists') {\n                filterIsNegated = !Boolean(filterVal);\n            }\n\n            var condition = '(';\n\n            if(filterIsNegated) {\n                condition += 'NOT ';\n            }\n\n            condition += '(';\n\n            if(filterValue.selectedField.type === 'boolean' && !Boolean(filterVal)) {\n                condition += 'NOT ';\n            }\n\n            if(filterOperator === 'in') {\n                var inConditions = [];\n\n                _.each(filterVal, (item, i) => {\n                    inConditions.push('\"' + item + '\"');\n                });\n\n                condition += 'doc.' + fieldName + ':(' + inConditions.join(' OR ') + ')';\n            } else if(filterOperator === 'exists') {\n                condition += '_exists_:doc.' + fieldName;\n            } else {\n                condition += 'doc.' + fieldName + ':';\n\n                if(filterOperator === 'eq') {\n                    if(filterValue.selectedField.type === 'boolean') {\n                        condition += 'true';\n                    } else if(filterValue.selectedField.type === 'number') {\n                        condition += filterVal ? parseFloat(filterVal) : '';\n                    } else if(filterValue.selectedField.type === 'date') {\n                        condition += filterVal ? moment(filterVal).format('YYYY-MM-DD') : '';\n                    } else {\n                        condition += '\"' + filterVal + '\"';\n                    }\n                } else if(filterOperator === 'contains') {\n                    var _filterVal = filterVal ? String(filterVal) : '';\n\n                    condition += '(';\n                    condition += '\"' + sanitizeElasticFilterValue(filterVal) + '\"';\n                    condition += ' OR ';\n                    condition += sanitizeElasticFilterValue(_filterVal.toLowerCase());\n                    condition += ' OR ';\n                    condition += '*' + sanitizeElasticFilterValue(_filterVal.toLowerCase()) + '*';\n                    condition += ')';\n                } else if(filterValue.selectedField.type === 'date') {\n                    condition += operatorByName[filterOperator] + (filterVal ? moment(filterVal).format('YYYY-MM-DD') : '');\n                } else {\n                    condition += operatorByName[filterOperator] + (filterVal ? sanitizeElasticFilterValue(filterVal) : '');\n                }\n\n            }\n\n            condition += '))';\n\n            queryConditions.push(condition);\n        });\n\n        return queryConditions.length > 0 ? queryConditions.join(' AND ') : null;\n    }\n\n    getSelectionValues(selection) {\n        return selection ? _.reduce(selection, function(selectionIds, item) {\n            selectionIds.push(item.id);\n\n            return selectionIds;\n        }, []) : null;\n    }\n\n    render() {\n        if (this.state._error) {\n            return <div>Error: {this.state._error}</div>;\n        } else if (!this.isLoaded()) {\n            return (\n                <div style={{ position: 'relative', height: '5rem' }}>\n                    <Spinner size=\"small\" variant=\"base\" />\n                </div>\n            );\n        } else {\n            return (\n                <React.Fragment>\n                    {/*<div className=\"slds-scrollable_y\" style={{maxHeight: '50vw'}}>*/}\n                        <table className=\"slds-table slds-table_cell-buffer slds-table_bordered slds-no-row-hover\">\n                            <thead>\n                                <tr className=\"slds-line-height_reset\">\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={FIELD}>{FIELD}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={OPERATOR}>{OPERATOR}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={FILTER_VALUE}>{FILTER_VALUE}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\" title={IS_ACTIVE}>{IS_ACTIVE}</div>\n                                    </th>\n                                    <th className=\"slds-text-title_caps\" scope=\"col\">\n                                        <div className=\"slds-truncate\"></div>\n                                    </th>\n                                </tr>\n                            </thead>\n                            <tbody>\n                                {/* Iterate over fields */}\n                                {_.map(this.state._filterValuesList, function(filterValue, i) {\n                                    var fieldName = filterValue.id;\n\n                                    var selectedField = filterValue.selectedField || {};\n\n                                    return (\n                                        <tr className=\"slds-hint-parent\" key={'fieldName: ' + (fieldName || '')}>\n                                            <td data-label={FIELD} style={{width: '30vw'}}>\n                                                {fieldName ||\n                                                <GRAXFilterableCombobox\n                                                    placeholder=\"Select Field to filter\"\n                                                    options={this.props.filterableFieldOptions || []}\n                                                    filterOptionsHandler={(options) => {\n                                                        return _.filter(options, (option, i) => {\n                                                            return option && this.state._filterValuesFields.indexOf(option.id) === -1;\n                                                        }) || [];\n                                                    }}\n                                                    selection={_.find(this.props.filterableFieldOptions, (option) => {\n                                                        return option && option.id === fieldName;\n                                                    }) || []}\n                                                    onSelect={(event, selection) => this.onFilterValueChangeHandler(filterValue, selection)}\n                                                    onRequestRemoveSelectedOption={(event, selection) => this.onFilterValueChangeHandler(filterValue, selection)}\n                                                />}\n                                            </td>\n                                            <td data-label={OPERATOR} style={{width: '20vw'}}>\n                                                {selectedField && (\n                                                    (\n                                                        selectedField.type === 'boolean' && TYPE_VS_OPERATORS[selectedField.type].label\n                                                    ) || (\n                                                        <GRAXFilterableCombobox\n                                                            placeholder=\"Select Operator to Compare\"\n                                                            options={TYPE_VS_OPERATORS[selectedField.type] || []}\n                                                            selection={[]}\n                                                            variant=\"readonly\"\n                                                            onSelect={(event, selection) => {\n                                                                selection[0].type = selection[0].type || filterValue.selectedField.type;\n\n                                                                filterValue.operator = selection[0].id;\n                                                                filterValue.isNegated = selection[0].isNegated;\n\n                                                                if(filterValue.type !== selection[0].type) {\n                                                                    filterValue.value = null;\n\n                                                                    if(selection[0].type === 'boolean') {\n                                                                        filterValue.value = false;\n                                                                    }\n\n                                                                    if(selection[0].type === 'text') {\n                                                                        filterValue.value = '';\n                                                                    }\n\n                                                                    filterValue.type = selection[0].type;\n                                                                }\n\n                                                                this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField])\n                                                            }}\n                                                        />\n                                                    )\n                                                )}\n                                            </td>\n                                            <td data-label={FILTER_VALUE} style={{width: '30vw'}}>\n                                                {selectedField && (\n                                                    (\n                                                        (selectedField.type === 'boolean' || filterValue.operator === 'exists') && (\n                                                            <Checkbox\n                                                                defaultChecked={filterValue.value}\n                                                                onChange={(e) => {\n                                                                    filterValue.value = e.target.checked;\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                            />\n                                                        )\n                                                    ) || (\n                                                        (selectedField.type === 'text' || selectedField.type === 'number' || selectedField.type === 'long') && (\n                                                            <GRAXSFieldCombobox\n                                                                SObjectName={this.props.SObjectType}\n                                                                fieldName={selectedField.id}\n                                                                onSelect={(event, selection) => {\n                                                                    filterValue.value = this.getSelectionValues(selection);\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                                onRequestRemoveSelectedOption={(event, selection) => {\n                                                                    filterValue.value = this.getSelectionValues(selection);\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                                elseComponent={\n                                                                    <Input\n                                                                        defaultValue={filterValue.value}\n                                                                        assistiveText={{ label: selectedField.label }}\n                                                                        id={selectedField.id}\n                                                                        onBlur={(event) => {\n                                                                            filterValue.value = event.target.value;\n\n                                                                            this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                        }}\n                                                                    />\n                                                                }\n                                                                onRender={(isPicklist) => {}}\n                                                                multiple={filterValue.operator === 'in'}\n                                                                variant={filterValue.operator === 'in' ? 'base' : 'inline-listbox'}\n                                                            />\n                                                        )\n                                                    ) || (\n                                                        selectedField.type === 'date' && (\n                                                            <Datepicker\n                                                                value={filterValue.value}\n                                                                onChange={(event, data) => {\n                                                                    filterValue.value = data.date;\n\n                                                                    this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                                }}\n                                                                className=\"inline-table\"\n                                                                menuPosition=\"relative\"\n                                                                hasStaticAlignment={true}\n                                                            />\n                                                        )\n                                                    )\n                                                )}\n                                            </td>\n                                            <td data-label={IS_ACTIVE} style={{width: '10vw'}}>\n                                                <Checkbox\n                                                    defaultChecked={filterValue.isActive}\n                                                    onChange={(e) => {\n                                                        filterValue.isActive = e.target.checked;\n\n                                                        this.onFilterValueChangeHandler(filterValue, [filterValue.selectedField]);\n                                                    }}\n                                                />\n                                            </td>\n                                            <td data-label={'Actions'} style={{width: '10vw'}}>\n                                                <Button label=\"Remove Filter\" variant=\"base\" onClick={() => {\n                                                    this.removeFieldHandler(i);\n                                                }}/>\n                                            </td>\n                                        </tr>\n                                    );\n                                }.bind(this))}\n                            </tbody>\n                        </table>\n                    {/*</div>*/}\n\n                    <div className=\"slds-p-top_medium\">\n                        <Button label=\"Add Filter\" variant=\"brand\" onClick={() => {\n                            this.addAnotherFieldHandler();\n                        }} disabled={this.props.filterableFieldOptions == null || this.props.filterableFieldOptions.length === 0 || this.props.filterableFieldOptions.length === this.state._filterValuesFields.length} />\n                    </div>\n                </React.Fragment>\n            );\n        }\n    }\n}","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport {ButtonGroup, Button, Tooltip} from '@salesforce/design-system-react';\n \nconst propTypes = {\n    totalItems: PropTypes.number.isRequired,\n    onChangePage: PropTypes.func.isRequired,\n    currentPage: PropTypes.number,\n    pageSize: PropTypes.number,\n}\n \nconst defaultProps = {\n    currentPage: 1,\n    pageSize: 10\n}\n \nclass SLDSPaginator extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            pager: {}\n        };\n    }\n \n    componentWillMount() {\n        // set page if items array isn't empty\n        if (this.props.totalItems) {\n            this.setPage(this.props.currentPage, true);\n        }\n    }\n \n    setPage(page, isInitialLoad) {\n        var { totalItems, pageSize } = this.props;\n        var pager = this.state.pager;\n \n        if (page < 1 || page > pager.totalPages) {\n            return;\n        }\n \n        // get new pager object for specified page\n        pager = this.getPager(totalItems, page, pageSize);\n \n        // update state\n        this.setState({ pager: pager });\n \n        // call change page function in parent component\n        this.props.onChangePage(page, false || isInitialLoad);\n    }\n \n    getPager(totalItems, currentPage, pageSize) {\n        // default to first page\n        currentPage = currentPage || 1;\n \n        // default page size is 10\n        pageSize = pageSize || 10;\n\n        var isNarrow = false;\n\n        if(totalItems > 10000) {\n            totalItems = 10000;\n            isNarrow = true;\n        }\n \n        // calculate total pages\n        var totalPages = Math.ceil(totalItems / pageSize);\n \n        var startPage, endPage;\n        if (totalPages <= 10) {\n            // less than 10 total pages so show all\n            startPage = 1;\n            endPage = totalPages;\n        } else {\n            // more than 10 total pages so calculate start and end pages\n            if (currentPage <= 6) {\n                startPage = 1;\n                endPage = 10;\n            } else if (isNarrow && (currentPage + 3) >= totalPages) {\n                startPage = totalPages - 8;\n                endPage = totalPages;\n            } else if ((currentPage + 4) >= totalPages) {\n                startPage = totalPages - 9;\n                endPage = totalPages;\n            } else {\n                startPage = currentPage - 5;\n                endPage = currentPage + 4;\n            }\n        }\n \n        // calculate start and end item indexes\n        var startIndex = (currentPage - 1) * pageSize;\n        var endIndex = Math.min(startIndex + pageSize - 1, totalItems - 1);\n \n        // create an array of pages to ng-repeat in the pager control\n        var pages = [...Array((endPage + 1) - startPage).keys()].map(i => startPage + i);\n \n        // return object with all pager properties required by the view\n        return {\n            totalItems: totalItems,\n            currentPage: currentPage,\n            pageSize: pageSize,\n            totalPages: totalPages,\n            startPage: startPage,\n            endPage: endPage,\n            startIndex: startIndex,\n            endIndex: endIndex,\n            pages: pages,\n            isNarrow: isNarrow\n        };\n    }\n \n    render() {\n        var pager = this.state.pager;\n \n        if (!pager.pages || pager.pages.length <= 1) {\n            // don't display pager if there is only 1 page\n            return null;\n        }\n \n        return (\n            <ButtonGroup>\n                <Button iconCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"left\"\n\t\t\t\t\t\ticonPosition=\"left\" label=\"First\" variant=\"neutral\" onClick={() => this.setPage(1)} disabled={pager.currentPage === 1} />\n                <Button iconCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"chevronleft\"\n\t\t\t\t\t\ticonPosition=\"left\" variant=\"neutral\" onClick={() => this.setPage(pager.currentPage - 1)} disabled={pager.currentPage === 1} />\n                {pager.pages.map((page, index) => {\n                    return (\n                        <Button key={'SLDSPaginator' + Date.now() + index} label={page} variant={pager.currentPage === page ? 'brand' : 'neutral'} onClick={() => this.setPage(page)} />\n                    )\n                })}\n                {pager.isNarrow && pager.currentPage >= (pager.totalPages - 3) && (\n                    <Tooltip\n                        align=\"top right\"\n                        content=\"The list is too long, try adding more filters to optimize the results.\"\n                    >\n                        <Button label=\"&middot;&middot;&middot;\" variant=\"neutral\" />\n                    </Tooltip>\n                )}\n                <Button iconCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"chevronright\"\n\t\t\t\t\t\ticonPosition=\"right\" variant=\"neutral\" onClick={() => this.setPage(pager.currentPage + 1)} disabled={pager.currentPage === pager.totalPages} />\n                <Button iconCategory=\"utility\"\n\t\t\t\t\t\ticonName=\"right\"\n\t\t\t\t\t\ticonPosition=\"right\" label=\"Last\" variant=\"neutral\" onClick={() => this.setPage(pager.totalPages)} disabled={pager.currentPage === pager.totalPages} />\n            </ButtonGroup>\n        );\n    }\n}\n \nSLDSPaginator.propTypes = propTypes;\nSLDSPaginator.defaultProps = defaultProps;\nexport default SLDSPaginator;","import React from 'react';\n\nimport {Spinner, Combobox} from '@salesforce/design-system-react';\n\nimport {$, baseUrl, GetParams} from '../lib/grax-data-lake';\n\nimport _ from 'lodash';\n\nimport {comboboxFilterAndLimit} from '../lib/utils';\n\n\nexport default class GRAXObjectCombobox extends React.Component {\n    constructor(props) {\n\t\tsuper(props);\n\n\t\tthis.state = {\n            options: [],\n\t\t\tinputValue: '',\n            selection: [],\n            isLoaded: false,\n            error: null\n\t\t};\n    }\n    \n    componentDidMount() {\n        $.ajax({\n            type: 'GET',\n            //dataType: 'jsonp',\n            url: baseUrl + '/grax-app/grax-data-lake/getDataTypes' + GetParams({action:'load'}),\n            data: {},\n            success: function(data) {\n                if(this.props.excludeIds) {\n                    data = _.filter(data, (item) => {\n                        return this.props.excludeIds.indexOf(item.id) === -1;\n                    });\n                }\n\n                this.setState({\n                    options: data,\n                    isLoaded: true\n                });\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(xhr, status, err);\n\n                this.setState({\n                    isLoaded: true,\n                    error: err.toString()\n                });\n            }.bind(this)\n        });\n    }\n\n    render() {\n        if (this.state.error) {\n            return <div>Error: {this.state.error}</div>;\n        } else if (!this.state.isLoaded) {\n            return (\n                <div style={{ position: 'relative', height: '2rem' }}>\n                    <Spinner size=\"small\" variant=\"base\" />\n                </div>\n            );\n        } else {\n            return (\n                <React.Fragment>                    \n                    <Combobox\n                        classNameMenu={'scrollable-GRAXObjectCombobox'}\n                        events={{\n                            onChange: (event, { value }) => {\n                                this.setState({\n                                    inputValue: value\n                                });\n\n                                if (this.props.onChange) {\n                                    this.props.onChange(event, value);\n                                }\n                            },\n                            onRequestRemoveSelectedOption: (event, data) => {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n\n                                if (this.props.onRequestRemoveSelectedOption) {\n                                    this.props.onRequestRemoveSelectedOption(event, data.selection);\n                                }\n                            },\n                            onSelect: (event, data) => {\n                                this.setState({\n                                    inputValue: '',\n                                    selection: data.selection,\n                                });\n\n                                if (this.props.onSelect) {\n                                    this.props.onSelect(event, data.selection);\n                                }\n                            },\n                        }}\n                        labels={{\n                            placeholder: 'Search GRAX Table',\n                        }}\n                        options={comboboxFilterAndLimit({\n                            inputValue: this.state.inputValue,\n                            limit: 1000,\n                            options: this.state.options,\n                            selection: this.state.selection\n                        })}\n                        selection={this.state.selection}\n                        value={this.state.inputValue}\n                        variant=\"inline-listbox\"\n                        required={true}\n                    />\n                </React.Fragment>\n            );\n        }\n    }\n}","/* eslint-disable no-restricted-globals */\nimport React from \"react\";\n\nimport {\n  Spinner,\n  Button,\n  DataTable,\n  DataTableColumn,\n  Modal,\n  Checkbox\n} from \"@salesforce/design-system-react\";\nimport SLDSPaginator from \"./SLDSPaginator\";\n\nimport { $, baseUrl, GetParams } from \"../lib/grax-data-lake\";\nimport { moment, SF_DATETIME_REGEXP, DATE_FORMAT, DATETIME_FORMAT, TZ } from \"../lib/utils\";\n\nimport _ from \"lodash\";\n\nconst ROWSXPAGE = 100;\n\nexport default class GRAXDeleteDataTable extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      sortColumn: \"Id\",\n      sortDirection: \"asc\",\n      chunks: [],\n      items: [],\n      extraInfo: {},\n      page: 0,\n      selection: [],\n      isLoaded: false,\n      isLoading: false,\n      deleteConfirmIsOpen: false,\n      deleteConfirmIsChecked: false,\n      deleteConfirmCallback: () => {},\n      deleteConfirmTotal: 0\n    };\n  }\n\n  shouldComponentUpdate(nextProps, nextState) {\n    return (\n      this.props.renderKey !== nextProps.renderKey ||\n      this.state.items !== nextState.items ||\n      this.state.selection !== nextState.selection ||\n      this.state.isLoaded !== nextState.isLoaded ||\n      this.state.isLoading !== nextState.isLoading ||\n      this.state.sortColumn !== nextState.sortColumn ||\n      this.state.sortDirection !== nextState.sortDirection ||\n      this.state.deleteConfirmIsOpen !== nextState.deleteConfirmIsOpen ||\n      this.state.deleteConfirmIsChecked !== nextState.deleteConfirmIsChecked\n    );\n  }\n\n  getDataHandler(page, sortColumn, sortDirection) {\n    const _sort = sortColumn + \" \" + sortDirection;\n\n    this.setState({\n      isLoading: true,\n      page: page,\n      sortColumn: sortColumn,\n      sortDirection: sortDirection\n    });\n\n    $.ajax({\n      type: \"GET\",\n      //dataType: 'jsonp',\n      url:\n        baseUrl +\n        \"/grax-app/grax-data-lake\" +\n        GetParams({\n          action: \"load\",\n          dataIndex: this.props.dataIndex,\n          _select:\n            _.union(this.props.columns, this.props.hiddenColumns, [\n              \"Id\",\n              \"graxorgid\",\n              \"attributes.type\"\n            ]).join(\",\") || \"Id\",\n          _q: this.props.filterQuery,\n          _limit: ROWSXPAGE,\n          _from: ROWSXPAGE * page,\n          _sort: _sort,\n          _includeMetadata: true\n        }),\n      /*data: {\n                _select: this.props.columns.join(',')\n            },*/\n      success: (data) => {\n        let results = data.results;\n\n        if (this.props.filterFunction) {\n          results = this.props.filterFunction(results);\n        }\n\n        results = _.map(results, (item, i) => {\n          _.forEach(item, (val, key) => {\n            if (typeof val == \"string\") {\n              if (SF_DATETIME_REGEXP.test(val)) {\n                const m = moment(val);\n\n                if (m.isValid()) {\n                  item[key] = m\n                    .tz(TZ)\n                    .format(m._i.indexOf(\":\") !== -1 ? DATETIME_FORMAT : DATE_FORMAT);\n                }\n              }\n            }\n\n            if (typeof val == \"boolean\") {\n              item[key] = val ? \"true\" : \"false\";\n            }\n          });\n\n          return {\n            ...item,\n            ...{ id: i.toString() }\n          };\n        });\n\n        this.setState({\n          page: 0,\n          data: results,\n          extraInfo: data.extraInfo || { total: 0, size: ROWSXPAGE, totalRetrieved: 0 },\n          items: results,\n          isLoaded: true,\n          isLoading: false\n        });\n      },\n      error: (xhr, status, err) => {\n        console.error(xhr, status, err);\n\n        this.setState({\n          isLoaded: true,\n          isLoading: false,\n          items: [],\n          error: err.toString()\n        });\n      }\n    });\n  }\n\n  componentDidMount() {\n    this.getDataHandler(0, this.state.sortColumn, this.state.sortDirection);\n  }\n\n  handleChanged(event, data) {\n    this.setState({ selection: data.selection.slice(0, 10) });\n    console.log(event, data);\n  }\n\n  handleSort(sortColumn, ...rest) {\n    if (sortColumn.property) {\n      this.getDataHandler(this.state.page, sortColumn.property, sortColumn.sortDirection);\n    }\n  }\n\n  render() {\n    return this.state.isLoaded ? (\n      <div>\n        <div style={{ position: \"relative\" }}>\n          {this.state.isLoading && <Spinner size=\"large\" variant=\"brand\" />}\n          <DataTable\n            assistiveText={{\n              actionsHeader: \"actions\",\n              columnSort: \"sort this column\",\n              columnSortedAscending: \"asc\",\n              columnSortedDescending: \"desc\",\n              selectAllRows: \"all rows\",\n              selectRow: \"select this row\"\n            }}\n            fixedLayout\n            items={this.state.items}\n            id=\"GRAXDeleteDataTable\"\n            onRowChange={this.handleChanged.bind(this)}\n            onSort={this.handleSort.bind(this)}\n            selection={this.state.selection}\n            selectRows={true}\n          >\n            {this.props.columns.map(columnName => (\n              <DataTableColumn\n                key={\"col\" + columnName}\n                id={columnName}\n                isSorted={this.state.sortColumn === columnName}\n                label={columnName} // TODO\n                property={columnName}\n                sortable={\n                  this.props.sortableColumns == null ||\n                  this.props.sortableColumns.indexOf(columnName) !== -1\n                }\n                sortDirection={this.state.sortDirection}\n              />\n            ))}\n          </DataTable>\n        </div>\n\n        <div className=\"-x-small-buttons--horizontal slds-p-top_small\">\n          <SLDSPaginator\n            totalItems={this.state.items.length > 0 ? this.state.extraInfo.total : 0}\n            pageSize={ROWSXPAGE}\n            onChangePage={(page, isInitialLoad) => {\n              if (!isInitialLoad) {\n                this.getDataHandler(page - 1, this.state.sortColumn, this.state.sortDirection);\n              }\n            }}\n          />\n        </div>\n\n        <div className=\"-x-small-buttons--horizontal slds-p-top_medium\">\n          <Button\n            label=\"Delete Selection\"\n            disabled={this.state.selection.length < 1 || this.state.isLoading}\n            onClick={() => {\n              this.setState({\n                deleteConfirmIsOpen: true,\n                deleteConfirmIsChecked: false,\n                deleteConfirmTotal: this.state.selection.length,\n                deleteConfirmCallback: () => {\n                  if (\n                    this.state.deleteConfirmIsChecked &&\n                    confirm(\"Are you sure that you want to delete the selected records?\")\n                  ) {\n                    $.ajax({\n                      type: \"POST\",\n                      url:\n                        baseUrl +\n                        \"/grax-app/grax-data-lake/deleteAPI\" +\n                        GetParams({\n                          action: \"delete\"\n                        }),\n                      contentType: \"application/json; charset=utf-8\",\n                      data: JSON.stringify(\n                        _.map(this.state.selection, item => {\n                          return _.pick(item, [\n                            \"Id\",\n                            \"graxorgid\",\n                            \"_id\",\n                            \"_type\",\n                            \"_index\",\n                            \"attributes.type\"\n                          ]);\n                        })\n                      ),\n                      success: data => {\n                        alert(data.state);\n                      }\n                    });\n\n                    this.setState({\n                      selection: [],\n                      deleteConfirmIsOpen: false,\n                      deleteConfirmCallback: () => {},\n                      deleteConfirmTotal: 0\n                    });\n                  }\n                }\n              });\n            }}\n          />\n\n          {/*<Button label=\"Delete All\" disabled={this.state.isLoading} onClick={() => {\n                        this.setState({\n                            deleteConfirmIsOpen: true,\n                            deleteConfirmIsChecked: false,\n                            deleteConfirmTotal: this.state.extraInfo.total,\n                            deleteConfirmCallback: (() => {\n                                if(this.state.deleteConfirmIsChecked && confirm('Are you sure that you want to delete the filtered records?')) {\n                                    $.ajax({\n                                        type: 'POST',\n                                        url: baseUrl + '/grax-app/grax-data-lake/deleteAll' + GetParams({\n                                            action: 'delete',\n                                        }),\n                                        contentType: \"application/json; charset=utf-8\",\n                                        data: JSON.stringify({\n                                            dataIndex: this.props.dataIndex,\n                                            _q: this.props.filterQuery,\n                                            _sort: this.state.sortColumn + ' ' + this.state.sortDirection\n                                        }),\n                                        success: function(data) {\n                                            alert(data.state);\n                                        }.bind(this)\n                                    });\n\n                                    this.setState({\n                                        selection: [],\n                                        deleteConfirmIsOpen: false,\n                                        deleteConfirmCallback: (() => {}),\n                                        deleteConfirmTotal: 0\n                                    });\n                                }\n                            })\n                        });\n                    }} />*/}\n        </div>\n\n        <Modal\n          dismissible={true}\n          footer={[\n            <div key=\"agree\" class=\"slds-p-bottom_small\">\n              <Checkbox\n                assistiveText={{\n                  label: \"I understand the risks\"\n                }}\n                id=\"delete-confirm\"\n                labels={{\n                  label: \"I understand the risks\"\n                }}\n                onChange={e => {\n                  this.setState({\n                    deleteConfirmIsChecked: e.target.checked\n                  });\n                }}\n              />\n            </div>,\n            <Button\n              key=\"cancelBtn\"\n              label=\"Cancel\"\n              onClick={() => {\n                this.setState({\n                  deleteConfirmIsOpen: false,\n                  deleteConfirmIsChecked: false\n                });\n              }}\n            />,\n            <Button\n              key=\"deleteBtn\"\n              label=\"Delete\"\n              onClick={this.state.deleteConfirmCallback}\n              variant=\"destructive\"\n              disabled={!this.state.deleteConfirmIsChecked}\n            />\n          ]}\n          isOpen={this.state.deleteConfirmIsOpen}\n          onRequestClose={() => {\n            this.setState({\n              deleteConfirmIsOpen: false,\n              deleteConfirmIsChecked: false\n            });\n          }}\n          prompt=\"error\"\n          size=\"medium\"\n          align=\"top\"\n          dismissOnClickOutside={false}\n          title={\n            <span>\n              Delete <b>{this.state.deleteConfirmTotal}</b> record(s)\n            </span>\n          }\n        >\n          <div className=\"slds-m-around_medium\">\n            Please confirm that you want to delete these record(s) from your GRAX Datalake.\n            <br />\n            After you confirm deletion, these records are NOT recoverable.\n          </div>\n        </Modal>\n      </div>\n    ) : (\n      <div style={{ position: \"relative\", height: \"2rem\" }}>\n        <Spinner size=\"medium\" variant=\"brand\" />\n      </div>\n    );\n  }\n}\n","///* global $ */\nimport React from 'react';\nimport _ from 'lodash';\n\nimport SLDSSection from './SLDSSection';\nimport GRAXObjectCombobox from './GRAXObjectCombobox';\nimport GRAXFieldsCombobox from './GRAXFieldsCombobox';\nimport GRAXDeleteDataTable from './GRAXDeleteDataTable';\nimport GRAXFilterGeneration from './GRAXFilterGeneration';\n\nimport {Button} from '@salesforce/design-system-react';\n\n\nconst ELASTIC_SORTABLE_TYPES = ['text', 'date', 'number'];\n\n\nexport default class GRAXDelete extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            selectedDataIndex: null,\n            retrieved: false,\n            retrievedCounter: 0,\n            _graxFields: null,\n            _graxFieldsSelection: null,\n            _graxFieldsSelectionList: null,\n            _filterFunction: ((dataList) => dataList),\n            _getFilterQuery: (() => null),\n            _filterValuesFields: [],\n            _graxSortableFields: null\n        }\n    }\n\n    hasFieldSelected() {\n        return this.state._graxFields != null && this.state._graxFieldsSelectionList != null && this.state._graxFieldsSelectionList.length > 0;\n    }\n    \n    render() {\n        return (\n            <div>\n                <SLDSSection isCollapsible={true} isOpen={true} title=\"Select the GRAX Table\">\n                    <GRAXObjectCombobox\n                        onSelect={(event, data) => {\n                            this.setState({\n                                selectedDataIndex: data[0]\n                            });\n                        }}\n                        excludeIds={['graxgrax_loggingindex']}\n                        onRequestRemoveSelectedOption={(event, data) => {\n                            this.setState({\n                                retrieved: false,\n                                selectedDataIndex: null,\n                                _graxFieldsSelection: null,\n                                _graxFieldsSelectionList: null\n                            });\n                        }}\n                    />\n\n                    <div className=\"slds-m-bottom_large\"></div>\n                </SLDSSection>\n                \n                <SLDSSection isCollapsible={true} isOpen={true} title=\"Search GRAX Table\">\n                    {\n                        this.state.selectedDataIndex != null\n                        ? (\n                            <GRAXFieldsCombobox\n                                dataIndex={this.state.selectedDataIndex.id}\n                                onLoad={(e, _graxFieldsSelection, _graxFields, _graxFieldsSelectionList) => {\n                                    console.log('onLoad', _graxFieldsSelection, _graxFieldsSelectionList, _graxFields);\n\n                                    this.setState({\n                                        _graxFields: _graxFields,\n                                        _graxFieldsSelection: _graxFieldsSelection,\n                                        _graxFieldsSelectionList: _graxFieldsSelectionList,\n                                        _graxSortableFields: _.reduce(_graxFields, (sortableFields, elasticField, i) => {\n                                            if(ELASTIC_SORTABLE_TYPES.indexOf(elasticField.type) !== -1) {\n                                                sortableFields.push(elasticField.id);\n                                            }\n                            \n                                            return sortableFields;\n                                        }, [])\n                                    });\n                                }}\n                                onChange={(e, _graxFieldsSelection, _graxFields, _graxFieldsSelectionList) => {\n                                    console.log('onChange', _graxFieldsSelection, _graxFieldsSelectionList);\n\n                                    var retrievedCounter = this.state.retrievedCounter;\n\n                                    if(_graxFieldsSelectionList.length > this.state._graxFieldsSelectionList.length) {\n                                        retrievedCounter++;\n                                    }\n\n                                    this.setState({\n                                        retrievedCounter: retrievedCounter,\n                                        _graxFieldsSelection: _graxFieldsSelection,\n                                        _graxFieldsSelectionList: _graxFieldsSelectionList\n                                    });\n                                }}\n                            />\n                        )\n                        : 'No GRAX Table selected...'\n                    }\n\n                    <div className=\"slds-m-bottom_large\"></div>\n                </SLDSSection>\n\n                <SLDSSection isCollapsible={true} isOpen={true} title=\"Filter Records\">\n                    {/*<Input\n                        iconLeft={\n                            <InputIcon\n                                assistiveText=\"Search\"\n                                name=\"search\"\n                                category=\"utility\"\n                            />\n                        }\n                        assistiveText={{ label: 'Search Term' }}\n                        id=\"record-query\"\n                        placeholder=\"Search\"\n                    />*/}\n                    {this.state._graxFieldsSelectionList != null && (\n                        <GRAXFilterGeneration\n                            SObjectType={this.state.selectedDataIndex.label}\n                            filterableFieldOptions={this.state._graxFields}\n                            onFilterValueChangeHandler={(_filterFunction, _filterValuesFields, _getFilterQuery) => {\n                                this.setState({\n                                    retrievedCounter: this.state.retrievedCounter,\n                                    _filterFunction: _filterFunction,\n                                    _getFilterQuery: _getFilterQuery,\n                                    _graxFieldsSelectionList: this.state._graxFieldsSelectionList,\n                                    _filterValuesFields: _filterValuesFields\n                                });\n                            }}\n                        />\n                    )}\n\n                    <div className=\"slds-m-bottom_large\"></div>\n                </SLDSSection>\n\n                <SLDSSection isCollapsible={true} isOpen={true} title=\"GRAX Stored Records\">\n                    <div className=\"-x-small-buttons--horizontal slds-p-bottom_large\">\n\t\t\t\t\t    <Button label=\"Retrieve\" variant=\"brand\" onClick={() => {\n                            this.setState({\n                                retrieved: this.state.selectedDataIndex != null,\n                                retrievedCounter: this.state.retrievedCounter + 1\n                            })\n                        }} disabled={!this.hasFieldSelected()} />\n                    </div>\n\n                    {this.state.retrieved && this.state._graxFieldsSelectionList && (\n                        <GRAXDeleteDataTable\n                            key={'GRAXDeleteDataTable_' + this.state.retrievedCounter}\n                            renderKey={'GRAXDeleteDataTable_' + this.state.retrievedCounter}\n                            columns={this.state._graxFieldsSelectionList}\n                            hiddenColumns={this.state._filterValuesFields}\n                            dataIndex={this.state.selectedDataIndex.id}\n                            filterFunction={this.state._filterFunction}\n                            filterQuery={this.state._getFilterQuery()}\n                            sortableColumns={this.state._graxSortableFields}\n                        />\n                    )}\n                </SLDSSection>\n            </div>\n        );\n    }\n}"],"sourceRoot":""}