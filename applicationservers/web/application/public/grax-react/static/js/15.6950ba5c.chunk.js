(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{111:function(e,t,a){"use strict";a.d(t,"a",function(){return b});var s=a(10),i=a(11),n=a(14),l=a(12),r=a(13),o=a(1),c=a.n(o),d=a(51),u=a(151),p=a(54),h=a(8),m=a.n(h),f=a(5),b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).state={options:[],inputValue:"",selection:[],isLoaded:!1,error:null},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){p.a.ajax({type:"GET",url:p.c+"/grax-app/grax-data-lake/getDataTypes"+Object(p.b)({action:"load"}),data:{},success:function(e){var t=this;this.props.excludeIds&&(e=m.a.filter(e,function(e){return-1===t.props.excludeIds.indexOf(e.id)})),this.setState({options:e,isLoaded:!0})}.bind(this),error:function(e,t,a){console.error(e,t,a),this.setState({isLoaded:!0,error:a.toString()})}.bind(this)})}},{key:"render",value:function(){var e=this;return this.state.error?c.a.createElement("div",null,"Error: ",this.state.error):this.state.isLoaded?c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{classNameMenu:"scrollable-GRAXObjectCombobox",events:{onChange:function(t,a){var s=a.value;e.setState({inputValue:s}),e.props.onChange&&e.props.onChange(t,s)},onRequestRemoveSelectedOption:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onRequestRemoveSelectedOption&&e.props.onRequestRemoveSelectedOption(t,a.selection)},onSelect:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onSelect&&e.props.onSelect(t,a.selection)}},labels:{placeholder:"Search GRAX Table"},options:Object(f.e)({inputValue:this.state.inputValue,limit:1e3,options:this.state.options,selection:this.state.selection}),selection:this.state.selection,value:this.state.inputValue,variant:"inline-listbox",required:!0})):c.a.createElement("div",{style:{position:"relative",height:"2rem"}},c.a.createElement(d.a,{size:"small",variant:"base"}))}}]),t}(c.a.Component)},118:function(e,t,a){"use strict";var s=a(1),i=a.n(s),n=a(0),l=a.n(n),r=a(3),o=a.n(r),c=a(15),d=a.n(c),u=a(60),p=a.n(u),h=a(2);function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function b(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y={assistiveText:l.a.shape({label:l.a.string}),children:l.a.node.isRequired,className:l.a.oneOfType([l.a.array,l.a.object,l.a.string]),labels:l.a.shape({error:l.a.string,label:l.a.string}),onChange:l.a.func,disabled:l.a.bool,required:l.a.bool,name:l.a.string,errorId:l.a.string,variant:l.a.oneOf(["base","button-group"])},_={assistiveText:{},labels:{},variant:"base"},E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),b(this,g(t).apply(this,arguments))}var a,s,n;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,i.a.Component),a=t,(s=[{key:"componentWillMount",value:function(){this.generatedName=d.a.generate(),this.generatedErrorId=d.a.generate()}},{key:"getErrorId",value:function(){if(this.hasError())return this.props.errorId||this.generatedErrorId}},{key:"getName",value:function(){return this.props.name||this.generatedName}},{key:"hasError",value:function(){return!!this.labels.error}},{key:"render",value:function(){var e=this;this.labels=this.props.labels?p()({},_.labels,this.props.labels):_.labels;var t=i.a.Children.map(this.props.children,function(t){return i.a.cloneElement(t,{name:e.getName(),onChange:e.props.onChange,"aria-describedby":e.getErrorId(),disabled:e.props.disabled})});return i.a.createElement("fieldset",{className:o()("slds-form-element",{"slds-has-error":this.labels.error})},i.a.createElement("legend",{className:o()("slds-form-element__legend","slds-form-element__label",this.props.assistiveText.label?"slds-assistive-text":"")},this.props.required?i.a.createElement("abbr",{className:"slds-required",title:"required"},"*"):null,this.props.assistiveText.label?this.props.assistiveText.label:this.labels.label),i.a.createElement("div",{className:o()("slds-form-element__control",this.props.className)},"button-group"===this.props.variant?i.a.createElement("div",{style:this.props.style,className:"slds-radio_button-group"},t):t,this.labels.error?i.a.createElement("div",{id:this.getErrorId(),className:"slds-form-element__help"},this.labels.error):null))}}])&&f(a.prototype,s),n&&f(a,n),t}();E.displayName=h.M,E.propTypes=y,E.defaultProps=_;var O=E;function x(){return(x=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function S(e,t){if(null==e)return{};var a,s,i=function(e,t){if(null==e)return{};var a,s,i={},n=Object.keys(e);for(s=0;s<n.length;s++)a=n[s],t.indexOf(a)>=0||(i[a]=e[a]);return i}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)a=n[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(i[a]=e[a])}return i}var N={assistiveText:l.a.shape({label:l.a.string}),children:l.a.node.isRequired,className:l.a.oneOfType([l.a.array,l.a.object,l.a.string]),labels:l.a.shape({error:l.a.string,label:l.a.string}),onChange:l.a.func,disabled:l.a.bool,required:l.a.bool,name:l.a.string,errorId:l.a.string},C=function(e){e.variant;var t=S(e,["variant"]);return i.a.createElement(O,x({variant:"button-group"},t))};C.displayName=h.L,C.propTypes=N,C.defaultProps={labels:{},assistiveText:{}};t.a=C},136:function(e){e.exports={component:"alert",status:"prod","display-name":"Alerts",classKey:"Alert","last-accessibility-review":{"date-iso-8601":"2018/01/18","commit-sha":"ad6b6c6523ee21cada11be5f7ea4d99abc530726"},"SLDS-component-path":"/components/alert",dependencies:[{component:"container",classKey:"AlertContainer"}],"site-stories":["/__examples__/info.jsx","/__examples__/warning.jsx","/__examples__/offline.jsx","/__examples__/error.jsx","/__examples__/dismissable.jsx"],"url-slug":"alerts"}},143:function(e,t,a){"use strict";a.r(t);var s=a(10),i=a(11),n=a(14),l=a(12),r=a(13),o=a(1),c=a.n(o),d=a(8),u=a.n(d),p=a(58),h=a(111),m=a(77),f=a(118),b=a(101),g=a(117),v=a(56),y=a(65),_=a(0),E=a.n(_),O=a(60),x=a.n(O),S=a(66),N=a(61);var C=function(){},F=a(136),j=a(2),R=a(119);function k(e){return(k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L={assistiveText:E.a.shape({closeButton:E.a.oneOfType([E.a.string,E.a.node])}),className:E.a.oneOfType([E.a.array,E.a.object,E.a.string]),dismissible:E.a.bool,icon:E.a.node,labels:E.a.shape({heading:E.a.oneOfType([E.a.string,E.a.node]),headingLink:E.a.oneOfType([E.a.string,E.a.node])}),onClickHeadingLink:E.a.func,onRequestClose:E.a.func,style:E.a.object,variant:E.a.oneOf(["error","info","offline","warning"]).isRequired},q={assistiveText:{closeButton:"Close"},labels:{},variant:"info"},I=function(e){function t(e){var a,s,i,n,l,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,i=w(t).call(this,e),a=!i||"object"!==k(i)&&"function"!==typeof i?A(s):i,n=A(a),r=function(e){a.closeButton=e,a.state.isInitialRender&&(R.a.storeActiveElement(),a.closeButton&&a.closeButton.focus(),a.setState({isInitialRender:!1}))},(l="saveButtonRef")in n?Object.defineProperty(n,l,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[l]=r,a.state={isInitialRender:!0},a}var a,s,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,c.a.Component),a=t,(s=[{key:"componentWillMount",value:function(){C(j.a,this.props,F)}},{key:"componentWillUnmount",value:function(){R.a.returnFocusToStoredElement()}},{key:"render",value:function(){var e=x()({},q.assistiveText,this.props.assistiveText),t=x()({},q.labels,this.props.labels),a=t.heading||this.props.content,s=this.props.onRequestClose||this.props.onDismiss,i={info:c.a.createElement(v.a,{category:"utility",name:"info"}),offline:c.a.createElement(v.a,{category:"utility",name:"offline"}),warning:c.a.createElement(v.a,{category:"utility",name:"warning"}),error:c.a.createElement(v.a,{category:"utility",name:"error"})},n=this.props.icon?this.props.icon:i[this.props.variant];this.props.iconName&&this.props.iconCategory&&(n=c.a.createElement(v.a,{category:this.props.iconCategory,name:this.props.iconName}));var l=c.a.cloneElement(n,{containerClassName:"slds-m-right_x-small",inverse:!0,size:"x-small"});return c.a.createElement("div",{className:Object(S.a)("slds-notify slds-notify_alert slds-theme_alert-texture",{"slds-theme_info":"info"===this.props.variant,"slds-theme_warning":"warning"===this.props.variant,"slds-theme_error":"error"===this.props.variant,"slds-theme_offline":"offline"===this.props.variant},this.props.className),role:"alert",style:this.props.style},c.a.createElement("span",{className:"slds-assistive-text"},{info:"info",warning:"warning",error:"error",offline:"offline"}[this.props.variant]),l,c.a.createElement("h2",null,a," ",t.headingLink?c.a.createElement("a",{onClick:this.props.onClickHeadingLink,href:"javascript:void(0);"},t.headingLink):null),this.props.dismissible?c.a.createElement(N.a,{assistiveText:{icon:e.closeButton},buttonRef:this.saveButtonRef,className:"slds-notify__close",iconCategory:"utility",iconName:"close",iconSize:"medium",inverse:!0,onClick:s,title:e.closeButton,variant:"icon"}):null)}}])&&V(a.prototype,s),i&&V(a,i),t}();I.defaultProps=q,I.displayName=j.a,I.propTypes=L;var D=I,z=a(51),H=a(54);a.d(t,"default",function(){return X});var M=Object(o.lazy)(function(){return a.e(23).then(a.bind(null,100))}),U=Object(o.lazy)(function(){return Promise.all([a.e(14),a.e(19)]).then(a.bind(null,152))}),B=["text","date","number"],P="Both",G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).state={checked:P},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"onChangeHandler",value:function(e){this.setState({checked:e}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=["Backed Up","Archived",P];return c.a.createElement("div",{className:"slds-p-bottom_medium"},c.a.createElement("div",{className:"slds-clearfix"},c.a.createElement("div",{className:"slds-float_left slds-p-right_xx-small"},c.a.createElement(f.a,{onChange:function(t){return e.onChangeHandler(t.target.value)},required:this.props.required,name:this.props.name,errorId:this.props.errorId,disabled:!0===this.props.disabled},u.a.map(t,function(e,t){return c.a.createElement(b.a,{key:"option"+t,id:"option"+t,label:e,value:e,checked:this.state.checked===e,variant:"button-group"})}.bind(this)))),c.a.createElement("div",{className:"slds-float_left",style:{margin:"0.41rem"}},c.a.createElement(g.a,{align:"top left",content:'Select one of the options, "Backed Up", "Archived", or "Both", below to display these records.',variant:"learnMore"}))))}}]),t}(c.a.Component),X=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).state={selectedDataIndex:null,retrieved:!1,retrievedCounter:0,_sfRequestsDisabled:!0,_restoreChildrens:!1,_checkIsUserActive:!0,_useGRAXHistoryOnly:!1,_updateRecordIfExist:!1,_sendNotification:!1,_currentOrgRecords:!0,_graxFields:null,_graxFieldsSelection:null,_graxFieldsSelectionList:null,_filterFunction:function(e){return e},_getFilterQuery:function(){return null},_filterValuesFields:[],_graxSortableFields:null,objectHasCustomMapping:!1,_archiveFilterQuery:null},a}return Object(r.a)(t,e),Object(i.a)(t,[{key:"hasFieldSelected",value:function(){return null!=this.state._graxFields&&null!=this.state._graxFieldsSelectionList&&this.state._graxFieldsSelectionList.length>0}},{key:"getFilterQuery",value:function(){var e=u.a.concat(this.state._getFilterQuery(),this.state._archiveFilterQuery);return this.state._currentOrgRecords&&e.push('(doc.graxorgid.keyword: "'+H.e+'")'),(e=u.a.remove(e,function(e){return null!=e}))&&e.length>0?e.join(" AND "):null}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"Disclaimers"},c.a.createElement("ol",null,c.a.createElement("li",null,"When restoring records in an environment please confirm that the following is true:"),c.a.createElement("ol",{className:"slds-list_ordered"},c.a.createElement("li",null,"Ensure that the destination environment has the same customizations and metadata as the source environment"),c.a.createElement("li",null,"Ensure that all workflows, APEX triggers, validation rules, process builders, duplication rules, etc. are disabled in the destination environment"),c.a.createElement("li",null,"If restoring in a partial or developer Sandbox, ensure that there is ample storage space for the data you are intending to restore in the destination environment"),c.a.createElement("li",null,'Ensure that your user has "modify all data" permission in the destination environment'),c.a.createElement("li",null,'If you are attempting to restore records where the owner is inactive, ensure that your user has the permission "Update records with inactive owners" set to true in the destination environment'))),c.a.createElement("div",{className:"slds-m-bottom_large"})),c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"Settings"},c.a.createElement("div",{className:"slds-grid slds-wrap"},c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"When disabled, only the parent record will be restored. When enabled, the parent and all related children will be enabled."},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Restore Child Records?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state._restoreChildrens,onChange:function(t){e.setState({_restoreChildrens:t})},assistiveText:{label:"Restore Child Records?"},variant:"toggle",labels:{toggleDisabled:"Restore Parent Record Only",toggleEnabled:"Restore Child Records"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"When disabled, the restore process queries your storage facility to determine if this record exists already in this SF environment. When enabled the process queries SF to see if this record already exists and will not create a duplicate."},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Skip Salesforce Queries?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:!this.state._sfRequestsDisabled,onChange:function(t){e.setState({_sfRequestsDisabled:!t})},assistiveText:{label:"Skip Salesforce Queries?"},variant:"toggle",labels:{toggleDisabled:"Query storage facility",toggleEnabled:"Query Salesforce"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:'When enabled, the user must have the setting "Update Records with Inactive Owners" set to true otherwise records assigned to an inactive user will NOT be created.'},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Assign Records to Inactive Users?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:!this.state._checkIsUserActive,onChange:function(t){e.setState({_checkIsUserActive:!t})},assistiveText:{label:"Assign Records to Inactive Users?"},variant:"toggle",labels:{toggleDisabled:"Assign records only to Active Users",toggleEnabled:"Assign records to Active or Inactive Users"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"Set it to TRUE if you don't want to double check that the restored records still exist in the destination Org."},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Use GRAXHistory only?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state._useGRAXHistoryOnly,onChange:function(t){e.setState({_useGRAXHistoryOnly:t})},assistiveText:{label:"Use GRAXHistory only?"},variant:"toggle",labels:{toggleDisabled:"Query SFDC to confirm record exists",toggleEnabled:"Query only GRAX History"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"Set it to TRUE if you want to update the previously restored records in the destination Org."},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Update records?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state._updateRecordIfExist,onChange:function(t){e.setState({_updateRecordIfExist:t})},assistiveText:{label:"Update records?"},variant:"toggle",labels:{toggleDisabled:"Only insert records",toggleEnabled:"Update records if exists"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"Notify User via Email when Process Completes"},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Send Notification?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state._sendNotification,onChange:function(t){e.setState({_sendNotification:t})},assistiveText:{label:"Send Notification?"},variant:"toggle",labels:{toggleDisabled:"Don't Send Notification",toggleEnabled:"Send Notification"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"Show records only from the current environment or all environments."},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Filter records?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:!this.state._currentOrgRecords,onChange:function(t){e.setState({_currentOrgRecords:!t,retrievedCounter:e.state.retrievedCounter+1})},assistiveText:{label:"Show records from all environments?"},variant:"toggle",labels:{toggleDisabled:"Current Environment",toggleEnabled:"All connected SF environments"}})))),c.a.createElement("div",{className:"slds-m-bottom_large"})),c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"Select the GRAX Table"},c.a.createElement(h.a,{onSelect:function(t,a){var s=!1,i=a[0];console.log(e.props.customMapping,i);var n=i.label;if(null!=e.props.customMapping){var l=e.props.customMapping[Object.keys(e.props.customMapping).find(function(e){return e.toLowerCase()===n.toLowerCase()})];l&&Object.keys(l).length>0&&(s=!0)}e.setState({selectedDataIndex:i,objectHasCustomMapping:s})},excludeIds:["graxgrax_loggingindex"],onRequestRemoveSelectedOption:function(t,a){e.setState({retrieved:!1,selectedDataIndex:null,_graxFieldsSelection:null,_graxFieldsSelectionList:null,objectHasCustomMapping:!1})}}),this.state.objectHasCustomMapping?c.a.createElement("div",null,c.a.createElement(D,{dismissible:!0,labels:{heading:'The selected object has a custom mapping defined. To review this custom mapping, click on the "Restore Mapping" tab and then select the object.'},onRequestClose:function(){e.setState({objectHasCustomMapping:!1})}})):null,c.a.createElement("div",{className:"slds-m-bottom_large"})),c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"Search GRAX Table"},null!=this.state.selectedDataIndex?c.a.createElement(o.Suspense,{fallback:c.a.createElement("div",{style:{position:"relative",height:"2rem"}},c.a.createElement(z.a,{size:"small",variant:"base"}))},c.a.createElement(M,{dataIndex:this.state.selectedDataIndex.id,onLoad:function(t,a,s,i){console.log("onLoad",a,i,s),e.setState({_graxFields:s,_graxFieldsSelection:a,_graxFieldsSelectionList:i,_graxSortableFields:u.a.reduce(s,function(e,t,a){return-1!==B.indexOf(t.type)&&e.push(t.id),e},[])})},onChange:function(t,a,s,i){console.log("onChange",a,i);var n=e.state.retrievedCounter;i.length>e.state._graxFieldsSelectionList.length&&n++,e.setState({retrievedCounter:n,_graxFieldsSelection:a,_graxFieldsSelectionList:i})}})):"No GRAX Table selected...",c.a.createElement("div",{className:"slds-m-bottom_large"})),c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"Filter Records"},c.a.createElement(G,{onChange:function(t){var a;t===P&&(a=null),"Backed Up"===t&&(a="(NOT doc.IsDeleted:true)"),"Archived"===t&&(a="(doc.IsDeleted:true)"),e.setState({_archiveFilterQuery:a,retrievedCounter:e.state.retrievedCounter+1})}}),null!=this.state._graxFieldsSelectionList&&c.a.createElement(m.b,{SObjectType:this.state.selectedDataIndex.label,filterableFieldOptions:this.state._graxFields,onFilterValueChangeHandler:function(t,a,s){e.setState({retrievedCounter:e.state.retrievedCounter,_filterFunction:t,_getFilterQuery:s,_graxFieldsSelectionList:e.state._graxFieldsSelectionList,_filterValuesFields:a})}}),c.a.createElement("div",{className:"slds-m-bottom_large"})),c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"GRAX Stored Records"},c.a.createElement("div",{className:"-x-small-buttons--horizontal slds-p-bottom_small"},c.a.createElement(N.a,{label:"Retrieve",variant:"brand",onClick:function(){e.setState({retrieved:null!=e.state.selectedDataIndex,retrievedCounter:e.state.retrievedCounter+1})},disabled:!this.hasFieldSelected()})),this.state.retrieved&&this.state._graxFieldsSelectionList&&c.a.createElement(o.Suspense,{fallback:c.a.createElement("div",{style:{position:"relative",height:"2rem"}},c.a.createElement(z.a,{size:"small",variant:"base"}))},c.a.createElement(U,{key:"GRAXRestoreDataTable_"+this.state.retrievedCounter,renderKey:"GRAXRestoreDataTable_"+this.state.retrievedCounter,columns:this.state._graxFieldsSelectionList,_graxFieldsSelection:this.state._graxFieldsSelection,hiddenColumns:this.state._filterValuesFields,dataIndex:this.state.selectedDataIndex.id,sfRequestsDisabled:this.state._sfRequestsDisabled,restoreChildrens:this.state._restoreChildrens,checkIsUserActive:this.state._checkIsUserActive,useGRAXHistoryOnly:this.state._useGRAXHistoryOnly,updateRecordIfExist:this.state._updateRecordIfExist,sendNotification:this.state._sendNotification,filterFunction:this.state._filterFunction,filterQuery:this.getFilterQuery(),sortableColumns:this.state._graxSortableFields}))))}}]),t}(c.a.Component)},58:function(e,t,a){"use strict";a.d(t,"a",function(){return p});var s=a(10),i=a(11),n=a(14),l=a(12),r=a(19),o=a(13),c=a(1),d=a.n(c),u=a(56),p=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(n.a)(this,Object(l.a)(t).call(this,e))).state={isOpen:!0===e.isOpen||void 0===e.isCollapsible},a.handleToggle=a.handleToggle.bind(Object(r.a)(a)),a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"handleToggle",value:function(e){var t=!this.state.isOpen;this.setState({isOpen:t}),this.props.onToggle&&this.props.onToggle(t),e.preventDefault()}},{key:"render",value:function(){var e=d.a.createElement("span",{className:"slds-truncate"+(this.props.isCollapsible?"":" slds-p-horizontal_small"),title:this.props.title},this.props.title);return d.a.createElement("div",{id:this.props.id||this.props.key,className:["slds-section",this.state.isOpen&&"slds-is-open",this.props.className].join(" ")},d.a.createElement("h3",{className:"slds-section__title slds-theme_shade"},this.props.isCollapsible?d.a.createElement("button",{className:"slds-button slds-section__title-action",onClick:this.handleToggle},d.a.createElement(u.a,{assistiveText:{label:this.props.title},category:"utility",name:"switch",size:"x-small",className:"slds-section__title-action-icon slds-button__icon slds-button__icon_left"}),e):e),this.state.isOpen&&d.a.createElement("div",{className:"slds-section__content"},this.props.children))}}]),t}(d.a.Component)},59:function(e,t,a){"use strict";function s(e){return function(e){if(Array.isArray(e)){for(var t=0,a=new Array(e.length);t<e.length;t++)a[t]=e[t];return a}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}a.d(t,"a",function(){return s})},66:function(e,t,a){"use strict";var s=a(3),i=a.n(s);t.a=function(){var e=i.a.apply(void 0,arguments);return""===e?void 0:e}},77:function(e,t,a){"use strict";var s=a(59),i=a(10),n=a(11),l=a(14),r=a(12),o=a(13),c=a(1),d=a.n(c),u=a(8),p=a.n(u),h=a(4),m=a.n(h),f=a(64),b=a.n(f),g=function(e){var t=e.inputValue,a=e.limit,s=void 0===a?10:a,i=e.options,n=e.selection,l=new RegExp(b()(t),"ig");return i.filter(function(e){var a=!!e.label&&e.label.match(l),s="separator"===e.type,i=!n.some(function(t){return t.id===e.id});return(!t||s||a)&&i}).splice(0,s)},v=a(151),y=a(51),_=a(65),E=a(142),O=a(155),x=a(61),S=a(54),N=a(5),C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={options:[],inputValue:"",selection:[],isLoaded:!1,error:null},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){S.a.ajax({type:"GET",url:S.c+"/grax-app/grax-data-lake/salesforce/sobjects/"+this.props.SObjectName+"/fields/"+this.props.fieldName+Object(S.b)({action:"load"}),data:{_select:"name,type,picklistValues"},success:function(e){this.setState({options:p.a.map(e.picklistValues||[],function(e,t){return{id:e.value,label:e.label}}),isLoaded:!0}),this.props.onLoad&&this.props.onLoad(!0)}.bind(this),error:function(e,t,a){console.error(e,t,a),this.setState({isLoaded:!0,error:a.toString()}),this.props.onLoad&&this.props.onLoad(!1,a)}.bind(this)})}},{key:"render",value:function(){var e=this;return this.state.error?d.a.createElement("div",null,"Error: ",this.state.error):this.state.isLoaded?null==this.state.options||0===this.state.options.length?(this.props.onElseComponent&&this.props.onRender(!1),this.props.elseComponent):(this.props.onLoad&&this.props.onRender(!0),d.a.createElement(d.a.Fragment,null,d.a.createElement(v.a,{classNameMenu:"scrollable-GRAXSFieldCombobox",events:{onChange:function(t,a){var s=a.value;e.setState({inputValue:s}),e.props.onChange&&e.props.onChange(t,s)},onRequestRemoveSelectedOption:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onRequestRemoveSelectedOption&&e.props.onRequestRemoveSelectedOption(t,a.selection)},onSelect:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onSelect&&e.props.onSelect(t,a.selection)},onRequestClose:function(t,a){e.props.onSelect&&e.state.inputValue&&e.props.onSelect(t,[{id:e.state.inputValue,label:e.state.inputValue}])}},labels:{placeholder:"Select Option"},options:Object(N.e)({inputValue:this.state.inputValue,limit:1e3,options:this.state.options,selection:this.state.selection}),selection:this.state.selection,value:this.state.inputValue,variant:this.props.variant||"inline-listbox",multiple:this.props.multiple||!1,required:!0}))):d.a.createElement("div",{style:{position:"relative",height:"2rem"}},d.a.createElement(y.a,{size:"small",variant:"base"}))}}]),t}(d.a.Component);a.d(t,"a",function(){return R}),a.d(t,"b",function(){return k});var F=function(e){return e.replace(/[\*\+\-=~><\"\?^\${}\(\)\:\!\/[\]\\\s]/g,"\\$&").replace(/\|\|/g,"\\||").replace(/\&\&/g,"\\&&").replace(/AND/g,"\\A\\N\\D").replace(/OR/g,"\\O\\R").replace(/NOT/g,"\\N\\O\\T")},j={text:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"contains",label:"contains",isNegated:!1},{id:"contains",label:"not contains",isNegated:!0},{id:"in",label:"in",isNegated:!1},{id:"in",label:"not in",isNegated:!0},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],date:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"gt",label:">",isNegated:!1},{id:"lt",label:"<",isNegated:!1},{id:"gte",label:">=",isNegated:!1},{id:"lte",label:"<=",isNegated:!1},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],number:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"gt",label:">",isNegated:!1},{id:"lt",label:"<",isNegated:!1},{id:"gte",label:">=",isNegated:!1},{id:"lte",label:"<=",isNegated:!1},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],long:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"gt",label:">",isNegated:!1},{id:"lt",label:"<",isNegated:!1},{id:"gte",label:">=",isNegated:!1},{id:"lte",label:"<=",isNegated:!1},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],boolean:[{id:"eq",label:"==",isNegated:!1},{id:"exists",label:"exists",isNegated:!1}]},R=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(r.a)(t).call(this,e)))._isMounted=!1,a.state={inputValue:"",selection:[],isOpened:!1},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.selection&&(console.log(this.props.selection),this.setState({selection:this.props.selection}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"filterOptionsHandler",value:function(){var e=this.props.options||[];return this.props.filterOptionsHandler&&this.state.isOpened&&(e=this.props.filterOptionsHandler(e)),g({inputValue:this.state.inputValue,limit:1e3,options:e,selection:this.state.selection})}},{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement(v.a,{classNameMenu:"scrollable-GRAXFilterableCombobox",events:{onChange:function(t,a){var s=a.value;e.setState({inputValue:s}),e.props.onChange&&e.props.onChange(t,s)},onRequestRemoveSelectedOption:function(t,a){e._isMounted&&e.setState({inputValue:"",selection:a.selection}),e.props.onRequestRemoveSelectedOption&&e.props.onRequestRemoveSelectedOption(t,a.selection)},onSelect:function(t,a){e._isMounted&&e.setState({inputValue:"",selection:a.selection}),e.props.onSelect&&e.props.onSelect(t,a.selection)},onOpen:function(t,a){e._isMounted&&e.setState({isOpened:!0})},onClose:function(t,a){e._isMounted&&e.setState({isOpened:!1})}},labels:{placeholder:this.props.placeholder},options:this.filterOptionsHandler(),selection:this.state.selection,value:this.state.inputValue,variant:this.props.variant||"inline-listbox",required:!0,multiple:!1}))}}]),t}(d.a.Component),k=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(l.a)(this,Object(r.a)(t).call(this,e))).state={_filterValues:null,_error:null,_filterValuesFields:[]},a}return Object(o.a)(t,e),Object(n.a)(t,[{key:"isLoaded",value:function(){return this.state._error||null!=this.props.filterableFieldOptions}},{key:"getFilterValueStruct",value:function(){return{id:null,value:null,operator:"eq",isNegated:!1,isActive:!0,selectedField:null}}},{key:"getFilterValuesList",value:function(e){var t=this;return p.a.map(e,function(e,a){var s=t.getFilterValueStruct();return s.id=a,s.value=e.value,s.operator=e.operator,s.isNegated=e.isNegated,s.isActive=e.isActive,s.selectedField=p.a.filter(t.props.filterableFieldOptions,function(e,t){return e&&e.id===a})[0]||null,s})}},{key:"componentDidMount",value:function(){var e=this.props.filterValues||{},t=Object.keys(e);this.setState({_filterValues:e,_filterValuesFields:t,_filterValuesList:this.getFilterValuesList(e)}),this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this),t,this.getFilterQuery.bind(this),this.state._filterValues)}},{key:"onFilterValueChangeHandler",value:function(e,t){var a=this.state._filterValues;if(t&&t.length>0){var s=t[0]||null;e.id=s.id,e.selectedField=s,a[e.id]={value:e.value,isActive:e.isActive,operator:e.operator,isNegated:e.isNegated,selectedField:s}}else delete a[e.id],e.id=null,e.selectedField=null;var i=Object.keys(a);this.setState({_filterValues:a,_filterValuesFields:i,_filterValuesList:this.state._filterValuesList}),this.props.onFilterValueChangeHandler&&this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this),i,this.getFilterQuery.bind(this),this.state._filterValues)}},{key:"addAnotherFieldHandler",value:function(){var e=this.state._filterValuesList;0!==e.length&&null==e[e.length-1].id||(e.push(this.getFilterValueStruct()),this.setState({_filterValuesList:e}))}},{key:"removeFieldHandler",value:function(e){var t=this.state._filterValues,a=this.state._filterValuesList;delete t[a[e].id],a.splice(e,1),this.setState({_filterValues:t,_filterValuesFields:Object.keys(t),_filterValuesList:a})}},{key:"getFilterFunction",value:function(e){var t=this;return p.a.filter(e,function(e,a){var i=!0;return p.a.forEach(t.state._filterValues,function(t,a){if(t.isActive){var n=t.operator,l=t.value;"in"!==n&&Array.isArray(l)?l=l.length>0?l[0]:null:"in"!==n||Array.isArray(l)||(l=l.split(" OR "));var r=t.isNegated,o=!1,c=e[a];"eq"!==n||""===l||Boolean(l)||(n="exists",r=!1),Array.isArray(l)&&"in"!==n&&(l=l.length>0?l[0]:null),"date"===t.selectedField.type&&((c=m()(c))&&(c=c.format("YYYY-MM-DD")),(l=m()(l))&&(l=l.format("YYYY-MM-DD"))),"boolean"!==t.selectedField.type||Boolean(l)||(l=!0,r=!0),o="exists"===n?Boolean(c)===Boolean(l):"contains"===n?String(c).toLowerCase().includes(l.toLowerCase()):"in"===n?l&&l.length>0&&p.a.includes.apply(p.a,[l].concat(Object(s.a)("string"===typeof c?[c]:c))):p.a[n](c,l),i&=r?!o:o}}),i})||[]}},{key:"getFilterQuery",value:function(){var e={gt:">",gte:">=",lt:"<",lte:"<="},t=[];return p.a.forEach(this.state._filterValues,function(a,s){var i=a.operator;if(a.isActive&&!i.startsWith("_")){var n=a.value;"in"!==i&&Array.isArray(n)?n=n.length>0?F(n[0]):null:"in"!==i||Array.isArray(n)||(n=p.a.map(n.split(" OR "),function(e){return F(e)}));var l=a.isNegated;"eq"===i&&l&&!Boolean(n)&&(i="exists",n=l),"exists"===i&&(l=!Boolean(n));var r="(";if(l&&(r+="NOT "),r+="(","boolean"!==a.selectedField.type||Boolean(n)||(r+="NOT "),"in"===i){var o=[];p.a.each(n,function(e,t){o.push('"'+e+'"')}),r+="doc."+s+":("+o.join(" OR ")+")"}else if("exists"===i)r+="_exists_:doc."+s;else if(r+="doc."+s+":","eq"===i)"boolean"===a.selectedField.type?r+="true":"number"===a.selectedField.type?r+=n?parseFloat(n):"":"date"===a.selectedField.type?r+=n?m()(n).format("YYYY-MM-DD"):"":r+='"'+n+'"';else if("contains"===i){var c=n?String(n):"";r+="(",r+='"'+F(n)+'"',r+=" OR ",r+=F(c.toLowerCase()),r+=" OR ",r+="*"+F(c.toLowerCase())+"*",r+=")"}else"date"===a.selectedField.type?r+=e[i]+(n?m()(n).format("YYYY-MM-DD"):""):r+=e[i]+(n?F(n):"");r+="))",t.push(r)}}),t.length>0?t.join(" AND "):null}},{key:"getSelectionValues",value:function(e){return e?p.a.reduce(e,function(e,t){return e.push(t.id),e},[]):null}},{key:"render",value:function(){var e=this;return this.state._error?d.a.createElement("div",null,"Error: ",this.state._error):this.isLoaded()?d.a.createElement(d.a.Fragment,null,d.a.createElement("table",{className:"slds-table slds-table_cell-buffer slds-table_bordered slds-no-row-hover"},d.a.createElement("thead",null,d.a.createElement("tr",{className:"slds-line-height_reset"},d.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},d.a.createElement("div",{className:"slds-truncate",title:"Field"},"Field")),d.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},d.a.createElement("div",{className:"slds-truncate",title:"Operator"},"Operator")),d.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},d.a.createElement("div",{className:"slds-truncate",title:"Filter Value"},"Filter Value")),d.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},d.a.createElement("div",{className:"slds-truncate",title:"Is Active?"},"Is Active?")),d.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},d.a.createElement("div",{className:"slds-truncate"})))),d.a.createElement("tbody",null,p.a.map(this.state._filterValuesList,function(e,t){var a=this,s=e.id,i=e.selectedField||{};return d.a.createElement("tr",{className:"slds-hint-parent",key:"fieldName: "+(s||"")},d.a.createElement("td",{"data-label":"Field",style:{width:"30vw"}},s||d.a.createElement(R,{placeholder:"Select Field to filter",options:this.props.filterableFieldOptions||[],filterOptionsHandler:function(e){return p.a.filter(e,function(e,t){return e&&-1===a.state._filterValuesFields.indexOf(e.id)})||[]},selection:p.a.find(this.props.filterableFieldOptions,function(e){return e&&e.id===s})||[],onSelect:function(t,s){return a.onFilterValueChangeHandler(e,s)},onRequestRemoveSelectedOption:function(t,s){return a.onFilterValueChangeHandler(e,s)}})),d.a.createElement("td",{"data-label":"Operator",style:{width:"20vw"}},i&&("boolean"===i.type&&j[i.type].label||d.a.createElement(R,{placeholder:"Select Operator to Compare",options:j[i.type]||[],selection:[],variant:"readonly",onSelect:function(t,s){s[0].type=s[0].type||e.selectedField.type,e.operator=s[0].id,e.isNegated=s[0].isNegated,e.type!==s[0].type&&(e.value=null,"boolean"===s[0].type&&(e.value=!1),"text"===s[0].type&&(e.value=""),e.type=s[0].type),a.onFilterValueChangeHandler(e,[e.selectedField])}}))),d.a.createElement("td",{"data-label":"Filter Value",style:{width:"30vw"}},i&&(("boolean"===i.type||"exists"===e.operator)&&d.a.createElement(_.a,{defaultChecked:e.value,onChange:function(t){e.value=t,a.onFilterValueChangeHandler(e,[e.selectedField])}})||("text"===i.type||"number"===i.type||"long"===i.type)&&d.a.createElement(C,{SObjectName:this.props.SObjectType,fieldName:i.id,onSelect:function(t,s){e.value=a.getSelectionValues(s),a.onFilterValueChangeHandler(e,[e.selectedField])},onRequestRemoveSelectedOption:function(t,s){e.value=a.getSelectionValues(s),a.onFilterValueChangeHandler(e,[e.selectedField])},elseComponent:d.a.createElement(E.a,{defaultValue:e.value,assistiveText:{label:i.label},id:i.id,onBlur:function(t){e.value=t.target.value,a.onFilterValueChangeHandler(e,[e.selectedField])}}),onRender:function(e){},multiple:"in"===e.operator,variant:"in"===e.operator?"base":"inline-listbox"})||"date"===i.type&&d.a.createElement(O.a,{value:e.value,onChange:function(t,s){e.value=s.date,a.onFilterValueChangeHandler(e,[e.selectedField])},className:"inline-table",menuPosition:"relative",hasStaticAlignment:!0}))),d.a.createElement("td",{"data-label":"Is Active?",style:{width:"10vw"}},d.a.createElement(_.a,{defaultChecked:e.isActive,onChange:function(t){e.isActive=t,a.onFilterValueChangeHandler(e,[e.selectedField])}})),d.a.createElement("td",{"data-label":"Actions",style:{width:"10vw"}},d.a.createElement(x.a,{label:"Remove Filter",variant:"base",onClick:function(){a.removeFieldHandler(t)}})))}.bind(this)))),d.a.createElement("div",{className:"slds-p-top_medium"},d.a.createElement(x.a,{label:"Add Filter",variant:"brand",onClick:function(){e.addAnotherFieldHandler()},disabled:null==this.props.filterableFieldOptions||0===this.props.filterableFieldOptions.length||this.props.filterableFieldOptions.length===this.state._filterValuesFields.length}))):d.a.createElement("div",{style:{position:"relative",height:"5rem"}},d.a.createElement(y.a,{size:"small",variant:"base"}))}}]),t}(d.a.Component)}}]);
//# sourceMappingURL=15.6950ba5c.chunk.js.map