(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[4],{196:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var s=a(48),l=a(49),i=a(52),n=a(50),r=a(54),o=a(51),c=a(1),d=a.n(c),u=a(7),p=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(n.a)(t).call(this,e))).state={isOpen:!0===e.isOpen||void 0===e.isCollapsible},a.handleToggle=a.handleToggle.bind(Object(r.a)(a)),a}return Object(o.a)(t,e),Object(l.a)(t,[{key:"handleToggle",value:function(e){var t=!this.state.isOpen;this.setState({isOpen:t}),this.props.onToggle&&this.props.onToggle(t),e.preventDefault()}},{key:"render",value:function(){var e=d.a.createElement("span",{className:"slds-truncate"+(this.props.isCollapsible?"":" slds-p-horizontal_small"),title:this.props.title},this.props.title);return d.a.createElement("div",{id:this.props.id||this.props.key,className:["slds-section",this.state.isOpen&&"slds-is-open",this.props.className].join(" ")},d.a.createElement("h3",{className:"slds-section__title slds-theme_shade"},this.props.isCollapsible?d.a.createElement("button",{className:"slds-button slds-section__title-action",onClick:this.handleToggle},d.a.createElement(u.a,{assistiveText:{label:this.props.title},category:"utility",name:"switch",size:"x-small",className:"slds-section__title-action-icon slds-button__icon slds-button__icon_left"}),e):e),this.state.isOpen&&d.a.createElement("div",{className:"slds-section__content"},this.props.children))}}]),t}(d.a.Component)},197:function(e,t,a){"use strict";var s=a(71),l=a(48),i=a(49),n=a(52),r=a(50),o=a(51),c=a(1),d=a.n(c),u=a(35),p=a.n(u),h=a(20),m=a.n(h),f=a(187),b=a(173),g=a(70),v=a(63),y=a(174),_=a(223),E=a(15),O=a(53),x=a(11),S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(n.a)(this,Object(r.a)(t).call(this,e))).state={options:[],inputValue:"",selection:[],isLoaded:!1,error:null},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){O.a.ajax({type:"GET",url:O.c+"/grax-app/grax-data-lake/salesforce/sobjects/"+this.props.SObjectName+"/fields/"+this.props.fieldName+Object(O.b)({action:"load"}),data:{_select:"name,type,picklistValues"},success:function(e){this.setState({options:p.a.map(e.picklistValues||[],(function(e,t){return{id:e.value,label:e.label}})),isLoaded:!0}),this.props.onLoad&&this.props.onLoad(!0)}.bind(this),error:function(e,t,a){console.error(e,t,a),this.setState({isLoaded:!0,error:a.toString()}),this.props.onLoad&&this.props.onLoad(!1,a)}.bind(this)})}},{key:"render",value:function(){var e=this;return this.state.error?d.a.createElement("div",null,"Error: ",this.state.error):this.state.isLoaded?null==this.state.options||0===this.state.options.length?(this.props.onElseComponent&&this.props.onRender(!1),this.props.elseComponent):(this.props.onLoad&&this.props.onRender(!0),d.a.createElement(d.a.Fragment,null,d.a.createElement(b.a,{classNameMenu:"scrollable-GRAXSFieldCombobox",events:{onChange:function(t,a){var s=a.value;e.setState({inputValue:s}),e.props.onChange&&e.props.onChange(t,s)},onRequestRemoveSelectedOption:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onRequestRemoveSelectedOption&&e.props.onRequestRemoveSelectedOption(t,a.selection)},onSelect:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onSelect&&e.props.onSelect(t,a.selection)},onRequestClose:function(t,a){e.props.onSelect&&e.state.inputValue&&e.props.onSelect(t,[{id:e.state.inputValue,label:e.state.inputValue}])}},labels:{placeholder:"Select Option"},options:Object(x.e)({inputValue:this.state.inputValue,limit:1e3,options:this.state.options,selection:this.state.selection}),selection:this.state.selection,value:this.state.inputValue,variant:this.props.variant||"inline-listbox",multiple:this.props.multiple||!1,required:!0}))):d.a.createElement("div",{style:{position:"relative",height:"2rem"}},d.a.createElement(g.a,{size:"small",variant:"base"}))}}]),t}(d.a.Component);a.d(t,"a",(function(){return F})),a.d(t,"b",(function(){return j}));var N=function(e){return e.replace(/[\*\+\-=~><\"\?^\${}\(\)\:\!\/[\]\\\s]/g,"\\$&").replace(/\|\|/g,"\\||").replace(/\&\&/g,"\\&&").replace(/AND/g,"\\A\\N\\D").replace(/OR/g,"\\O\\R").replace(/NOT/g,"\\N\\O\\T")},C={text:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"contains",label:"contains",isNegated:!1},{id:"contains",label:"not contains",isNegated:!0},{id:"in",label:"in",isNegated:!1},{id:"in",label:"not in",isNegated:!0},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],date:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"gt",label:">",isNegated:!1},{id:"lt",label:"<",isNegated:!1},{id:"gte",label:">=",isNegated:!1},{id:"lte",label:"<=",isNegated:!1},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],number:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"gt",label:">",isNegated:!1},{id:"lt",label:"<",isNegated:!1},{id:"gte",label:">=",isNegated:!1},{id:"lte",label:"<=",isNegated:!1},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],long:[{id:"eq",label:"==",isNegated:!1},{id:"eq",label:"!=",isNegated:!0},{id:"gt",label:">",isNegated:!1},{id:"lt",label:"<",isNegated:!1},{id:"gte",label:">=",isNegated:!1},{id:"lte",label:"<=",isNegated:!1},{id:"exists",label:"exists",isNegated:!1,type:"boolean"}],boolean:[{id:"eq",label:"==",isNegated:!1},{id:"exists",label:"exists",isNegated:!1}]},F=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(n.a)(this,Object(r.a)(t).call(this,e)))._isMounted=!1,a.state={inputValue:"",selection:[],isOpened:!1},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this._isMounted=!0,this.props.selection&&(console.log(this.props.selection),this.setState({selection:this.props.selection}))}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"filterOptionsHandler",value:function(){var e=this.props.options||[];return this.props.filterOptionsHandler&&this.state.isOpened&&(e=this.props.filterOptionsHandler(e)),Object(f.a)({inputValue:this.state.inputValue,limit:1e3,options:e,selection:this.state.selection})}},{key:"render",value:function(){var e=this;return d.a.createElement(d.a.Fragment,null,d.a.createElement(b.a,{classNameMenu:"scrollable-GRAXFilterableCombobox",events:{onChange:function(t,a){var s=a.value;e.setState({inputValue:s}),e.props.onChange&&e.props.onChange(t,s)},onRequestRemoveSelectedOption:function(t,a){e._isMounted&&e.setState({inputValue:"",selection:a.selection}),e.props.onRequestRemoveSelectedOption&&e.props.onRequestRemoveSelectedOption(t,a.selection)},onSelect:function(t,a){e._isMounted&&e.setState({inputValue:"",selection:a.selection}),e.props.onSelect&&e.props.onSelect(t,a.selection)},onOpen:function(t,a){e._isMounted&&e.setState({isOpened:!0})},onClose:function(t,a){e._isMounted&&e.setState({isOpened:!1})}},labels:{placeholder:this.props.placeholder},options:this.filterOptionsHandler(),selection:this.state.selection,value:this.state.inputValue,variant:this.props.variant||"inline-listbox",required:!0,multiple:!1}))}}]),t}(d.a.Component),j=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(n.a)(this,Object(r.a)(t).call(this,e))).state={_filterValues:null,_error:null,_filterValuesFields:[]},a}return Object(o.a)(t,e),Object(i.a)(t,[{key:"isLoaded",value:function(){return this.state._error||null!=this.props.filterableFieldOptions}},{key:"getFilterValueStruct",value:function(){return{id:null,value:null,operator:"eq",isNegated:!1,isActive:!0,selectedField:null}}},{key:"getFilterValuesList",value:function(e){var t=this;return p.a.map(e,(function(e,a){var s=t.getFilterValueStruct();return s.id=a,s.value=e.value,s.operator=e.operator,s.isNegated=e.isNegated,s.isActive=e.isActive,s.selectedField=p.a.filter(t.props.filterableFieldOptions,(function(e,t){return e&&e.id===a}))[0]||null,s}))}},{key:"componentDidMount",value:function(){var e=this.props.filterValues||{},t=Object.keys(e);this.setState({_filterValues:e,_filterValuesFields:t,_filterValuesList:this.getFilterValuesList(e)}),this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this),t,this.getFilterQuery.bind(this),this.state._filterValues)}},{key:"onFilterValueChangeHandler",value:function(e,t){var a=this.state._filterValues;if(t&&t.length>0){var s=t[0]||null;e.id=s.id,e.selectedField=s,a[e.id]={value:e.value,isActive:e.isActive,operator:e.operator,isNegated:e.isNegated,selectedField:s}}else delete a[e.id],e.id=null,e.selectedField=null;var l=Object.keys(a);this.setState({_filterValues:a,_filterValuesFields:l,_filterValuesList:this.state._filterValuesList}),this.props.onFilterValueChangeHandler&&this.props.onFilterValueChangeHandler(this.getFilterFunction.bind(this),l,this.getFilterQuery.bind(this),this.state._filterValues)}},{key:"addAnotherFieldHandler",value:function(){var e=this.state._filterValuesList;0!==e.length&&null==e[e.length-1].id||(e.push(this.getFilterValueStruct()),this.setState({_filterValuesList:e}))}},{key:"removeFieldHandler",value:function(e){var t=this.state._filterValues,a=this.state._filterValuesList;delete t[a[e].id],a.splice(e,1),this.setState({_filterValues:t,_filterValuesFields:Object.keys(t),_filterValuesList:a})}},{key:"getFilterFunction",value:function(e){var t=this;return p.a.filter(e,(function(e,a){var l=!0;return p.a.forEach(t.state._filterValues,(function(t,a){if(t.isActive){var i=t.operator,n=t.value;"in"!==i&&Array.isArray(n)?n=n.length>0?n[0]:null:"in"!==i||Array.isArray(n)||(n=n.split(" OR "));var r=t.isNegated,o=!1,c=e[a];"eq"!==i||""===n||Boolean(n)||(i="exists",r=!1),Array.isArray(n)&&"in"!==i&&(n=n.length>0?n[0]:null),"date"===t.selectedField.type&&((c=m()(c))&&(c=c.format("YYYY-MM-DD")),(n=m()(n))&&(n=n.format("YYYY-MM-DD"))),"boolean"!==t.selectedField.type||Boolean(n)||(n=!0,r=!0),o="exists"===i?Boolean(c)===Boolean(n):"contains"===i?String(c).toLowerCase().includes(n.toLowerCase()):"in"===i?n&&n.length>0&&p.a.includes.apply(p.a,[n].concat(Object(s.a)("string"===typeof c?[c]:c))):p.a[i](c,n),l&=r?!o:o}})),l}))||[]}},{key:"getFilterQuery",value:function(){var e={gt:">",gte:">=",lt:"<",lte:"<="},t=[];return p.a.forEach(this.state._filterValues,(function(a,s){var l=a.operator;if(a.isActive&&!l.startsWith("_")){var i=a.value;"in"!==l&&Array.isArray(i)?i=i.length>0?N(i[0]):null:"in"!==l||Array.isArray(i)||(i=p.a.map(i.split(" OR "),(function(e){return N(e)})));var n=a.isNegated;"eq"===l&&n&&!Boolean(i)&&(l="exists",i=n),"exists"===l&&(n=!Boolean(i));var r="(";if(n&&(r+="NOT "),r+="(","boolean"!==a.selectedField.type||Boolean(i)||(r+="NOT "),"in"===l){var o=[];p.a.each(i,(function(e,t){o.push('"'+e+'"')})),r+="doc."+s+":("+o.join(" OR ")+")"}else if("exists"===l)r+="_exists_:doc."+s;else if(r+="doc."+s+":","eq"===l)"boolean"===a.selectedField.type?r+="true":"number"===a.selectedField.type?r+=i?parseFloat(i):"":"date"===a.selectedField.type?r+=i?m()(i).format("YYYY-MM-DD"):"":r+='"'+i+'"';else if("contains"===l){var c=i?String(i):"";r+="(",r+='"'+N(i)+'"',r+=" OR ",r+=N(c.toLowerCase()),r+=" OR ",r+="*"+N(c.toLowerCase())+"*",r+=")"}else"date"===a.selectedField.type?r+=e[l]+(i?m()(i).format("YYYY-MM-DD"):""):r+=e[l]+(i?N(i):"");r+="))",t.push(r)}})),t.length>0?t.join(" AND "):null}},{key:"getSelectionValues",value:function(e){return e?p.a.reduce(e,(function(e,t){return e.push(t.id),e}),[]):null}},{key:"render",value:function(){var e=this;return this.state._error?d.a.createElement("div",null,"Error: ",this.state._error):this.isLoaded()?d.a.createElement(d.a.Fragment,null,d.a.createElement("table",{className:"slds-table slds-table_cell-buffer slds-table_bordered slds-no-row-hover"},d.a.createElement("thead",null,d.a.createElement("tr",{className:"slds-line-height_reset"},d.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},d.a.createElement("div",{className:"slds-truncate",title:"Field"},"Field")),d.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},d.a.createElement("div",{className:"slds-truncate",title:"Operator"},"Operator")),d.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},d.a.createElement("div",{className:"slds-truncate",title:"Filter Value"},"Filter Value")),d.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},d.a.createElement("div",{className:"slds-truncate",title:"Is Active?"},"Is Active?")),d.a.createElement("th",{className:"slds-text-title_caps",scope:"col"},d.a.createElement("div",{className:"slds-truncate"})))),d.a.createElement("tbody",null,p.a.map(this.state._filterValuesList,function(e,t){var a=this,s=e.id,l=e.selectedField||{};return d.a.createElement("tr",{className:"slds-hint-parent",key:"fieldName: "+(s||"")},d.a.createElement("td",{"data-label":"Field",style:{width:"30vw"}},s||d.a.createElement(F,{placeholder:"Select Field to filter",options:this.props.filterableFieldOptions||[],filterOptionsHandler:function(e){return p.a.filter(e,(function(e,t){return e&&-1===a.state._filterValuesFields.indexOf(e.id)}))||[]},selection:p.a.find(this.props.filterableFieldOptions,(function(e){return e&&e.id===s}))||[],onSelect:function(t,s){return a.onFilterValueChangeHandler(e,s)},onRequestRemoveSelectedOption:function(t,s){return a.onFilterValueChangeHandler(e,s)}})),d.a.createElement("td",{"data-label":"Operator",style:{width:"20vw"}},l&&("boolean"===l.type&&C[l.type].label||d.a.createElement(F,{placeholder:"Select Operator to Compare",options:C[l.type]||[],selection:[],variant:"readonly",onSelect:function(t,s){s[0].type=s[0].type||e.selectedField.type,e.operator=s[0].id,e.isNegated=s[0].isNegated,e.type!==s[0].type&&(e.value=null,"boolean"===s[0].type&&(e.value=!1),"text"===s[0].type&&(e.value=""),e.type=s[0].type),a.onFilterValueChangeHandler(e,[e.selectedField])}}))),d.a.createElement("td",{"data-label":"Filter Value",style:{width:"30vw"}},l&&(("boolean"===l.type||"exists"===e.operator)&&d.a.createElement(v.a,{defaultChecked:e.value,onChange:function(t){e.value=t.target.checked,a.onFilterValueChangeHandler(e,[e.selectedField])}})||("text"===l.type||"number"===l.type||"long"===l.type)&&d.a.createElement(S,{SObjectName:this.props.SObjectType,fieldName:l.id,onSelect:function(t,s){e.value=a.getSelectionValues(s),a.onFilterValueChangeHandler(e,[e.selectedField])},onRequestRemoveSelectedOption:function(t,s){e.value=a.getSelectionValues(s),a.onFilterValueChangeHandler(e,[e.selectedField])},elseComponent:d.a.createElement(y.a,{defaultValue:e.value,assistiveText:{label:l.label},id:l.id,onBlur:function(t){e.value=t.target.value,a.onFilterValueChangeHandler(e,[e.selectedField])}}),onRender:function(e){},multiple:"in"===e.operator,variant:"in"===e.operator?"base":"inline-listbox"})||"date"===l.type&&d.a.createElement(_.a,{value:e.value,onChange:function(t,s){e.value=s.date,a.onFilterValueChangeHandler(e,[e.selectedField])},className:"inline-table",menuPosition:"relative",hasStaticAlignment:!0}))),d.a.createElement("td",{"data-label":"Is Active?",style:{width:"10vw"}},d.a.createElement(v.a,{defaultChecked:e.isActive,onChange:function(t){e.isActive=t.target.checked,a.onFilterValueChangeHandler(e,[e.selectedField])}})),d.a.createElement("td",{"data-label":"Actions",style:{width:"10vw"}},d.a.createElement(E.a,{label:"Remove Filter",variant:"base",onClick:function(){a.removeFieldHandler(t)}})))}.bind(this)))),d.a.createElement("div",{className:"slds-p-top_medium"},d.a.createElement(E.a,{label:"Add Filter",variant:"brand",onClick:function(){e.addAnotherFieldHandler()},disabled:null==this.props.filterableFieldOptions||0===this.props.filterableFieldOptions.length||this.props.filterableFieldOptions.length===this.state._filterValuesFields.length}))):d.a.createElement("div",{style:{position:"relative",height:"5rem"}},d.a.createElement(g.a,{size:"small",variant:"base"}))}}]),t}(d.a.Component)},201:function(e,t,a){"use strict";a.d(t,"a",(function(){return b}));var s=a(48),l=a(49),i=a(52),n=a(50),r=a(51),o=a(1),c=a.n(o),d=a(70),u=a(173),p=a(53),h=a(35),m=a.n(h),f=a(11),b=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(n.a)(t).call(this,e))).state={options:[],inputValue:"",selection:[],isLoaded:!1,error:null},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){p.a.ajax({type:"GET",url:p.c+"/grax-app/grax-data-lake/getDataTypes"+Object(p.b)({action:"load"}),data:{},success:function(e){var t=this;this.props.excludeIds&&(e=m.a.filter(e,(function(e){return-1===t.props.excludeIds.indexOf(e.id)}))),this.setState({options:e,isLoaded:!0})}.bind(this),error:function(e,t,a){console.error(e,t,a),this.setState({isLoaded:!0,error:a.toString()})}.bind(this)})}},{key:"render",value:function(){var e=this;return this.state.error?c.a.createElement("div",null,"Error: ",this.state.error):this.state.isLoaded?c.a.createElement(c.a.Fragment,null,c.a.createElement(u.a,{classNameMenu:"scrollable-GRAXObjectCombobox",events:{onChange:function(t,a){var s=a.value;e.setState({inputValue:s}),e.props.onChange&&e.props.onChange(t,s)},onRequestRemoveSelectedOption:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onRequestRemoveSelectedOption&&e.props.onRequestRemoveSelectedOption(t,a.selection)},onSelect:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.props.onSelect&&e.props.onSelect(t,a.selection)}},labels:{placeholder:"Search GRAX Table"},options:Object(f.e)({inputValue:this.state.inputValue,limit:1e3,options:this.state.options,selection:this.state.selection}),selection:this.state.selection,value:this.state.inputValue,variant:"inline-listbox",required:!0})):c.a.createElement("div",{style:{position:"relative",height:"2rem"}},c.a.createElement(d.a,{size:"small",variant:"base"}))}}]),t}(c.a.Component)},206:function(e,t,a){"use strict";var s=a(1),l=a.n(s),i=a(0),n=a.n(i),r=a(2),o=a.n(r),c=a(6),d=a.n(c),u=a(17),p=a.n(u),h=a(3);function m(e){return(m="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function g(e,t){return!t||"object"!==m(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _={assistiveText:n.a.shape({label:n.a.string,required:n.a.string}),children:n.a.node.isRequired,className:n.a.oneOfType([n.a.array,n.a.object,n.a.string]),labels:n.a.shape({error:n.a.string,label:n.a.string}),onChange:n.a.func,disabled:n.a.bool,required:n.a.bool,name:n.a.string,errorId:n.a.string,variant:n.a.oneOf(["base","button-group"])},E={assistiveText:{required:"Required"},labels:{},variant:"base"},O=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=g(this,v(t).call(this,e))).generatedName=d.a.generate(),a.generatedErrorId=d.a.generate(),a}var a,s,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(t,e),a=t,(s=[{key:"getErrorId",value:function(){if(this.hasError())return this.props.errorId||this.generatedErrorId}},{key:"getName",value:function(){return this.props.name||this.generatedName}},{key:"hasError",value:function(){return!!this.labels.error}},{key:"render",value:function(){var e=this;this.labels=this.props.labels?p()({},E.labels,this.props.labels):E.labels;var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},s=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),s.forEach((function(t){f(e,t,a[t])}))}return e}({},E.assistiveText,this.props.assistiveText),a=l.a.Children.map(this.props.children,(function(t){return l.a.cloneElement(t,{name:e.getName(),onChange:e.props.onChange,"aria-describedby":e.getErrorId(),disabled:e.props.disabled})}));return l.a.createElement("fieldset",{className:o()("slds-form-element",{"slds-has-error":this.labels.error})},l.a.createElement("legend",{className:o()("slds-form-element__legend","slds-form-element__label",t.label?"slds-assistive-text":"")},this.props.required?l.a.createElement("abbr",{className:"slds-required",title:"required"},"*",l.a.createElement("div",{className:"slds-assistive-text"},t.required," ")):null,t.label?t.label:this.labels.label),l.a.createElement("div",{className:o()("slds-form-element__control",this.props.className)},"button-group"===this.props.variant?l.a.createElement("div",{style:this.props.style,className:"slds-radio_button-group"},a):a,this.labels.error?l.a.createElement("div",{id:this.getErrorId(),className:"slds-form-element__help"},this.labels.error):null))}}])&&b(a.prototype,s),i&&b(a,i),t}(l.a.Component);O.displayName=h.Q,O.propTypes=_,O.defaultProps=E;var x=O;function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var a,s,l=function(e,t){if(null==e)return{};var a,s,l={},i=Object.keys(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||(l[a]=e[a]);return l}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(l[a]=e[a])}return l}var C={assistiveText:n.a.shape({label:n.a.string}),children:n.a.node.isRequired,className:n.a.oneOfType([n.a.array,n.a.object,n.a.string]),labels:n.a.shape({error:n.a.string,label:n.a.string}),onChange:n.a.func,disabled:n.a.bool,required:n.a.bool,name:n.a.string,errorId:n.a.string},F=function(e){e.variant;var t=N(e,["variant"]);return l.a.createElement(x,S({variant:"button-group"},t))};F.displayName=h.P,F.propTypes=C,F.defaultProps={labels:{},assistiveText:{}};t.a=F},208:function(e){e.exports=JSON.parse('{"component":"alert","status":"prod","display-name":"Alerts","classKey":"Alert","last-accessibility-review":{"date-iso-8601":"2018/01/18","commit-sha":"ad6b6c6523ee21cada11be5f7ea4d99abc530726"},"SLDS-component-path":"/components/alert","dependencies":[{"component":"container","classKey":"AlertContainer"}],"site-stories":[{"heading":"Informational","path":"/__examples__/info.jsx"},{"heading":"Warning","path":"/__examples__/warning.jsx"},{"heading":"System Status","path":"/__examples__/offline.jsx"},{"heading":"Error","path":"/__examples__/error.jsx"},{"heading":"Dismissable","path":"/__examples__/dismissable.jsx"}],"url-slug":"alerts"}')},219:function(e,t,a){"use strict";a.r(t);var s=a(48),l=a(49),i=a(52),n=a(50),r=a(51),o=a(1),c=a.n(o),d=a(35),u=a.n(d),p=a(196),h=a(201),m=a(197),f=a(206),b=a(117),g=a(46),v=a(7),y=a(63),_=a(0),E=a.n(_),O=a(17),x=a.n(O),S=a(23),N=a(15);var C=function(){},F=a(208),j=a(3),R=a(29);function k(e){return(k="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var a=0;a<t.length;a++){var s=t[a];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var q={assistiveText:E.a.shape({closeButton:E.a.oneOfType([E.a.string,E.a.node])}),className:E.a.oneOfType([E.a.array,E.a.object,E.a.string]),dismissible:E.a.bool,icon:E.a.node,labels:E.a.shape({heading:E.a.oneOfType([E.a.string,E.a.node]),headingLink:E.a.oneOfType([E.a.string,E.a.node])}),onClickHeadingLink:E.a.func,onRequestClose:E.a.func,style:E.a.object,variant:E.a.oneOf(["error","info","offline","warning"]).isRequired},L={assistiveText:{closeButton:"Close"},labels:{},variant:"info"},D=function(e){function t(e){var a,s,l,i,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),s=this,l=w(t).call(this,e),a=!l||"object"!==k(l)&&"function"!==typeof l?A(s):l,i=A(a),r=function(e){a.closeButton=e,a.state.isInitialRender&&(R.a.storeActiveElement(),a.closeButton&&a.closeButton.focus(),a.setState({isInitialRender:!1}))},(n="saveButtonRef")in i?Object.defineProperty(i,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):i[n]=r,a.state={isInitialRender:!0},C(j.a,e,F),a}var a,s,l;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(t,e),a=t,(s=[{key:"componentWillUnmount",value:function(){R.a.returnFocusToStoredElement()}},{key:"render",value:function(){var e=x()({},L.assistiveText,this.props.assistiveText),t=x()({},L.labels,this.props.labels),a=t.heading||this.props.content,s=this.props.onRequestClose||this.props.onDismiss,l={info:c.a.createElement(v.a,{category:"utility",name:"info"}),offline:c.a.createElement(v.a,{category:"utility",name:"offline"}),warning:c.a.createElement(v.a,{category:"utility",name:"warning"}),error:c.a.createElement(v.a,{category:"utility",name:"error"})},i=this.props.icon?this.props.icon:l[this.props.variant];this.props.iconName&&this.props.iconCategory&&(i=c.a.createElement(v.a,{category:this.props.iconCategory,name:this.props.iconName}));var n=c.a.cloneElement(i,{containerClassName:"slds-m-right_x-small",inverse:!0,size:"x-small"});return c.a.createElement("div",{className:Object(S.a)("slds-notify slds-notify_alert slds-theme_alert-texture",{"slds-theme_info":"info"===this.props.variant,"slds-theme_warning":"warning"===this.props.variant,"slds-theme_error":"error"===this.props.variant,"slds-theme_offline":"offline"===this.props.variant},this.props.className),role:"alert",style:this.props.style},c.a.createElement("span",{className:"slds-assistive-text"},{info:"info",warning:"warning",error:"error",offline:"offline"}[this.props.variant]),n,c.a.createElement("h2",null,a," ",t.headingLink?c.a.createElement("a",{onClick:this.props.onClickHeadingLink,href:"javascript:void(0);"},t.headingLink):null),this.props.dismissible?c.a.createElement(N.a,{assistiveText:{icon:e.closeButton},buttonRef:this.saveButtonRef,className:"slds-notify__close",iconCategory:"utility",iconName:"close",iconSize:"medium",inverse:!0,onClick:s,title:e.closeButton,variant:"icon"}):null)}}])&&V(a.prototype,s),l&&V(a,l),t}(c.a.Component);D.defaultProps=L,D.displayName=j.a,D.propTypes=q;var I=D,z=a(70),H=a(53);a.d(t,"default",(function(){return Q}));var M=Object(o.lazy)((function(){return Promise.resolve().then(a.bind(null,72))})),P=Object(o.lazy)((function(){return a.e(6).then(a.bind(null,222))})),U=["text","date","number"],B="Both",G=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(n.a)(t).call(this,e))).state={checked:B},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"onChangeHandler",value:function(e){this.setState({checked:e}),this.props.onChange&&this.props.onChange(e)}},{key:"render",value:function(){var e=this,t=["Backed Up","Archived",B];return c.a.createElement("div",{className:"slds-p-bottom_medium"},c.a.createElement("div",{className:"slds-clearfix"},c.a.createElement("div",{className:"slds-float_left slds-p-right_xx-small"},c.a.createElement(f.a,{onChange:function(t){return e.onChangeHandler(t.target.value)},required:this.props.required,name:this.props.name,errorId:this.props.errorId,disabled:!0===this.props.disabled},u.a.map(t,function(e,t){return c.a.createElement(b.a,{key:"option"+t,id:"option"+t,label:e,value:e,checked:this.state.checked===e,variant:"button-group"})}.bind(this)))),c.a.createElement("div",{className:"slds-float_left",style:{margin:"0.41rem"}},c.a.createElement(g.a,{align:"top left",content:'Select one of the options, "Backed Up", "Archived", or "Both", below to display these records.',variant:"learnMore"}))))}}]),t}(c.a.Component),Q=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(n.a)(t).call(this,e))).state={selectedDataIndex:null,retrieved:!1,retrievedCounter:0,_sfRequestsDisabled:!0,_restoreChildrens:!1,_checkIsUserActive:!0,_useGRAXHistoryOnly:!1,_updateRecordIfExist:!1,_sendNotification:!1,_currentOrgRecords:!0,_graxFields:null,_graxFieldsSelection:null,_graxFieldsSelectionList:null,_filterFunction:function(e){return e},_getFilterQuery:function(){return null},_filterValuesFields:[],_graxSortableFields:null,objectHasCustomMapping:!1,_archiveFilterQuery:null},a}return Object(r.a)(t,e),Object(l.a)(t,[{key:"hasFieldSelected",value:function(){return null!=this.state._graxFields&&null!=this.state._graxFieldsSelectionList&&this.state._graxFieldsSelectionList.length>0}},{key:"getFilterQuery",value:function(){var e=u.a.concat(this.state._getFilterQuery(),this.state._archiveFilterQuery);return this.state._currentOrgRecords&&e.push('(doc.graxorgid.keyword: "'+H.e+'")'),(e=u.a.remove(e,(function(e){return null!=e})))&&e.length>0?e.join(" AND "):null}},{key:"render",value:function(){var e=this;return c.a.createElement("div",null,c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"Disclaimers"},c.a.createElement("ol",null,c.a.createElement("li",null,"When restoring records in an environment please confirm that the following is true:"),c.a.createElement("ol",{className:"slds-list_ordered"},c.a.createElement("li",null,"Ensure that the destination environment has the same customizations and metadata as the source environment"),c.a.createElement("li",null,"Ensure that all workflows, APEX triggers, validation rules, process builders, duplication rules, etc. are disabled in the destination environment"),c.a.createElement("li",null,"If restoring in a partial or developer Sandbox, ensure that there is ample storage space for the data you are intending to restore in the destination environment"),c.a.createElement("li",null,'Ensure that your user has "modify all data" permission in the destination environment'),c.a.createElement("li",null,'If you are attempting to restore records where the owner is inactive, ensure that your user has the permission "Update records with inactive owners" set to true in the destination environment'))),c.a.createElement("div",{className:"slds-m-bottom_large"})),c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"Settings"},c.a.createElement("div",{className:"slds-grid slds-wrap"},c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"When disabled, only the parent record will be restored. When enabled, the parent and all related children will be enabled."},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Restore Child Records?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state._restoreChildrens,onChange:function(t){e.setState({_restoreChildrens:t})},assistiveText:{label:"Restore Child Records?"},variant:"toggle",labels:{toggleDisabled:"Restore Parent Record Only",toggleEnabled:"Restore Child Records"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"When disabled, the restore process queries your storage facility to determine if this record exists already in this SF environment. When enabled the process queries SF to see if this record already exists and will not create a duplicate."},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Skip Salesforce Queries?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:!this.state._sfRequestsDisabled,onChange:function(t){e.setState({_sfRequestsDisabled:!t})},assistiveText:{label:"Skip Salesforce Queries?"},variant:"toggle",labels:{toggleDisabled:"Query storage facility",toggleEnabled:"Query Salesforce"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:'When enabled, the user must have the setting "Update Records with Inactive Owners" set to true otherwise records assigned to an inactive user will NOT be created.'},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Assign Records to Inactive Users?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:!this.state._checkIsUserActive,onChange:function(t){e.setState({_checkIsUserActive:!t})},assistiveText:{label:"Assign Records to Inactive Users?"},variant:"toggle",labels:{toggleDisabled:"Assign records only to Active Users",toggleEnabled:"Assign records to Active or Inactive Users"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"Set it to TRUE if you don't want to double check that the restored records still exist in the destination Org."},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Use GRAXHistory only?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state._useGRAXHistoryOnly,onChange:function(t){e.setState({_useGRAXHistoryOnly:t})},assistiveText:{label:"Use GRAXHistory only?"},variant:"toggle",labels:{toggleDisabled:"Query SFDC to confirm record exists",toggleEnabled:"Query only GRAX History"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"Set it to TRUE if you want to update the previously restored records in the destination Org."},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Update records?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state._updateRecordIfExist,onChange:function(t){e.setState({_updateRecordIfExist:t})},assistiveText:{label:"Update records?"},variant:"toggle",labels:{toggleDisabled:"Only insert records",toggleEnabled:"Update records if exists"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"Notify User via Email when Process Completes"},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Send Notification?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:this.state._sendNotification,onChange:function(t){e.setState({_sendNotification:t})},assistiveText:{label:"Send Notification?"},variant:"toggle",labels:{toggleDisabled:"Don't Send Notification",toggleEnabled:"Send Notification"}}))),c.a.createElement("div",{className:"slds-col slds-size_1-of-1 slds-medium-size_6-of-12 slds-large-size_4-of-12"},c.a.createElement("div",{className:"slds-p-bottom_small"},c.a.createElement(g.a,{align:"top left",content:"Show records only from the current environment or all environments."},c.a.createElement("a",{href:"javascript:void(0)",style:{marginRight:"0.5rem"}},c.a.createElement(v.a,{assistiveText:{label:"Filter records?"},category:"utility",name:"info",size:"x-small"}))),c.a.createElement(y.a,{className:"inline-block",defaultChecked:!this.state._currentOrgRecords,onChange:function(t){e.setState({_currentOrgRecords:!t,retrievedCounter:e.state.retrievedCounter+1})},assistiveText:{label:"Show records from all environments?"},variant:"toggle",labels:{toggleDisabled:"Current Environment",toggleEnabled:"All connected SF environments"}})))),c.a.createElement("div",{className:"slds-m-bottom_large"})),c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"Select the GRAX Table"},c.a.createElement(h.a,{onSelect:function(t,a){var s=!1,l=a[0];console.log(e.props.customMapping,l);var i=l.label;if(null!=e.props.customMapping){var n=e.props.customMapping[Object.keys(e.props.customMapping).find((function(e){return e.toLowerCase()===i.toLowerCase()}))];n&&Object.keys(n).length>0&&(s=!0)}e.setState({selectedDataIndex:l,objectHasCustomMapping:s})},excludeIds:["graxgrax_loggingindex"],onRequestRemoveSelectedOption:function(t,a){e.setState({retrieved:!1,selectedDataIndex:null,_graxFieldsSelection:null,_graxFieldsSelectionList:null,objectHasCustomMapping:!1})}}),this.state.objectHasCustomMapping?c.a.createElement("div",null,c.a.createElement(I,{dismissible:!0,labels:{heading:'The selected object has a custom mapping defined. To review this custom mapping, click on the "Restore Mapping" tab and then select the object.'},onRequestClose:function(){e.setState({objectHasCustomMapping:!1})}})):null,c.a.createElement("div",{className:"slds-m-bottom_large"})),c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"Search GRAX Table"},null!=this.state.selectedDataIndex?c.a.createElement(o.Suspense,{fallback:c.a.createElement("div",{style:{position:"relative",height:"2rem"}},c.a.createElement(z.a,{size:"small",variant:"base"}))},c.a.createElement(M,{dataIndex:this.state.selectedDataIndex.id,onLoad:function(t,a,s,l){console.log("onLoad",a,l,s),e.setState({_graxFields:s,_graxFieldsSelection:a,_graxFieldsSelectionList:l,_graxSortableFields:u.a.reduce(s,(function(e,t,a){return-1!==U.indexOf(t.type)&&e.push(t.id),e}),[])})},onChange:function(t,a,s,l){console.log("onChange",a,l);var i=e.state.retrievedCounter;l.length>e.state._graxFieldsSelectionList.length&&i++,e.setState({retrievedCounter:i,_graxFieldsSelection:a,_graxFieldsSelectionList:l})}})):"No GRAX Table selected...",c.a.createElement("div",{className:"slds-m-bottom_large"})),c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"Filter Records"},c.a.createElement(G,{onChange:function(t){var a;t===B&&(a=null),"Backed Up"===t&&(a="(NOT doc.IsDeleted:true)"),"Archived"===t&&(a="(doc.IsDeleted:true)"),e.setState({_archiveFilterQuery:a,retrievedCounter:e.state.retrievedCounter+1})}}),null!=this.state._graxFieldsSelectionList&&c.a.createElement(m.b,{SObjectType:this.state.selectedDataIndex.label,filterableFieldOptions:this.state._graxFields,onFilterValueChangeHandler:function(t,a,s){e.setState({retrievedCounter:e.state.retrievedCounter,_filterFunction:t,_getFilterQuery:s,_graxFieldsSelectionList:e.state._graxFieldsSelectionList,_filterValuesFields:a})}}),c.a.createElement("div",{className:"slds-m-bottom_large"})),c.a.createElement(p.a,{isCollapsible:!0,isOpen:!0,title:"GRAX Stored Records"},c.a.createElement("div",{className:"-x-small-buttons--horizontal slds-p-bottom_small"},c.a.createElement(N.a,{label:"Retrieve",variant:"brand",onClick:function(){e.setState({retrieved:null!=e.state.selectedDataIndex,retrievedCounter:e.state.retrievedCounter+1})},disabled:!this.hasFieldSelected()})),this.state.retrieved&&this.state._graxFieldsSelectionList&&c.a.createElement(o.Suspense,{fallback:c.a.createElement("div",{style:{position:"relative",height:"2rem"}},c.a.createElement(z.a,{size:"small",variant:"base"}))},c.a.createElement(P,{key:"GRAXRestoreDataTable_"+this.state.retrievedCounter,renderKey:"GRAXRestoreDataTable_"+this.state.retrievedCounter,columns:this.state._graxFieldsSelectionList,_graxFieldsSelection:this.state._graxFieldsSelection,hiddenColumns:this.state._filterValuesFields,dataIndex:this.state.selectedDataIndex.id,sfRequestsDisabled:this.state._sfRequestsDisabled,restoreChildrens:this.state._restoreChildrens,checkIsUserActive:this.state._checkIsUserActive,useGRAXHistoryOnly:this.state._useGRAXHistoryOnly,updateRecordIfExist:this.state._updateRecordIfExist,sendNotification:this.state._sendNotification,filterFunction:this.state._filterFunction,filterQuery:this.getFilterQuery(),sortableColumns:this.state._graxSortableFields}))))}}]),t}(c.a.Component)}}]);
//# sourceMappingURL=4.1aa29620.chunk.js.map