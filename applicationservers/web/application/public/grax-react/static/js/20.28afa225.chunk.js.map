{"version":3,"sources":["components/GRAXRestoreTabs.jsx","lib/grax-data-lake.js"],"names":["GRAXRestore","lazy","Promise","all","__webpack_require__","e","then","bind","GRAXRestoreMapping","GRAXRestoreTabs","props","_this","Object","_Users_dpickett_work_grax_grax_applicationservers_web_application_graxreact_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_0__","this","_Users_dpickett_work_grax_grax_applicationservers_web_application_graxreact_node_modules_babel_runtime_helpers_esm_possibleConstructorReturn__WEBPACK_IMPORTED_MODULE_2__","_Users_dpickett_work_grax_grax_applicationservers_web_application_graxreact_node_modules_babel_runtime_helpers_esm_getPrototypeOf__WEBPACK_IMPORTED_MODULE_3__","call","state","isLoading","error","customMapping","$","ajax","type","url","baseUrl","GetParams","action","data","success","parseJSON","setState","xhr","status","err","console","toString","_this2","react__WEBPACK_IMPORTED_MODULE_5___default","a","createElement","_salesforce_design_system_react__WEBPACK_IMPORTED_MODULE_6__","size","variant","appName","react__WEBPACK_IMPORTED_MODULE_5__","fallback","onMappingChange","_salesforce_design_system_react__WEBPACK_IMPORTED_MODULE_7__","id","_salesforce_design_system_react__WEBPACK_IMPORTED_MODULE_8__","label","React","Component","d","__webpack_exports__","isDev","token","orgid","pageParams","jquery__WEBPACK_IMPORTED_MODULE_0__","jquery__WEBPACK_IMPORTED_MODULE_0___default","n","window","__grax__","_csrf","userid","params","undefined","param","ajaxSetup","beforeSend","settings","method","setRequestHeader","authorization","test","crossDomain","withCredentials","fail","jqXHR","textStatus","errorThrown","showError","statusText","responseText"],"mappings":"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","file":"static/js/20.28afa225.chunk.js","sourcesContent":["///* global $ */\nimport React, { Suspense, lazy } from 'react';\nimport { Tabs, TabsPanel, Spinner } from '@salesforce/design-system-react';\n\nimport {baseUrl, GetParams} from '../lib/grax-data-lake';\n\nimport $ from 'jquery';\n\nconst GRAXRestore = lazy(() => import('./GRAXRestore'));\nconst GRAXRestoreMapping = lazy(() => import('./GRAXRestoreMapping'));\n\nexport default class GRAXRestoreTabs extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            isLoading: true,\n            error: null,\n            customMapping: null\n        };\n    }\n\n    componentDidMount() {\n        $.ajax({\n            type: 'GET',\n            //dataType: 'jsonp',\n            url: baseUrl + '/grax-app/grax-data-lake/getCustomMapping' + GetParams({action:'load'}),\n            data: {},\n            success: function(data) {\n                var customMapping = data;\n\n                try {\n                    customMapping = $.parseJSON(data);\n                } catch(e){}\n\n                this.setState({\n                    customMapping: customMapping,\n                    isLoading: false\n                });\n            }.bind(this),\n            error: function(xhr, status, err) {\n                console.error(xhr, status, err);\n\n                this.setState({\n                    error: xhr.status === 404 ? null : err.toString(),\n                    customMapping: xhr.status === 404 ? {} : null,\n                    isLoading: false\n                });\n            }.bind(this)\n        });\n    }\n\n    render() {\n        if(this.state.isLoading) {\n            return (\n                <Spinner size=\"large\" variant=\"brand\" />\n            );\n        }\n\n        if(this.props.appName === 'mapping') {\n            return (\n                <Suspense fallback={<Spinner size=\"large\" variant=\"brand\" />}>\n                    <GRAXRestoreMapping customMapping={this.state.customMapping} onMappingChange={(customMapping) => {\n                        this.setState({\n                            customMapping: customMapping\n                        });\n                    }} />\n                </Suspense>\n            );\n        }\n\n        return (\n            <Tabs variant={this.props.variant} id=\"grax-restore-tabs\">\n                {this.props.appName === 'restore' ? (\n                    <TabsPanel label=\"Restore\">\n                        <Suspense fallback={<Spinner size=\"large\" variant=\"brand\" />}>\n                            <GRAXRestore customMapping={this.state.customMapping} />\n                        </Suspense>\n                    </TabsPanel>\n                ) : null}\n            </Tabs>\n        );\n    }\n}","/* eslint-disable no-useless-escape */\n/* --------------------------------------------------------------------------\n * This file is subject to the terms and conditions defined in\n * file https://github.com/HardingPoint/GRAXForSFDC/blob/master/LICENSE,\n * which is part of this source code package.\n * --------------------------------------------------------------------------\n *          Copyright (c) 2017-2018 Harding Point\n *                  All rights reserved\n * --------------------------------------------------------------------------\n * Support:\tSupport@Grax.io\n * Website:\thttps://grax.io\n * Github:\thttps://github.com/HardingPoint/grax-application\n * License:\thttps://github.com/HardingPoint/grax-application/blob/master/LICENSE\n * --------------------------------------------------------------------------*/\n\nimport $ from \"jquery\";\n\n// export const isDev = window.location.port !== '80';\n\nexport const isDev = false;\n\nconst devBaseUrl = \"https://grax-datalake-demo2.herokuapp.com\";\n\nexport const baseUrl = isDev ? devBaseUrl : \"\";\n\nexport const token = window.__grax__.token;\nexport const _csrf = window.__grax__._csrf;\nexport const orgid = window.__grax__.orgid;\nexport const userid = window.__grax__.userid;\nexport const sessionid = null;\nexport const endpoint = null;\nexport const pageParams = window.__grax__.pageParams || {};\n\nexport function GetParams(params) {\n  if (params === null || params === undefined) params = {};\n\n  if (params.action === null || params.action === undefined || params.action === \"\")\n    params.action = \"load\";\n\n  return \"?\" + $.param(params);\n}\n\nfunction csrfSafeMethod(method) {\n  // these HTTP methods do not require CSRF protection\n  return /^(GET|HEAD|OPTIONS|TRACE)$/.test(method);\n}\n$.ajaxSetup({\n  beforeSend: function(xhr, settings) {\n    xhr.setRequestHeader(\"sfdcorgid\", orgid);\n\n    if (pageParams.authorization != null) {\n      xhr.setRequestHeader(\"Authorization\", pageParams.authorization);\n    } else {\n      xhr.setRequestHeader(\"Authorization\", \"Bearer \" + token);\n    }\n\n    if (!csrfSafeMethod(settings.type) && !this.crossDomain) {\n      xhr.setRequestHeader(\"X-CSRFToken\", _csrf);\n    }\n\n    xhr.withCredentials = true;\n\n    xhr.fail((jqXHR, textStatus, errorThrown) => {\n      console.error(jqXHR);\n\n      if (jqXHR.status !== 404 && errorThrown !== \"Not Found\") {\n        window.showError(jqXHR.statusText + \": \" + jqXHR.responseText);\n      }\n    });\n  }\n});\n\nexport { $ };\n"],"sourceRoot":""}