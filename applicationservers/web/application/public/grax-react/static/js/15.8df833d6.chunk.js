(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[15],{284:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return O}));var a,i=n(36),s=n(46),o=n(48),l=n(37),r=n(84),u=n(47),c=n(0),p=n.n(c),d=n(30),h=n.n(d),f=n(73),v=n(266),b=n(277),g=n(21),m="Fields",O=function(e){function t(e){var n;return Object(i.a)(this,t),(n=Object(o.a)(this,Object(l.a)(t).call(this,e))).state={options:[],inputValue:"",selection:[{id:"Id",label:"Id",type:"text"}],isLoaded:!1,error:null},n.getMappedFieldList=n.getMappedFieldList.bind(Object(r.a)(n)),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"getMappedFieldList",value:function(e){return h.a.map(e||this.state.selection,(function(e){return e.id}))}},{key:"onLoadHandler",value:function(e,t){var n=this.getMappedFieldList(t);this.props.onLoad&&this.props.onLoad(e,t,this.state.options,n)}},{key:"onChangeHandler",value:function(e,t){var n=this.getMappedFieldList(t);this.props.onChange&&this.props.onChange(e,t,this.state.options,n),Object(g.n)(a+m,JSON.stringify(n))}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,a=this.props.dataIndex,this.props.cookieSubfix&&(m+=this.props.cookieSubfix),b.a.ajax({type:"GET",url:b.c+"/grax-app/grax-data-lake/getDataTypeFields/"+a+Object(b.b)({action:"load"}),data:{},success:function(t){if(e._isMounted){var n=h.a.map(t,(function(e,t){return{id:t,label:t,type:e}}));e.setState({options:n,isLoaded:!0});var i=Object(g.h)(a+m);i.startsWith("[")||(i="[]");var s=JSON.parse(i);e.setState({selection:s.length>0?h.a.sortBy(h.a.reduce(n,(function(e,t){return-1!==s.indexOf(t.id)&&e.push(t),e}),[]),(function(e){return s.indexOf(e.id)})):e.state.selection})}e.onLoadHandler(null,e.state.selection)},error:function(t,n,a){console.error(t,n,a),e._isMounted&&e.setState({isLoaded:!0,error:a.toString()})}})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return this.state.error?p.a.createElement("div",null,"Error: ",this.state.error):this.state.isLoaded?p.a.createElement(p.a.Fragment,null,p.a.createElement(v.a,{classNameMenu:"scrollable-GRAXFieldsCombobox",events:{onChange:function(t,n){var a=n.value;e.setState({inputValue:a})},onRequestRemoveSelectedOption:function(t,n){e.setState({inputValue:"",selection:n.selection}),e.onChangeHandler(t,n.selection)},onSelect:function(t,n){e.setState({inputValue:"",selection:n.selection}),e.onChangeHandler(t,n.selection)},onRequestClose:function(t,n){if(e.props.onSelect&&e.state.inputValue){var a=e.getMappedFieldList(n.selection);e.props.onSelect(t,[{id:e.state.inputValue,label:e.state.inputValue}],e.state.options,a)}}},labels:{placeholder:"Select Option"},options:Object(g.e)({inputValue:this.state.inputValue,limit:1e3,options:this.state.options,selection:this.state.selection}),selection:this.state.selection,value:this.state.inputValue,required:!0,multiple:!0})):p.a.createElement("div",{style:{position:"relative",height:"2rem"}},p.a.createElement(f.a,{size:"small",variant:"base"}))}}]),t}(p.a.Component)}}]);
//# sourceMappingURL=15.8df833d6.chunk.js.map