(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[28],{164:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return V}));var n=a(18),i=a(9),o=a(10),s=a(13),l=a(11),r=a(12),c=a(1),u=a.n(c),d=a(55),g=a(62),m=a(50),f=a(114),h=a(169),p=a(143),b=a(8),C=a.n(b),S=Object(c.lazy)((function(){return Promise.all([a.e(0),a.e(19),a.e(23)]).then(a.bind(null,148))})),O=Object(c.lazy)((function(){return Promise.all([a.e(0),a.e(22),a.e(26)]).then(a.bind(null,150))})),v=Object(c.lazy)((function(){return Promise.all([a.e(0),a.e(1),a.e(3),a.e(18)]).then(a.bind(null,151))})),E=Object(c.lazy)((function(){return a.e(20).then(a.bind(null,152))})),N="New Configuration",k="New Bulk Process",x=u.a.createElement("img",{src:"./grax-x.svg",className:"slds-m-right_x-small",style:{width:"14px",height:"14px",alignSelf:"center"},alt:""}),H=u.a.createElement(d.a,{assistiveText:{icon:"Expand"},category:"utility",name:"salesforce1",size:"xx-small",variant:"icon",className:"slds-m-right_x-small",style:{fill:"#009EDB"}}),y=(u.a.createElement(d.a,{assistiveText:{icon:"Expand"},category:"utility",name:"magicwand",size:"xx-small",variant:"icon",className:"slds-m-right_x-small"}),0),F=1,j=2,_=3,z=4,I=5,L=6,P=7,M=8,T=9,B=10,G=11,D=12,R=13,w=14,A=15,J=17,X=18,q=19,W=20,K=21,Q=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(r.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return u.a.createElement("div",{className:"slds-tree_container",style:{maxWidth:"none",minWidth:"none"}},void 0!==this.props.label?u.a.createElement("h4",{className:"slds-tree__group-header"},this.props.label):null,u.a.createElement("ul",{"aria-labelledby":"treeheading",className:"slds-tree",role:"tree"},this.props.children))}}]),t}(u.a.PureComponent),U=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={isOpen:!1,isCollapsible:!1,isEditable:!0},a.toggleHandler=a.toggleHandler.bind(Object(n.a)(a)),a.clickHandler=a.clickHandler.bind(Object(n.a)(a)),a.editHandler=a.editHandler.bind(Object(n.a)(a)),a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=!1,t=!1,a=!1;this.props.isOpen&&(e=this.props.isOpen),void 0!==this.props.children&&this.props.children.length>0&&(t=!0),this.props.isCollapsible&&(t=this.props.isCollapsible),this.props.isEditable&&(a=this.props.isEditable),this.setState({isOpen:e,isLoaded:e,isCollapsible:t,isEditable:a})}},{key:"toggleHandler",value:function(){var e=!this.state.isOpen,t=this.state.isLoaded||e;this.setState({isOpen:e,isLoaded:t}),this.props.onToggle&&this.props.onToggle(e)}},{key:"clickHandler",value:function(){!0===this.props.isToggleOnClick&&this.toggleHandler(),this.props.onClick&&this.props.onClick()}},{key:"editHandler",value:function(){this.props.onEdit&&this.props.onEdit()}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,u.a.createElement("li",{id:this.props.id,key:this.props.id,"aria-level":this.props.level,"aria-expanded":this.state.isOpen,role:"treeitem",tabIndex:"0"},u.a.createElement("div",{className:"slds-tree__item"+(void 0!==this.props.content?" slds-tree__item--no-hover":"")},u.a.createElement(g.a,{assistiveText:{icon:"Expand"},iconCategory:"utility",iconName:"chevronright",iconSize:"small",className:"slds-m-right_x-small"+(this.state.isCollapsible?"":" slds-is-disabled"),variant:"icon",onClick:this.toggleHandler}),void 0!==this.props.icon?u.a.createElement("div",{className:"slds-m-right_x-small slds-tree__item--icon"},this.props.icon):null,void 0!==this.props.content?this.props.content:u.a.createElement("span",{className:"slds-has-flexi-truncate",onClick:this.clickHandler},u.a.createElement("span",{className:"slds-tree__item-label slds-truncate",title:this.props.label},this.props.label)),this.state.isEditable?u.a.createElement("button",{className:"slds-button slds-button_icon slds-m-right_x-small",title:"Edit",onClick:this.editHandler},u.a.createElement(d.a,{assistiveText:{icon:"Expand"},category:"utility",name:"edit",size:"xx-small",variant:"icon"})):null),this.state.isLoaded?u.a.createElement("ul",{role:"group"},this.props.children):null))}}]),t}(u.a.PureComponent),V=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(l.a)(t).call(this,e))).state={isLoading:!0,error:null,globalConfigurations:{},configurations:{},modalSize:"large",isModalOpen:!1,isConfigurationFormOpened:!1,isSFLoginFormOpened:!1,isBulkRestoreFormOpened:!1,selectedConfigurationName:null,configurationName:N,configuration:null,selectedDataSourceName:null,dataSource:null,selectedBulkProcesseName:null,bulkProcessName:k,bulkProcess:null,configurationCollapsibleOpen:null,collapsiblesOpenByConfiguration:{},isGlobalConfigurationsFormOpened:!1,configurationsCopy:null,globalConfigurationsCopy:null},a.actionHandler=a.actionHandler.bind(Object(n.a)(a)),a}return Object(r.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({globalConfigurations:this.props.globalConfigurations,configurations:this.props.configurations,isLoading:!1})}},{key:"generateConfigurationStructure",value:function(){return{dataSources:[],elastic:[],storage:[]}}},{key:"actionHandler",value:function(e,t){var a=this,n=this.state.configurations;if(e===G&&this.setState({isModalOpen:!0,modalSize:"medium",isConfigurationFormOpened:!0}),e===y&&(this.actionHandler(G),this.setState({selectedConfigurationName:null,configurationName:N,configuration:this.generateConfigurationStructure()})),e===F&&(this.actionHandler(G),this.setState({selectedConfigurationName:t.configurationName,configurationName:t.configurationName,configuration:C.a.cloneDeep(t.configuration)})),e===D&&this.setState({isModalOpen:!0,modalSize:"medium",isSFLoginFormOpened:!0}),e===J&&this.setState({isModalOpen:!0,modalSize:"medium",isBulkRestoreFormOpened:!0}),e===z&&(this.actionHandler(D),this.setState({selectedConfigurationName:t.configurationName,configuration:t.configuration,dataSource:t.dataSource,dataSourceIndex:t.dataSourceIndex})),e===A&&(this.actionHandler(J),this.setState({selectedConfigurationName:t.configurationName,bulkProcess:t.bulkProcess})),e===_&&(this.actionHandler(D),this.setState({selectedConfigurationName:t.configurationName,configuration:t.configuration,dataSourceIndex:t.dataSourceIndex})),e===w&&(this.actionHandler(J),this.setState({configuration:t.configuration,selectedBulkProcesseName:t.configurationName,bulkProcess:{name:k}})),e===L){if(null!=this.state.configurationName&&""===this.state.configurationName.trim())return void alert("The Name cannot be blank.");if(n[this.state.configurationName]&&this.state.configurationName!==this.state.selectedConfigurationName)return void alert("Name in use...");null!=this.state.selectedConfigurationName&&delete n[this.state.selectedConfigurationName],n[this.state.configurationName]=this.state.configuration,this.setState({action:e,configurations:n}),this.actionHandler(R),this.actionHandler(M)}if(e===j&&(delete n[this.state.selectedConfigurationName],this.setState({configurations:n}),this.actionHandler(R),this.actionHandler(M)),e===M&&this.setState({isModalOpen:!1,isConfigurationFormOpened:!1,selectedConfigurationName:null,configurationName:null}),e===P){var i=t.dataSourceIndex,o=t.dataSource;if(console.log("dataSourceIndex: ",i),console.log("params..selectedConfigurationName: ",t.selectedConfigurationName),console.log("configurations[params.selectedConfigurationName]: ",n[t.selectedConfigurationName]),console.log("dataSource: ",o),!o)return void alert("Invalid dataSource");if(null!=o&&""===o.name.trim())return void alert("The Name cannot be blank.");null!=i?n[t.selectedConfigurationName].dataSources[i]=o:n[t.selectedConfigurationName].dataSources.push(o),this.setState({configurations:n}),this.actionHandler(R),this.actionHandler(T)}e===I&&(C.a.remove(n[this.state.selectedConfigurationName].dataSources,(function(e){return e.name===a.state.dataSource.name})),this.setState({configurations:n}),this.actionHandler(R),this.actionHandler(T)),e===T&&this.setState({isModalOpen:!1,isSFLoginFormOpened:!1,selectedConfigurationName:null,dataSource:null}),e===X&&this.setState({isModalOpen:!1,isBulkRestoreFormOpened:!1,selectedBulkProcesseName:null,bulkProcess:null}),e===q&&this.setState({isModalOpen:!0,isGlobalConfigurationsFormOpened:!0}),e===K&&this.setState({isModalOpen:!1,isGlobalConfigurationsFormOpened:!1}),e===W&&(this.actionHandler(R),this.actionHandler(K)),e===B&&(this.actionHandler(M),this.actionHandler(T),this.actionHandler(X),this.actionHandler(K)),e===R&&this.props.onChange&&this.props.onChange(this.state.globalConfigurations,this.state.configurations),this.setState({action:e}),console.log("this.state.configurations: ",this.state.configurations),console.log("this.state.globalConfigurations: ",this.state.globalConfigurations)}},{key:"render",value:function(){var e=this;if(this.state.isLoading)return u.a.createElement(m.a,{size:"large",variant:"brand"});var t=null==this.state.configurations||0===Object.keys(this.state.configurations).length;return u.a.createElement("div",{className:"slds-grid slds-grid_vertical",style:{flexGrow:1}},this.state.isModalOpen?u.a.createElement(c.Suspense,{fallback:u.a.createElement(m.a,{size:"large",variant:"brand"})},u.a.createElement(f.a,{assistiveText:{dialogLabel:"Configuration Form"},isOpen:this.state.isModalOpen,footer:[this.state.isConfigurationFormOpened?u.a.createElement(u.a.Fragment,{key:"modal-action-"+this.state.action},u.a.createElement(g.a,{key:"configuration-save",label:"Save",variant:"brand",onClick:function(){e.actionHandler(L)}}),this.state.action===F?u.a.createElement(g.a,{variant:"destructive",label:"Delete",onClick:function(){e.actionHandler(j)}}):null):null,this.state.isSFLoginFormOpened?u.a.createElement(u.a.Fragment,{key:"modal-action-"+this.state.action},u.a.createElement(g.a,{label:"Save",variant:"brand",onClick:function(){e.actionHandler(P,{dataSourceIndex:e.state.dataSourceIndex,dataSource:e.state.dataSource,configuration:e.state.configuration,selectedConfigurationName:e.state.selectedConfigurationName})}}),this.state.action===z?u.a.createElement(g.a,{variant:"destructive",label:"Delete",onClick:function(){e.actionHandler(I)}}):null):null,this.state.isBulkRestoreFormOpened?u.a.createElement(u.a.Fragment,{key:"modal-action-"+this.state.action},u.a.createElement(g.a,{label:"Save",variant:"brand",onClick:function(){e.actionHandler(X)}}),this.state.action===z?u.a.createElement(g.a,{variant:"destructive",label:"Delete",onClick:function(){e.actionHandler(X)}}):null):null,this.state.isGlobalConfigurationsFormOpened?u.a.createElement(u.a.Fragment,{key:"modal-action-"+this.state.action},u.a.createElement(g.a,{label:"Save",variant:"brand",onClick:function(){e.actionHandler(W)}})):null,u.a.createElement(g.a,{key:"configuration-cancel",label:"Cancel",onClick:function(){e.actionHandler(B)}})],dismissOnClickOutside:!1,onRequestClose:function(){e.actionHandler(B)},align:"top",size:this.state.modalSize,ariaHideApp:!1},this.state.isConfigurationFormOpened?u.a.createElement(S,{title:this.state.configurationName,configuration:this.state.configuration,onChange:function(t,a){console.log(t,a),e.setState({configurationName:t,configuration:a})}}):null,this.state.isSFLoginFormOpened?u.a.createElement(O,{dataSource:this.state.dataSource,configuration:this.state.configuration,dataSourceIndex:this.state.dataSourceIndex,onChange:function(t,a){e.setState({dataSource:a})},onLogin:function(e,t){console.log(JSON.stringify(t))}}):null,",",this.state.isBulkRestoreFormOpened?u.a.createElement(v,{globalConfigurations:this.state.globalConfigurations,configuration:this.state.configuration,onChange:function(e,t,a){console.log(e),console.log(t),console.log(JSON.stringify(a))},onLogin:function(e){console.log(JSON.stringify(e))}}):null,this.state.isGlobalConfigurationsFormOpened?u.a.createElement(E,{globalConfigurations:this.state.globalConfigurations,configurations:this.state.configurations,onChange:function(t,a){console.log(t,a),e.setState({configurations:t,globalConfigurations:a})}}):null)):null,u.a.createElement(h.a,{id:"grax-cloud-configurations",heading:"GRAX Configurations",empty:t?u.a.createElement(p.a,{heading:"No GRAX Configurations"},u.a.createElement(g.a,{label:"Add Configuration",onClick:function(){e.actionHandler(y)}})):null,style:{flexGrow:1}},u.a.createElement("div",{id:"grax-cloud-configurations-accordion",className:"slds-p-around_medium"},u.a.createElement(Q,null,u.a.createElement(U,{isCollapsible:!1,id:"grax-cloud-global-configurations",key:"grax-cloud-global-configurations",label:"Global Configurations",level:1,isEditable:!0,icon:x,onEdit:function(){e.actionHandler(q,{configurations:e.state.configurations})}}),C.a.map(this.state.configurations,(function(t,a){var n="grax-cloud-configurations-accordion-"+C.a.kebabCase(a);return u.a.createElement(U,{isOpen:e.state.configurationCollapsibleOpen===a,isCollapsible:!0,id:n,key:n,onToggle:function(t){e.setState({configurationCollapsibleOpen:t?a:null})},isToggleOnClick:!0,label:a,level:1,isEditable:!0,icon:x,onEdit:function(){e.actionHandler(F,{configurationName:a,configuration:t})}},u.a.createElement(U,{id:"grax-cloud-configurations-sfconnection-accordion-item",key:"grax-cloud-configurations-sfconnection-accordion-item",label:"SFDC Configurations",level:2,isEditable:!1,isCollapsible:!0,isOpen:!1,isToggleOnClick:!0},C.a.map(t.dataSources,(function(n,i){if(null==n)return null;var o=C.a.uniqueId("grax-cloud-configurations-accordion-item");return u.a.createElement(U,{id:o,key:o,label:n.name,level:3,isEditable:!0,icon:H,onEdit:function(){e.actionHandler(z,{configurationName:a,configuration:t,dataSourceIndex:i,dataSource:n})}})})),u.a.createElement(U,{content:u.a.createElement(g.a,{label:"Add SFDC Configuration",onClick:function(n){e.actionHandler(_,{configurationName:a,configuration:t,dataSourceIndex:t.dataSources.length})}}),level:3})))})),u.a.createElement(U,{content:u.a.createElement(g.a,{label:"Add GRAX Configuration",onClick:function(){e.actionHandler(y)}}),level:1})))))}}]),t}(u.a.Component)}}]);
//# sourceMappingURL=28.8da28f96.chunk.js.map