(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[13],{196:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var r=a(48),n=a(49),o=a(52),s=a(50),i=a(54),l=a(51),c=a(1),u=a.n(c),d=a(7),p=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).state={isOpen:!0===e.isOpen||void 0===e.isCollapsible},a.handleToggle=a.handleToggle.bind(Object(i.a)(a)),a}return Object(l.a)(t,e),Object(n.a)(t,[{key:"handleToggle",value:function(e){var t=!this.state.isOpen;this.setState({isOpen:t}),this.props.onToggle&&this.props.onToggle(t),e.preventDefault()}},{key:"render",value:function(){var e=u.a.createElement("span",{className:"slds-truncate"+(this.props.isCollapsible?"":" slds-p-horizontal_small"),title:this.props.title},this.props.title);return u.a.createElement("div",{id:this.props.id||this.props.key,className:["slds-section",this.state.isOpen&&"slds-is-open",this.props.className].join(" ")},u.a.createElement("h3",{className:"slds-section__title slds-theme_shade"},this.props.isCollapsible?u.a.createElement("button",{className:"slds-button slds-section__title-action",onClick:this.handleToggle},u.a.createElement(d.a,{assistiveText:{label:this.props.title},category:"utility",name:"switch",size:"x-small",className:"slds-section__title-action-icon slds-button__icon slds-button__icon_left"}),e):e),this.state.isOpen&&u.a.createElement("div",{className:"slds-section__content"},this.props.children))}}]),t}(u.a.Component)},206:function(e,t,a){"use strict";var r=a(1),n=a.n(r),o=a(0),s=a.n(o),i=a(2),l=a.n(i),c=a(6),u=a.n(c),d=a(17),p=a.n(d),h=a(3);function g(e){return(g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function m(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return!t||"object"!==g(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var y={assistiveText:s.a.shape({label:s.a.string,required:s.a.string}),children:s.a.node.isRequired,className:s.a.oneOfType([s.a.array,s.a.object,s.a.string]),labels:s.a.shape({error:s.a.string,label:s.a.string}),onChange:s.a.func,disabled:s.a.bool,required:s.a.bool,name:s.a.string,errorId:s.a.string,variant:s.a.oneOf(["base","button-group"])},C={assistiveText:{required:"Required"},labels:{},variant:"base"},O=function(e){function t(e){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=b(this,v(t).call(this,e))).generatedName=u.a.generate(),a.generatedErrorId=u.a.generate(),a}var a,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(t,e),a=t,(r=[{key:"getErrorId",value:function(){if(this.hasError())return this.props.errorId||this.generatedErrorId}},{key:"getName",value:function(){return this.props.name||this.generatedName}},{key:"hasError",value:function(){return!!this.labels.error}},{key:"render",value:function(){var e=this;this.labels=this.props.labels?p()({},C.labels,this.props.labels):C.labels;var t=function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{},r=Object.keys(a);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(a).filter((function(e){return Object.getOwnPropertyDescriptor(a,e).enumerable})))),r.forEach((function(t){f(e,t,a[t])}))}return e}({},C.assistiveText,this.props.assistiveText),a=n.a.Children.map(this.props.children,(function(t){return n.a.cloneElement(t,{name:e.getName(),onChange:e.props.onChange,"aria-describedby":e.getErrorId(),disabled:e.props.disabled})}));return n.a.createElement("fieldset",{className:l()("slds-form-element",{"slds-has-error":this.labels.error})},n.a.createElement("legend",{className:l()("slds-form-element__legend","slds-form-element__label",t.label?"slds-assistive-text":"")},this.props.required?n.a.createElement("abbr",{className:"slds-required",title:"required"},"*",n.a.createElement("div",{className:"slds-assistive-text"},t.required," ")):null,t.label?t.label:this.labels.label),n.a.createElement("div",{className:l()("slds-form-element__control",this.props.className)},"button-group"===this.props.variant?n.a.createElement("div",{style:this.props.style,className:"slds-radio_button-group"},a):a,this.labels.error?n.a.createElement("div",{id:this.getErrorId(),className:"slds-form-element__help"},this.labels.error):null))}}])&&m(a.prototype,r),o&&m(a,o),t}(n.a.Component);O.displayName=h.Q,O.propTypes=y,O.defaultProps=C;var E=O;function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var r in a)Object.prototype.hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e}).apply(this,arguments)}function x(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}var _={assistiveText:s.a.shape({label:s.a.string}),children:s.a.node.isRequired,className:s.a.oneOfType([s.a.array,s.a.object,s.a.string]),labels:s.a.shape({error:s.a.string,label:s.a.string}),onChange:s.a.func,disabled:s.a.bool,required:s.a.bool,name:s.a.string,errorId:s.a.string},N=function(e){e.variant;var t=x(e,["variant"]);return n.a.createElement(E,I({variant:"button-group"},t))};N.displayName=h.P,N.propTypes=_,N.defaultProps={labels:{},assistiveText:{}};t.a=N},214:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return C}));var r=a(8),n=a(48),o=a(49),s=a(52),i=a(50),l=a(54),c=a(51),u=a(1),d=a.n(u),p=a(70),h=a(174),g=a(206),f=a(117),m=a(15),b=a(196),v=a(53),S=a(35),y=a.n(S),C=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(s.a)(this,Object(i.a)(t).call(this,e))).getSFConnectionInfoHandler=function(){var e=a.state.configuration.dataSources[a.props.dataSourceIndex];return null==e||0===e.length?alert("Incomplete data"):(null==e.provider&&(e.provider="salesforce"),null==e.userName?alert("User Name required"):null==e.password?alert("Password required"):null==e.url?alert("Url required"):(a.setState({isLoading:!0}),void v.a.ajax({type:"POST",url:v.c+"/grax-app/grax-cloud/salesforce/login",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),skipFail:!0,success:function(t){console.log(t),e.instanceUrl=null,e.organizationId=null,null!=t.accessToken?(e.instanceUrl=t.userInfo.instanceUrl,e.organizationId=t.userInfo.organizationId,alert("Success!")):alert("Invalid Login"),this.setState({dataSource:e,isLoading:!1}),this.triggerConfigurationChange()}.bind(Object(l.a)(a)),error:function(e,t,a){return console.error(e,t,a),this.setState({isLoading:!1}),alert("Error!"),!1}.bind(Object(l.a)(a))})))},a.onGetConfig=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return y.a.get(a.state.configuration,[].concat(t,[e]),r)}},a.onChangeConfig=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return function(n){null!=n&&n.hasOwnProperty("originalEvent")&&n.persist();var o=a.state.configuration;y.a.set(o,[].concat(t,[e]),n.target[r]),a.setState({configuration:o}),a.triggerConfigurationChange()}}},a.state={isLoading:!0,error:null,configuration:{},dataSourceIndex:0,isMetadataBackupEnabled:!1},a.triggerConfigurationChange=a.triggerConfigurationChange.bind(Object(l.a)(a)),a.loginHandler=a.loginHandler.bind(Object(l.a)(a)),a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.configuration?y.a.cloneDeep(this.props.configuration):{};e.dataSources||(e.dataSources=[]);var t={name:"New Data Source",provider:"salesforce"};e.dataSources[this.props.dataSourceIndex]&&(t=Object(r.a)({},t,{},e.dataSources[this.props.dataSourceIndex])),e.dataSources[this.props.dataSourceIndex]=t,this.triggerConfigurationChange(e),this.setState({isLoading:!1,configuration:e})}},{key:"triggerConfigurationChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.configuration;this.props.onChange&&this.props.onChange(e,y.a.get(e,["dataSources",this.props.dataSourceIndex]))}},{key:"loginHandler",value:function(){if(this.props.onLogin){var e=this.state.configuration,t=e.dataSources[this.props.dataSourceIndex];this.props.onLogin(e,t)}}},{key:"render",value:function(){return d.a.createElement(d.a.Fragment,null,this.state.isLoading?d.a.createElement(p.a,{size:"large",variant:"brand"}):null,d.a.createElement("div",{className:"slds-p-around_medium"},d.a.createElement(b.a,{title:"Salesforce Connection"},d.a.createElement("div",{className:"slds-grid slds-gutters_direct slds-grid_vertical-align-center slds-p-bottom_medium"},d.a.createElement("div",{className:"slds-col"},d.a.createElement(h.a,{id:"sf-connection-name",label:"Conection Name",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("name"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("name")}),d.a.createElement(g.a,{labels:{label:"Authentication Type"},onChange:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("provider"),className:"slds-m-top_small"},d.a.createElement(f.a,{id:"authentication-type-username-password",label:"Username / Password",value:"salesforce",checked:"salesforce"===this.onGetConfig("dataSources",this.props.dataSourceIndex)("provider"),variant:"button-group"}),d.a.createElement(f.a,{id:"authentication-type-oauth",label:"OAuth",value:"oauth",checked:"oauth"===this.onGetConfig("dataSources",this.props.dataSourceIndex)("provider"),variant:"button-group"})))),"oauth"===this.onGetConfig("dataSources",this.props.dataSourceIndex)("provider")?d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"slds-grid slds-gutters_direct slds-grid_vertical-align-center"},d.a.createElement("div",{className:"slds-col"},d.a.createElement(h.a,{id:"oauth-client-id",label:"Client Id",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("clientId"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("clientId")}),d.a.createElement(h.a,{id:"oauth-client-secret",label:"Client Secret",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("clientSecret"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("clientSecret")}),d.a.createElement(h.a,{id:"oauth-token-url",label:"Token URL",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("tokenUrl"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("tokenUrl")})))):null),"salesforce"===this.onGetConfig("dataSources",this.props.dataSourceIndex)("provider")?d.a.createElement(b.a,{title:"Login Details"},d.a.createElement("div",{className:"slds-grid slds-gutters_direct slds-grid_vertical-align-center"},d.a.createElement("div",{className:"slds-col"},d.a.createElement(h.a,{id:"sfdc-username",label:"SFDC Username",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("userName"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("userName")}),d.a.createElement(h.a,{id:"sfdc-password",type:"password",label:"SFDC Password",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("password"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("password")}),d.a.createElement(h.a,{id:"sfdc-url",label:"SFDC URL",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("url"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("url")})),d.a.createElement("div",{className:"slds-col"},d.a.createElement(h.a,{id:"sfdc-token",label:"SFDC Security Token",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("token"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("token")}),d.a.createElement(h.a,{id:"sfdc-org-id",label:"SFDC Organization ID (18 Digit)",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("organizationId"),readOnly:!0}),d.a.createElement(h.a,{id:"sfdc-org-title",label:"SFDC Organization Title",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("name"),readOnly:!0}))),d.a.createElement("div",{className:"slds-p-top_medium"},d.a.createElement(m.a,{label:"Connect to SFDC",variant:"brand",onClick:this.getSFConnectionInfoHandler}))):null))}}]),t}(d.a.Component)}}]);
//# sourceMappingURL=13.c423d57a.chunk.js.map