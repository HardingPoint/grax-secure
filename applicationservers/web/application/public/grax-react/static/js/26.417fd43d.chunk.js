(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[26],{150:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return I}));var n=a(65),s=a(9),o=a(10),r=a(13),i=a(11),l=a(18),c=a(12),d=a(1),u=a.n(d),p=a(50),g=a(155),h=a(124),f=a(70),S=a(62),m=a(57),C=a(54),v=a(8),b=a.n(v),I=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).getSFConnectionInfoHandler=function(){var e=a.state.configuration.dataSources[a.props.dataSourceIndex];return null==e||0===e.length?alert("Incomplete data"):(null==e.provider&&(e.provider="salesforce"),null==e.userName?alert("User Name required"):null==e.password?alert("Password required"):null==e.url?alert("Url required"):(a.setState({isLoading:!0}),void C.a.ajax({type:"POST",url:C.c+"/grax-app/grax-cloud/salesforce/login",contentType:"application/json; charset=utf-8",data:JSON.stringify(e),skipFail:!0,success:function(t){console.log(t),e.instanceUrl=null,e.organizationId=null,null!=t.accessToken?(e.instanceUrl=t.userInfo.instanceUrl,e.organizationId=t.userInfo.organizationId,alert("Success!")):alert("Invalid Login"),this.setState({dataSource:e,isLoading:!1}),this.triggerConfigurationChange()}.bind(Object(l.a)(a)),error:function(e,t,a){return console.error(e,t,a),this.setState({isLoading:!1}),alert("Error!"),!1}.bind(Object(l.a)(a))})))},a.onGetConfig=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return b.a.get(a.state.configuration,[].concat(t,[e]),n)}},a.onChangeConfig=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"value";return function(s){null!=s&&s.hasOwnProperty("originalEvent")&&s.persist();var o=a.state.configuration;b.a.set(o,[].concat(t,[e]),s.target[n]),a.setState({configuration:o}),a.triggerConfigurationChange()}}},a.state={isLoading:!0,error:null,configuration:{},dataSourceIndex:0,isMetadataBackupEnabled:!1},a.triggerConfigurationChange=a.triggerConfigurationChange.bind(Object(l.a)(a)),a.loginHandler=a.loginHandler.bind(Object(l.a)(a)),a}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.configuration?b.a.cloneDeep(this.props.configuration):{};e.dataSources||(e.dataSources=[]);var t={name:"New Data Source",provider:"salesforce"};e.dataSources[this.props.dataSourceIndex]&&(t=Object(n.a)({},t,{},e.dataSources[this.props.dataSourceIndex])),e.dataSources[this.props.dataSourceIndex]=t,this.triggerConfigurationChange(e),this.setState({isLoading:!1,configuration:e})}},{key:"triggerConfigurationChange",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.configuration;this.props.onChange&&this.props.onChange(e,b.a.get(e,["dataSources",this.props.dataSourceIndex]))}},{key:"loginHandler",value:function(){if(this.props.onLogin){var e=this.state.configuration,t=e.dataSources[this.props.dataSourceIndex];this.props.onLogin(e,t)}}},{key:"render",value:function(){return u.a.createElement(u.a.Fragment,null,this.state.isLoading?u.a.createElement(p.a,{size:"large",variant:"brand"}):null,u.a.createElement("div",{className:"slds-p-around_medium"},u.a.createElement(m.a,{title:"Salesforce Connection"},u.a.createElement("div",{className:"slds-grid slds-gutters_direct slds-grid_vertical-align-center slds-p-bottom_medium"},u.a.createElement("div",{className:"slds-col"},u.a.createElement(g.a,{id:"sf-connection-name",label:"Conection Name",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("name"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("name")}),u.a.createElement(h.a,{labels:{label:"Authentication Type"},onChange:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("provider"),className:"slds-m-top_small"},u.a.createElement(f.a,{id:"authentication-type-username-password",label:"Username / Password",value:"salesforce",checked:"salesforce"===this.onGetConfig("dataSources",this.props.dataSourceIndex)("provider"),variant:"button-group"}),u.a.createElement(f.a,{id:"authentication-type-oauth",label:"OAuth",value:"oauth",checked:"oauth"===this.onGetConfig("dataSources",this.props.dataSourceIndex)("provider"),variant:"button-group"})))),"oauth"===this.onGetConfig("dataSources",this.props.dataSourceIndex)("provider")?u.a.createElement(u.a.Fragment,null,u.a.createElement("div",{className:"slds-grid slds-gutters_direct slds-grid_vertical-align-center"},u.a.createElement("div",{className:"slds-col"},u.a.createElement(g.a,{id:"oauth-client-id",label:"Client Id",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("clientId"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("clientId")}),u.a.createElement(g.a,{id:"oauth-client-secret",label:"Client Secret",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("clientSecret"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("clientSecret")}),u.a.createElement(g.a,{id:"oauth-token-url",label:"Token URL",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("tokenUrl"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("tokenUrl")})))):null),"salesforce"===this.onGetConfig("dataSources",this.props.dataSourceIndex)("provider")?u.a.createElement(m.a,{title:"Login Details"},u.a.createElement("div",{className:"slds-grid slds-gutters_direct slds-grid_vertical-align-center"},u.a.createElement("div",{className:"slds-col"},u.a.createElement(g.a,{id:"sfdc-username",label:"SFDC Username",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("userName"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("userName")}),u.a.createElement(g.a,{id:"sfdc-password",type:"password",label:"SFDC Password",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("password"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("password")}),u.a.createElement(g.a,{id:"sfdc-url",label:"SFDC URL",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("url"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("url")})),u.a.createElement("div",{className:"slds-col"},u.a.createElement(g.a,{id:"sfdc-token",label:"SFDC Security Token",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("token"),onBlur:this.onChangeConfig("dataSources",this.props.dataSourceIndex)("token")}),u.a.createElement(g.a,{id:"sfdc-org-id",label:"SFDC Organization ID (18 Digit)",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("organizationId"),readOnly:!0}),u.a.createElement(g.a,{id:"sfdc-org-title",label:"SFDC Organization Title",defaultValue:this.onGetConfig("dataSources",this.props.dataSourceIndex)("name"),readOnly:!0}))),u.a.createElement("div",{className:"slds-p-top_medium"},u.a.createElement(S.a,{label:"Connect to SFDC",variant:"brand",onClick:this.getSFConnectionInfoHandler}))):null))}}]),t}(u.a.Component)},57:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a(9),s=a(10),o=a(13),r=a(11),i=a(18),l=a(12),c=a(1),d=a.n(c),u=a(55),p=function(e){function t(e){var a;return Object(n.a)(this,t),(a=Object(o.a)(this,Object(r.a)(t).call(this,e))).state={isOpen:!0===e.isOpen||void 0===e.isCollapsible},a.handleToggle=a.handleToggle.bind(Object(i.a)(a)),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"handleToggle",value:function(e){var t=!this.state.isOpen;this.setState({isOpen:t}),this.props.onToggle&&this.props.onToggle(t),e.preventDefault()}},{key:"render",value:function(){var e=d.a.createElement("span",{className:"slds-truncate"+(this.props.isCollapsible?"":" slds-p-horizontal_small"),title:this.props.title},this.props.title);return d.a.createElement("div",{id:this.props.id||this.props.key,className:["slds-section",this.state.isOpen&&"slds-is-open",this.props.className].join(" ")},d.a.createElement("h3",{className:"slds-section__title slds-theme_shade"},this.props.isCollapsible?d.a.createElement("button",{className:"slds-button slds-section__title-action",onClick:this.handleToggle},d.a.createElement(u.a,{assistiveText:{label:this.props.title},category:"utility",name:"switch",size:"x-small",className:"slds-section__title-action-icon slds-button__icon slds-button__icon_left"}),e):e),this.state.isOpen&&d.a.createElement("div",{className:"slds-section__content"},this.props.children))}}]),t}(d.a.Component)}}]);
//# sourceMappingURL=26.417fd43d.chunk.js.map