(this.webpackJsonpgraxreact=this.webpackJsonpgraxreact||[]).push([[1],{11:function(e,t,a){"use strict";a.d(t,"k",(function(){return s})),a.d(t,"f",(function(){return d})),a.d(t,"h",(function(){return u})),a.d(t,"g",(function(){return m})),a.d(t,"c",(function(){return p})),a.d(t,"a",(function(){return f})),a.d(t,"b",(function(){return b})),a.d(t,"d",(function(){return O})),a.d(t,"j",(function(){return C})),a.d(t,"e",(function(){return j}));var n=a(56),r=a(27),l=a.n(r);a.d(t,"i",(function(){return l.a}));a(130),a(133);var c=a(35),i=a.n(c),o=l.a.locales();function s(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var r="expires="+n.toUTCString();document.cookie=e+"="+t+";"+r+";path=/"}function d(e){for(var t=e+"=",a=decodeURIComponent(document.cookie).split(";"),n=0;n<a.length;n++){for(var r=a[n];" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(t))return r.substring(t.length,r.length)}return""}var u=window!==window.parent,m=!!navigator.platform.match(/(Mac|iPhone|iPod|iPad)/i),p=/^((?:(?:19|20)\d{2})-(?:10|11|12|0?\d)-(?:30|31|(?:0|1|2)\d))((?:(?:T|\s)(?:(?:0|1|2)\d)(?:\:[0-5]\d)(?::[0-5]\d)?((?:(?:\.\d{3})?)?Z?(?:[+-](?:0|1|2)\d\:?[0-5]\d)?))?)$/,f="L LT",b="L",E=window.location.search.match(/[\?&]locale\=([^&]+)/),h=window.location.search.match(/[\?&]tz\=([^&]+)/),g=window.navigator.userLanguage||window.navigator.language,v=E?decodeURIComponent(E[1]).split("_").join("-"):g,O=h?decodeURIComponent(h[1]):l.a.tz.guess();console.log("Available localizations: "+o.join(", "));var _=v.toLowerCase();-1===o.indexOf(_)&&-1!==v.indexOf("-")&&(_=_.split("-")[0]),-1!==o.indexOf(_)?l.a.locale(_):l.a.locale("en"),O&&l.a.tz.setDefault(O),console.log("User Locale: "+v),console.log("Available Locale: "+l.a.locale()),console.log("User TimeZone: "+O);var j=function(e){var t=e.inputValue,a=e.limit,n=void 0===a?10:a,r=e.options,l=(e.selection,new RegExp(i.a.escapeRegExp(t),"ig"));return i.a.filter(r,(function(e,a){return!t||"separator"===e.type||e.label.match(l)||e.id.match(l)})).splice(0,n)},C=function(e,t,a){return Object.assign({},e,Object(n.a)({},t,a))}},122:function(e,t,a){e.exports=a(172)},127:function(e,t,a){},129:function(e,t,a){},172:function(e,t,a){"use strict";a.r(t);var n=a(1),r=a.n(n),l=a(14),c=a.n(l),i=(a(127),a(48)),o=a(49),s=a(52),d=a(50),u=a(51),m=a(70),p=a(66),f=a(192),b=a(188),E=a(42),h=a(39),g=(a(128),a(129),a(11)),v=a(4),O=a(16),_=a(193),j=a(183),C="".concat("/grax-app/client/cloud","/configurations"),y="".concat("/grax-app/client/cloud","/dedup"),S="".concat("/graxproxy/api/dedup","/scenarios"),N=[{id:"grax_cloud",label:"GRAX Cloud",items:[{route:"".concat(C),id:"configurations",label:"Configurations"},{route:"".concat(y,"/scenarios"),id:"dedup",label:"Dedup"}]}],x=a(8),w=Object(n.createContext)(),R=function(e){var t=e.children,a=Object(n.useState)({variant:"success",isOpen:!1}),l=Object(v.a)(a,2),c=l[0],i=l[1],o=Object(n.useCallback)((function(e){var t=e.heading;return i((function(e){return Object(x.a)({},e,{isOpen:!0,heading:[t]})}))}),[]),s=Object(n.useCallback)((function(){return i((function(e){return Object(x.a)({},e,{isOpen:!1})}))}),[]),d=Object(n.useMemo)((function(){return c}),[c.isOpen]);return r.a.createElement(w.Provider,{value:Object(x.a)({},d,{openToast:o,closeToast:s})},t)},T=(a(182),a(195),function(e){var t=e.routes,a=e.exact,l=(e.path,e.isEmbeded,Object(O.a)(e,["routes","exact","path","isEmbeded"]),Object(h.f)()),c=Object(n.useState)("configurations"),i=Object(v.a)(c,2),o=i[0],s=i[1];return r.a.createElement("div",{className:"slds-grid",id:"grax-cloud"},r.a.createElement("div",{className:"slds-col slds-size_1-of-4",style:{height:"100vh"}},r.a.createElement(_.a,{id:"grax-cloud-navigation",categories:N,selectedId:o,onSelect:function(e,t){return function(e){var t=e.route,a=e.id;l.push(t),s(a)}(t.item)}})),r.a.createElement("div",{className:"slds-col slds-size_3-of-4"},r.a.createElement(R,null,r.a.createElement(j.a,{className:"custom-brand-band-class slds-p-around_medium",id:"brand-band-lightning-blue",theme:"lightning-blue"},r.a.createElement(h.c,null,t.map((function(e,t){return r.a.createElement(h.a,{key:"cloud-sub-route-".concat(t),path:e.path,exact:a,render:function(t){return r.a.createElement(e.component,t)}})})))))))}),A=a(189),k=a(191),D=a(190),F=a(184),I=a(15),M=(a(185),function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{variant:"list"},r.a.createElement(I.a,{label:"Create Scenario",onClick:e})))}),L=a(97),z=a(61),V=a(99),P=function(e){e.children;var t=e.onRowAction,a=Object(O.a)(e,["children","onRowAction"]),n=[];return"SUCCESS"!==a.item.job_status&&n.push({value:1,label:"Run"}),n.push({value:2,label:"Clone"},{value:3,label:"Edit"},{value:4,label:"Delete"}),r.a.createElement(L.a,a,r.a.createElement(z.a,{align:"right",iconCategory:"utility",iconName:"down",iconVariant:"border-filled",onSelect:function(e){return t(a.item.id,e)},buttonClassName:"slds-button_icon-small",options:n}))},H=function(e){e.children;var t=Object(O.a)(e,["children"]);return r.a.createElement(L.a,t,"SUCCESS"===t.item.job_status?r.a.createElement("a",{href:function(e){return e.preventDefault()},onClick:function(){return t.viewDuplicates(t.item.id)}},"View Duplicates"):"View Duplicates")},q=function(e){e.children;var t=Object(O.a)(e,["children"]),a="";return null!==t.item.groups_count&&null!==t.item.records_affected&&(a="".concat(t.item.groups_count," of ").concat(t.item.records_affected)),r.a.createElement(L.a,t,a)},U=function(e){var t=e.children,a=Object(O.a)(e,["children"]);return r.a.createElement(L.a,a,r.a.createElement("a",{href:function(e){return e.preventDefault()},onClick:function(){return a.viewScenario(a.item.id)}},t))},G=function(e){e.children;var t=Object(O.a)(e,["children"]).item.fields,a=t.length,n="";return a>0&&(n=t.slice(0,2).map((function(e){return e.split(".")[1]})).join(", "),a>2&&(n+=" +".concat(a-2))),r.a.createElement(L.a,null,n)},W=function(e){var t=e.children,a=Object(O.a)(e,["children"]);return r.a.createElement(L.a,a,1==t?"Yes":"No")};U.displayName=L.a.displayName,q.displayName=L.a.displayName,P.displayName=L.a.displayName,H.displayName=L.a.displayName,G.displayName=L.a.displayName,W.displayName=L.a.displayName;var B=[r.a.createElement(V.a,{key:"scenario-name",property:"name",label:"Name"},r.a.createElement(U,null)),r.a.createElement(V.a,{key:"object-name",property:"object_name",label:"Object Name"}),r.a.createElement(V.a,{key:"fields",property:"fields",label:"Fields"},r.a.createElement(G,null)),r.a.createElement(V.a,{key:"merge-actions",property:"scenario_action",label:"Merge Action"}),r.a.createElement(V.a,{key:"fields",property:"is_active",label:"Is Active"},r.a.createElement(W,null)),r.a.createElement(V.a,{key:"duplicate-counts",label:"Duplicate Counts"},r.a.createElement(q,null)),r.a.createElement(V.a,{key:"view-results",property:"job_status"},r.a.createElement(H,null)),r.a.createElement(V.a,{key:"row-actions",property:"job_status",label:""},r.a.createElement(P,null))],Y=a(69),J=a.n(Y),X=a(13),Z=a(100),K=a.n(Z).a.create({headers:{"x-api-key":"NdWcGdVWYM50L8kgeN58x4KRigO4C3EM2x64Y9ni",authorizationtoken:"be16d9a4626a37f718b7e703b6d96e66339929979f981e27b93aaf142f198bd1","content-type":"application/json",licensetoken:"U2FsdGVkX1/FGHjMNBbmHsnxnniNJBD3Vjhr6p6o/0JKQFg2zgZeywTxMOMCfDfjVKCgTycX+70VDTDOC26pjvTVrDDqwat2ejGHwNtCSUU=",authorization:"Basic TmRXY0dkVldZTTUwTDhrZ2VONTh4NEtSaWdPNEMzRU0yeDY0WTluaTpiZTE2ZDlhNDYyNmEzN2Y3MThiN2U3MDNiNmQ5NmU2NjMzOTkyOTk3OWY5ODFlMjdiOTNhYWYxNDJmMTk4YmQx","cache-control":"no-cache","postman-token":"43a79bfa-39b6-000a-1e6c-1d695208a8f1"},params:{sfdcorgid:""}});K.interceptors.request.use((function(e){return e}));var Q=K,$=function(e,t){switch(t.type){case"FETCH_SET_DATA":case"FETCH_IS_LOADING":case"FETCH_THROW_ERROR":case"FETCH_SET_STATUS":var a=t.payload;return Object(x.a)({},e,{},a);default:throw new Error}},ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=Object(X.a)({},e),r=Object(n.useState)(a),l=Object(v.a)(r,2),c=l[0],i=l[1],o=Object(n.useReducer)($,Object(x.a)({data:null,isLoading:null,error:null,status:null},t)),s=Object(v.a)(o,2),d=s[0],u=s[1];return Object(n.useEffect)((function(){void 0!==c.url&&(u({type:"FETCH_IS_LOADING",payload:{isLoading:!0}}),function(){var e;J.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,J.a.awrap(Q(c));case 3:e=t.sent,u({type:"FETCH_SET_DATA",payload:{data:e.data}}),u({type:"FETCH_SET_STATUS",payload:{status:e.status}}),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),u({type:"FETCH_THROW_ERROR",payload:{error:t.t0}}),void 0!==t.t0.response&&u({type:"FETCH_SET_STATUS",payload:{status:t.t0.response.status}});case 12:case"end":return t.stop()}}),null,null,[[0,8]])}(),u({type:"FETCH_IS_LOADING",payload:{isLoading:!1}}))}),[c]),[d,i]},te=function(){var e=ee(),t=Object(v.a)(e,2),a=t[0],n=t[1];return[a,function(e){return n({url:"".concat(S,"/").concat(e),method:"POST"})}]},ae=function(){var e=ee(),t=Object(v.a)(e,2),a=t[0],n=t[1];return[a,function(e){return n({url:"".concat(S,"/").concat(e),method:"DELETE",params:{sfdcorgid:""}})}]},ne=function(){var e=ee(null,{data:{data:[]}}),t=Object(v.a)(e,2),a=t[0],n=t[1];return[a,function(e){return n({url:"".concat(S,"/").concat(e,"/run"),params:{sfdcorgid:""},method:"POST"})}]},re=function(){var e=function(){var e=ee(null,{data:{data:[]}}),t=Object(v.a)(e,2),a=t[0],n=t[1];return[a,function(){return n({url:S,params:{sfdcorgid:""}})}]}(),t=Object(v.a)(e,2),a=t[0],r=t[1],l=ae(),c=Object(v.a)(l,2),i=c[0],o=c[1],s=ne(),d=Object(v.a)(s,2),u=d[0],m=d[1],p=te(),f=Object(v.a)(p,2),b=f[0],E=f[1],g=Object(h.f)(),O=Object(n.useContext)(w).openToast;Object(n.useEffect)(r,[]),Object(n.useEffect)((function(){null!==b.data&&b.data.data.id?O({heading:["Scenario Cloned"]}):null!==i.status&&200===i.status?(O({heading:["Scenario Deleted"]}),r()):null!==u.data&&"success"===u.data.status&&(O({heading:["Scenario is Running"]}),r())}),[b.data,i.data,u.data]);var _=function(e){return g.push("".concat(y,"/scenarios/").concat(e))},j=function(e){return g.push("".concat(y,"/duplicates/").concat(e))};return[a,{createScenario:function(){return g.push("".concat(y,"/scenarios/new"))},viewScenario:_,viewDuplicates:j,onRowAction:function(e,t){switch(t.value){case 1:m(e);break;case 5:j(e);break;case 2:E(e);break;case 3:_(e);break;case 4:o(e)}}}]},le=function(){var e=re(),t=Object(v.a)(e,2),a=t[0],n=t[1],l=n.onRowAction,c=n.createScenario,i=n.viewScenario,o=n.viewDuplicates;return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{className:"slds-m-bottom_large",title:"Scenarios",variant:"object-home",onRenderActions:M.bind(null,c),trail:[r.a.createElement("a",{href:"javascript:void(0);"},"Dedup")]}),r.a.createElement(k.a,{style:{flexGrow:1},heading:"All Scenarios"},r.a.createElement(D.a,{items:a.data.data,noRowHover:!0,viewScenario:i,viewDuplicates:o,onRowAction:l},B)))};le.displayName="DedupScenarios";var ce=le,ie=a(186),oe=function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],r=t[1],l=ee(),c=Object(v.a)(l,2),i=c[0],o=c[1];return Object(n.useEffect)((function(){if(null!==i.data){var e=[],t=i.data;for(var a in t)if(1===a.split(".").length&&!1===a.startsWith("grax")){var n=t[a];e.push({label:a,value:"doc.".concat(a),dataType:n})}r(e)}}),[i.data]),[a,function(e){""!==e?o({url:"".concat("/grax-app/grax-data-lake","/getDataTypeFields/").concat(e,"?action=load"),params:{sfdcorgid:""}}):r([])}]},se={isEditMode:!1,objectIndex:"",formState:{filterCriteria:[],matchCriteria:[{}],sfdcorgid:"",name:"",description:"",object_name:"",is_active:!0,scenario_action:"MANUAL_MERGE",fields:[],results_table_fields:[],records_affected:null,groups_count:null},editMode:{}},de=function(e,t){switch(t.type){case"SCENARIO_LOAD":var a=t.payload;return Object(x.a)({},e,{isEditMode:t.payload.isEditMode,formState:{matchCriteria:a.matchCriteria,filterCriteria:t.payload.filterCriteria,name:a.name,description:a.description,object_name:a.object_name,results_table_fields:a.results_table_fields,fields:a.fields,is_active:a.is_active,scenario_action:a.scenario_action}});case"SCENARIO_SET_MATCH_CRITERIA":case"SCENARIO_SET_FILTER_CRITERIA":case"SCENARIO_SET_NAME":case"SCENARIO_SET_DESCRIPTION":case"SCENARIO_SET_IS_ACTIVE":case"SCENARIO_SET_SCENARIO_ACTION":var n=t.payload,r=Object(x.a)({},e,{formState:Object(x.a)({},e.formState,{},n)});return!0===e.isEditMode&&(r=Object(x.a)({},r,{editMode:Object(x.a)({},e.editMode,{},n)})),r;case"SCENARIO_SET_RESULTS_TABLE_FIELDS":var l=t.payload.fields.map((function(e){return e.value})),c=Object(x.a)({},e,{formState:Object(x.a)({},e.formState,{results_table_fields:l})});return!0===e.isEditMode&&(c=Object(x.a)({},c,{editMode:Object(x.a)({},c.editMode,{results_table_fields:l})})),c;case"SCENARIO_SET_FIELDS":var i=t.payload.fields.map((function(e){return e.value})),o=Object(x.a)({},e,{formState:Object(x.a)({},e.formState,{fields:i})});return!0===e.isEditMode&&(o=Object(x.a)({},o,{editMode:Object(x.a)({},o.editMode,{fields:i})})),o;case"SCENARIO_SET_OBJECT_NAME":var s=t.payload,d=e.formState.matchCriteria.map((function(e){return Object(x.a)({},e,{field_name:"",operator:""})})),u=e.formState.filterCriteria.map((function(e){return Object(x.a)({},e,{field_name:"",operator:""})})),m=Object(x.a)({},e,{objectIndex:s.objectIndex,formState:Object(x.a)({},e.formState,{object_name:s.object_name,matchCriteria:d,filterCriteria:u})});return!0===e.isEditMode&&(m=Object(x.a)({},m,{editMode:Object(x.a)({},m.editMode,{object_name:s.object_name,matchCriteria:d,filterCriteria:u})})),m;default:throw new Error}},ue=function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],r=t[1],l=ee({url:"".concat("/grax-app/grax-data-lake","/getDataTypes"),params:{sfdcorgid:""}}),c=Object(v.a)(l,1)[0];return Object(n.useEffect)((function(){null!==c.data&&r(c.data.filter((function(e){return!1===e.label.startsWith("grax")&&"logs"!==e.label})))}),[c.data]),a},me=function(){var e=Object(n.useReducer)(de,se),t=Object(v.a)(e,2),a=t[0],r=t[1],l=function(){var e=ee(),t=Object(v.a)(e,2),a=t[0],n=t[1];return[a,function(e){n({url:"".concat(S,"/").concat(e),params:{sfdcorgid:""}})}]}(),c=Object(v.a)(l,2),i=c[0],o=c[1],s=function(){var e=ee(),t=Object(v.a)(e,2),a=t[0],n=t[1];return[a,function(e){return n({url:S,method:"POST",data:e})}]}(),d=Object(v.a)(s,2),u=d[0],m=d[1],p=ae(),f=Object(v.a)(p,2),b=f[0],E=f[1],g=ne(),_=Object(v.a)(g,2),j=_[0],C=_[1],N=te(),R=Object(v.a)(N,2),T=R[0],A=R[1],k=function(){var e=ee(),t=Object(v.a)(e,2),a=t[0],n=t[1];return[a,function(e,t){"number"===typeof e&&n({url:"".concat(S,"/").concat(e),method:"PATCH",data:t,params:{sfdcorgid:""}})}]}(),D=Object(v.a)(k,2),F=D[0],I=D[1],M=oe(),L=Object(v.a)(M,2),z=L[0],V=L[1],P=Object(h.g)(),H=Object(h.f)(),q=Object(n.useContext)(w).openToast,U=Number(P.scenario_id),G=Number.isInteger(U),W="".concat(G?"Update":"Create"," Scenario"),B=a.formState,Y=ue();Object(n.useEffect)((function(){!0===G&&o(U)}),[G]),Object(n.useEffect)((function(){null!==i.data&&null===i.error&&r({type:"SCENARIO_LOAD",payload:Object(x.a)({isEditMode:G},i.data.data)})}),[i.data]),Object(n.useEffect)((function(){""!==a.objectIndex&&V(a.objectIndex)}),[a.objectIndex]),Object(n.useEffect)((function(){return r({type:"SCENARIO_SET_RESULTS_TABLE_FIELDS",payload:{fields:z}})}),[z]),Object(n.useEffect)((function(){var e=a.isEditMode,t=a.formState,n=a.objectIndex,r=t.object_name;if(!0===e&&""!==r&&""===n&&Y.length>0){var l=Y.find((function(e){return e.label===r}));void 0!==l&&V(l.id)}}),[Y,a.formState.object_name]),Object(n.useEffect)((function(){null!==u.data&&u.data.data.id?(q({heading:["New Scenario Created"]}),H.push("".concat(y,"/scenarios/").concat(u.data.data.id))):null!==T.data&&T.data.data.id?(q({heading:["Scenario Cloned"]}),H.push("".concat(y,"//scenarios/").concat(T.data.data.id))):null!==b.status&&200===b.status?(q({heading:["Scenario Deleted"]}),H.push("".concat(y,"/scenarios"))):null!==j.data&&"success"===j.data.status&&q({heading:["Scenario is Running"]})}),[u.data,T.data,b,F,j]),Object(n.useEffect)((function(){null!==F.data&&null===F.error&&q({heading:"Scenario Updated"})}),[F.data]);return[{formState:B,isEditMode:G,docPrefixedFields:z,scenarioId:U,heading:W,sObjects:Y},{dispatch:r,deleteScenario:E,cloneScenario:A,runDeduplication:C,viewDuplicates:function(e){return H.push("/grax-app/client/duplicates/".concat(e))},onSubmit:function(e){if(!0===a.isEditMode)I(U,a.editMode);else{var t=a.formState,n=(t.fields,Object(O.a)(t,["fields"]));m(n)}e.preventDefault()}}]},pe=a(0),fe=a.n(pe),be=a(194),Ee={isEditMode:fe.a.bool.isRequired,onDelete:fe.a.func,onDuplicate:fe.a.func},he=function(e){var t=e.isOpen,a=e.onDelete,n=e.onClose;return r.a.createElement(be.a,{disableClose:!0,footer:[r.a.createElement(I.a,{label:"Cancel",onClick:n}),r.a.createElement(I.a,{label:"Delete",variant:"destructive",onClick:function(){n(),a()}})],isOpen:t,onRequestClose:n,prompt:"error",size:"small",title:r.a.createElement("span",null,"Delete Scenario?")})},ge=function(e){var t=e.isEditMode,a=e.onDelete,l=e.onDuplicate,c=e.onRun,i=e.onViewDuplicates,o=Object(n.useState)(!1),s=Object(v.a)(o,2),d=s[0],u=s[1],m=r.a.createElement(I.a,{className:"slds-m-horizontal_xx-small",iconCategory:"utility",iconName:"delete",iconVariant:"border-filled",onClick:a}),p=r.a.createElement(z.a,{buttonVariant:"icon",checkmark:!0,iconName:"settings",iconSize:"large",iconVariant:"more",align:"right",onSelect:function(e){switch(e.value){case 1:c();break;case 5:i();break;default:l()}},options:[{label:"Run",value:1},{label:"View Result",value:5},{label:"Duplicate",value:2}]}),f=[];return!0===t&&(f.push(p),f.push(m),f.push(r.a.createElement(he,{isOpen:d,onClose:function(){return u(!1)},onDelete:a}))),f};ge.propType=Ee,ge.displayName="DedupScenarioCardActions";var ve=ge,Oe=a(174),_e=a(62),je={name:fe.a.string.required,description:fe.a.string.required,isActive:fe.a.bool.required,onChangeName:fe.a.func,onChangeDescription:fe.a.func,onChangeNameIsActive:fe.a.func},Ce=Object(n.memo)((function(e){var t=e.name,a=e.description,l=e.isActive,c=e.onChangeName,i=e.onChangeDescription,o=e.onChangeIsActive,s=Object(n.useRef)(0);return s.current=s.current+1,r.a.createElement(ie.a,{title:"General",className:"slds-m-bottom_medium slds-m-top_none",nonCollapsible:!0},r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_2-of-5"},r.a.createElement(Oe.a,{label:"Name",required:!0,value:t,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",{className:"slds-col slds-size_2-of-5"},r.a.createElement(Oe.a,{label:"Description",value:a,onChange:function(e){return i(e.target.value)}})),r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement("div",{className:"slds-form-element"},r.a.createElement("label",{className:"slds-form-element__label"},"Is Active"),r.a.createElement(_e.a,{checked:l,variant:"toggle",onChange:function(e,t){var a=t.checked;return o(a)}})))))}));Ce.prototype=je,Ce.prototype.displayName="DedupScenarioGeneral";var ye=Ce,Se=a(71),Ne=a(173),xe=a(187),we=function(e){var t=e.options,a=void 0===t?[]:t,l=e.onChange,c=Object(O.a)(e,["options","onChange"]),i=Object(n.useState)(""),o=Object(v.a)(i,2),s=o[0],d=o[1],u=Object(n.useState)([]),m=Object(v.a)(u,2),p=m[0],f=m[1],b=function(e,t){l&&l(e,t,a)};return r.a.createElement(Ne.a,Object.assign({events:{onChange:function(e,t){var a=t.value;return d(a)},onRequestRemoveSelectedOption:function(e,t){d(""),f(t.selection),b(e,t.selection)},onSelect:function(e,t){d(""),f(t.selection),b(e,t.selection)}},options:Object(xe.a)({inputValue:s,limit:1e3,options:a,selection:p}),selection:p,value:s,variant:"inline-listbox",required:!0,menuItemVisibleLength:5,classNameMenu:"slds-dropdown_length-7"},c))},Re=Object(n.createContext)(),Te=function(){return Object(n.useContext)(Re)},Ae=function(e){var t=e.children,a=ee({url:"".concat("/graxproxy/api/dedup","/metadata"),params:{sfdcorgid:""}},{data:{data:{operators:[],stopwords:[],synonyms:[]}}}),l=Object(v.a)(a,1)[0],c=Object(n.useMemo)((function(){return{metadata:l}}),[l]);return r.a.createElement(Re.Provider,{value:c},t)},ke={scenarioActions:fe.a.array,scenarioAction:fe.a.string,onChange:fe.a.func},De=function(e){var t=e.scenarioAction,a=e.onChange,l=Te().metadata.data.data.scenario_actions,c=Object(n.useRef)(0);return c.current=c.current+1,r.a.createElement("div",{className:"slds-col slds-size_2-of-5"},r.a.createElement(we,{options:function(e){var t=[];for(var a in e){var n=e[a].values;n=n.map((function(e){return{label:e.display_value,value:e.code}})),t.push.apply(t,Object(Se.a)(n))}return t}(l),value:t,labels:{placeholder:"Select Option"},required:!0,onChange:function(e,t){return a(1===t.length?t[0].value:null)}}))};De.prototype=ke,De.displayName="DedupScenarioMergeActions";var Fe=Object(n.memo)(De),Ie=function(e){var t=e.heading;e.onSubmit;return r.a.createElement(A.a,{className:"slds-m-bottom_large",title:t,variant:"object-home",trail:[r.a.createElement("span",null,"Dedup "),r.a.createElement("a",{href:"javascript:void(0);"},"Scenarios")],onRenderActions:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{variant:"list"},r.a.createElement(I.a,{label:"Save",type:"submit"})))}})},Me=function(e){var t=e.onRemove,a=Object(O.a)(e,["onRemove"]);return r.a.createElement("div",{className:"slds-col slds-size_1-of-12"},r.a.createElement("div",{className:"slds-form-element"},r.a.createElement("label",{className:"slds-form-element__label"},"\xa0"),r.a.createElement("div",{className:"slds-from_element__control"},r.a.createElement(I.a,Object.assign({onClick:t,iconCategory:"utility",variant:"icon",iconName:"delete",iconVariant:"border-filled"},a)))))},Le=function(e){var t=e.onClick,a=Object(O.a)(e,["onClick"]);return r.a.createElement(I.a,Object.assign({className:"slds-m-top_medium",label:"Add New Row",iconCategory:"utility",iconName:"add",iconPosition:"left",onClick:t},a))},ze=function e(t){return function(a){var l=a.rows,c=a.onChange,i=a.footer,o=a.hideFooter,s=Object(O.a)(a,["rows","onChange","footer","hideFooter"]),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return c(l.concat(e))},u=function(e,t){return c(l.map((function(a,n){return t===n?e:a})))},m="".concat(e.name).concat(t.name),p=[];t.displayName=m,l.map((function(e,a){return p.push(r.a.createElement(t,Object.assign({row:e,index:a,key:"".concat(m,"-").concat(a),onChange:function(e){return u(e,a)},onRemove:function(){return function(e){return c(l.filter((function(t,a){return e!==a})))}(a)}},s)))}));return[p,function(e,t){if(void 0===t)return r.a.isValidElement(e)?Object(n.cloneElement)(e,{addRow:d}):r.a.createElement(Le,{onClick:function(){return d({})}})}(i,o)]}};ze.displayName="withRepeating";var Ve=ze,Pe={fieldName:fe.a.string,docPrefixedFields:fe.a.arrayOf(fe.a.shape({label:fe.a.string,value:fe.a.string})),operator:fe.a.arrayOf(fe.a.shape({label:fe.a.string,value:fe.a.string})),onChangeField:fe.a.func,onChangeOperator:fe.a.func,operators:fe.a.arrayOf(fe.a.string)},He=function(e){var t=e.fieldName,a=e.operator,l=e.docPrefixedFields,c=e.onChangeField,i=e.onChangeOperator,o=Object(n.useState)(""),s=Object(v.a)(o,2),d=s[0],u=s[1],m=function(){var e=Object(n.useState)(null),t=Object(v.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)([]),c=Object(v.a)(l,2),i=c[0],o=c[1],s=Te().metadata.data.data.operators;return Object(n.useEffect)((function(){if(null===a)o([]);else{var e=s.filter((function(e){return e.applicable_data_types.includes(a)})).map((function(e){return{label:e.name,value:e.id}}));o(e)}}),[a,s]),[i,r]}(),p=Object(v.a)(m,2),f=p[0],b=p[1];Object(n.useEffect)((function(){if(0===f.length&&""!==t&&l.length>0){var e=l.find((function(e){return e.value===t}));void 0!==e&&b(e.dataType)}}),[l]),Object(n.useEffect)((function(){var e="";void 0!==t&&t.startsWith("doc.")&&(e=t.split("doc.")[1]),u(e)}),[t]);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement(we,{onChange:function(e,t){return function(e){if(1===e.length){var t=e[0],a=t.value,n=t.dataType;c(a),b(n)}else c(""),b(null)}(t)},options:l,value:d,required:!0,labels:{label:"Fields",placeholder:"Select Option"}})),r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement(we,{onChange:function(e,t){return i(1===t.length?t[0].label:"")},options:f,value:a,required:!0,labels:{label:"Operators",placeholder:"Select Option"}})))};He.prototype=Pe,He.displayName="DedupScenarioFieldsAndOperators";var qe=He,Ue={row:fe.a.shape({field:fe.a.string,operator:fe.a.string,value:fe.a.string,stopWord:fe.a.array,synonyms:fe.a.array,cleanse:fe.a.bool}),index:fe.a.number,onChange:fe.a.func,onRemove:fe.a.func,docPrefixedFields:fe.a.arrayOf(fe.a.shape({label:fe.a.string,value:fe.a.string})),operators:fe.a.arrayOf(fe.a.shape({label:fe.a.string,value:fe.a.string}))},Ge=function(e){var t=e.row,a=e.onChange,n=e.onRemove,l=e.setMetadata,c=e.docPrefixedFields,i=e.operators,o=1===e.rowsNum;return r.a.createElement("li",{className:"slds-grid slds-gutters_small"},r.a.createElement(qe,{docPrefixedFields:c,operators:i,fieldName:t.field_name,operator:t.operator,onChangeField:function(e){return a(Object.assign({},t,{field_name:e,operator:""}))},onChangeOperator:function(e){return a(Object(g.j)(t,"operator",e))}}),r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement("div",{className:"slds-form-element"},r.a.createElement("label",{className:"slds-form-element__label"},"stopWord"),r.a.createElement("div",{className:"slds-form-element__control"},r.a.createElement("a",{className:"",style:{lineHeight:"1.875rem"},href:function(e){return e.preventDefault()},onClick:function(){return l({matchCriteriaId:t.id,id:t.stopwords_list_id,variant:"stopwords"})}},"Contact Prefixes")))),r.a.createElement("div",{className:"slds-col slds-size_1-of-6"},r.a.createElement("div",{className:"slds-form-element"},r.a.createElement("label",{className:"slds-form-element__label"},"Synonym"),r.a.createElement("div",{className:"slds-form-element__control"},r.a.createElement("a",{className:"",style:{lineHeight:"1.875rem"},href:function(e){return e.preventDefault()},onClick:function(){return l({matchCriteriaId:t.id,id:t.synonyms_id,variant:"synonyms"})}},"Synonym name")))),r.a.createElement("div",{className:"slds-col slds-size_2-of-12"},r.a.createElement("span",{class:"slds-form-element__label"},"Use Cleansed Field"),r.a.createElement("div",{className:"slds-form-element__control"},r.a.createElement(_e.a,{variant:"toggle",checked:t.cleanse,onChange:function(e,n){n.checked;return a(Object(g.j)(t,"cleanse",!t.cleanse))}}))),r.a.createElement(Me,{onRemove:n,disabled:o}))};Ge.prototype=Ue,Ge.displayName="DedupScenarioMatchCriterias";var We=Ve(Ge),Be={row:fe.a.shape({field:fe.a.string,operator:fe.a.string,value:fe.a.any}),index:fe.a.number,onChange:fe.a.func,onRemove:fe.a.func,docPrefixedFields:fe.a.arrayOf(fe.a.shape({label:fe.a.string,value:fe.a.string})),operators:fe.a.arrayOf(fe.a.shape({label:fe.a.string,value:fe.a.string}))},Ye=function(e){var t=e.row,a=e.onChange,l=e.onRemove,c=e.docPrefixedFields,i=e.operators,o=Object(n.useState)(),s=Object(v.a)(o,2),d=s[0],u=s[1];return Object(n.useEffect)((function(){return u(t.value)}),[t.value]),r.a.createElement("li",{className:"slds-grid slds-gutters_small"},r.a.createElement(qe,{docPrefixedFields:c,operators:i,fieldName:t.field_name,operator:t.operator,onChangeField:function(e){return a(Object(g.j)(t,"field_name",e))},onChangeOperator:function(e){return a(Object(g.j)(t,"operator",e))}}),r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement(Oe.a,{label:"Value",value:d,required:!0,onChange:function(e){return u(e.target.value)},onBlur:function(e){return a(Object(g.j)(t,"value",d))}})),r.a.createElement(Me,{onRemove:l}))};Ye.proptype=Be,Ye.displayName="DedupScenarioFilterCriterias";var Je=Ve(Ye),Xe=a(117),Ze=Ve((function(e){var t=e.row,a=e.selectedId,l=(e.onChange,e.onRemove),c=Object(n.useState)(!1),i=Object(v.a)(c,2),o=i[0],s=i[1];return r.a.createElement("tr",{className:"slds-hint-parent"},r.a.createElement("th",{class:"slds-cell-edit"},r.a.createElement(Xe.a,{variant:"base",checked:a===t.id})),r.a.createElement("th",{class:"slds-cell-edit"},r.a.createElement("span",{className:"slds-grid slds-grid_align-spread"},r.a.createElement("a",{className:"slds-truncate"},r.a.createElement("span",{class:"slds-grid slds-grid_align-spread"},r.a.createElement("span",{class:"slds-truncate",title:"Acme"},t.name))),r.a.createElement(I.a,{iconSize:"small",onClick:function(){return s(!0)},iconCategory:"utility",variant:"icon",iconName:"edit",iconVariant:"bare",className:"slds-cell-edit__button",iconClassName:"slds-button__icon_hint slds-button__icon_edit"})),o&&r.a.createElement("section",{class:"slds-popover slds-popover slds-popover_edit",role:"dialog",style:{position:"absolute",top:"0px",left:"0.0625rem"}},r.a.createElement("div",{class:"slds-popover__body",id:"dialog-body-id-1"},r.a.createElement("div",{class:"slds-form-element slds-grid slds-wrap"},r.a.createElement("label",{class:"slds-form-element__label slds-form-element__label_edit slds-no-flex",for:"company-01"},r.a.createElement("span",{class:"slds-assistive-text"},"Company")),r.a.createElement("div",{class:"slds-form-element__control slds-grow"},r.a.createElement("input",{class:"slds-input",id:"company-01",type:"text",value:"Acme Enterprises",onBlur:function(){s(!1)}})))))),r.a.createElement("td",{class:"slds-cell-edit slds-text-align_right"},r.a.createElement(I.a,{iconSize:"small",onClick:l,iconCategory:"utility",variant:"icon",iconName:"delete",iconVariant:"border-filled"})))})),Ke=function(e){var t=e.criteria,a=(e.onChange,e.onSelect,Object(n.useState)([])),l=Object(v.a)(a,2),c=l[0],i=l[1],o=Te().metadata.data.data,s=o.stopwords,d=o.synonyms;return Object(n.useEffect)((function(){"stopwords"===t.variant?i(s):i(d)}),[t]),r.a.createElement("table",{className:"slds-table slds-table_bordered slds-no-row-hover slds-table_edit"},r.a.createElement("thead",null,r.a.createElement("tr",{class:"slds-line-height_reset"},r.a.createElement("th",{class:"",style:{width:"1rem"}}),r.a.createElement("th",null,r.a.createElement("a",{class:"slds-th__action slds-text-link_reset",href:"javascript:void(0);",role:"button",tabindex:"0"},r.a.createElement("span",{class:"slds-assistive-text"},"Sort by: "),r.a.createElement("div",{class:"slds-grid slds-grid_vertical-align-center slds-has-flexi-truncate"},r.a.createElement("span",{class:"slds-truncate",title:"Account Name"},"Name")))),r.a.createElement("th",{"aria-label":"Close Date","aria-sort":"none",class:"",scope:"col"}))),r.a.createElement("tbody",null,r.a.createElement(Ze,{rows:c,selectedId:t.id,hideFooter:!0})))},Qe={stopwords:"Stopwords",synonyms:"Synonyms"},$e=function(e){var t=e.isOpen,a=e.criteria,n=e.onChange,l=e.onRequestClose;return r.a.createElement(be.a,{isOpen:t,heading:Qe[a.variant],onRequestClose:l,size:"small",footer:[r.a.createElement(I.a,{label:"Cancel",onClick:l}),r.a.createElement(I.a,{variant:"brand",label:"Apply",onClick:l})]},r.a.createElement(Ke,{criteria:a,onChange:n}))},et=(a(72),{matchCriteria:fe.a.shape({field:fe.a.string,operator:fe.a.string,value:fe.a.string,stopword:fe.a.array,synonyms:fe.a.array,cleanse:fe.a.bool}),filterCriteria:fe.a.shape({field:fe.a.string,operator:fe.a.string,value:fe.a.any}),operators:fe.a.arrayOf(fe.a.shape({label:fe.a.string,value:fe.a.string})),stopwords:fe.a.arrayOf(fe.a.shape({label:fe.a.string,value:fe.a.string})),synonyms:fe.a.arrayOf(fe.a.shape({label:fe.a.string,value:fe.a.string})),onChangeMatchCriteria:fe.a.func,onChangeFilterCriteria:fe.a.func}),tt=function(e){var t=e.matchCriteria,a=e.filterCriteria,l=e.objectName,c=(e.fields,e.docPrefixedFields),i=e.sObjects,o=e.onChangeObject,s=(e.onChangeFields,e.onChangeMatchCriteria),d=e.onChangeFilterCriteria,u=Object(n.useState)(!1),m=Object(v.a)(u,2),p=m[0],f=m[1],b=Object(n.useState)({}),E=Object(v.a)(b,2),h=E[0],g=E[1],O=Te().metadata.operators;return r.a.createElement(n.Fragment,null,r.a.createElement(ie.a,{title:"Objects",className:"slds-m-bottom_medium",nonCollapsible:!0},r.a.createElement("div",{class:"slds-grid slds-gutters_small"},r.a.createElement("div",{className:"slds-col slds-size_1-of-5"},r.a.createElement(we,{options:i,labels:{placeholder:"Select option"},value:l,onChange:function(e,t){var a=1===t.length?t[0]:{objectName:"",objectIndex:""};o(a.label,a.id)}})))),r.a.createElement(ie.a,{title:"Matching Criterias",className:"slds-m-bottom_medium",nonCollapsible:!0},r.a.createElement(We,{rows:t,docPrefixedFields:c,operators:O,rowsNum:t.length,onChange:s,setMetadata:function(e){f(!0),g(e)}})),r.a.createElement(ie.a,{title:"Filter Criterias",className:"slds-m-bottom_medium",nonCollapsible:!0},r.a.createElement(Je,{rows:a,docPrefixedFields:c,operators:O,onChange:d})),r.a.createElement($e,{isOpen:p,criteria:h,onRequestClose:function(){return f(!1)}}))};tt.propType=et;var at=tt,nt=function(){var e=me(),t=Object(v.a)(e,2),a=t[0],l=a.formState,c=a.isEditMode,i=a.docPrefixedFields,o=a.scenarioId,s=a.heading,d=a.sObjects,u=t[1],m=u.dispatch,p=u.deleteScenario,f=u.duplicateScenario,b=u.runDeduplication,E=u.viewDuplicates,h=u.onSubmit,g=l.name,O=l.description,_=l.is_active,j=l.object_name,C=l.fields,y=l.matchCriteria,S=l.filterCriteria,N=l.scenario_action,x=Object(n.useRef)(0);return x.current=x.current+1,console.log(x,"scenario"),r.a.createElement(Ae,null,r.a.createElement("form",{onSubmit:function(e){return h(e)}},r.a.createElement(Ie,{heading:s}),r.a.createElement(k.a,{heading:s,headerActions:r.a.createElement(ve,{isEditMode:c,onDelete:function(){return p(o)},onDuplicate:function(){return f(o)},onRun:function(){return b(o)},onViewDuplicates:function(){return E(o)}})},r.a.createElement("div",{className:"slds-p-horizontal_medium"},r.a.createElement(ye,{name:g,description:O,isActive:_,onChangeName:Object(n.useCallback)((function(e){return m({type:"SCENARIO_SET_NAME",payload:{name:e}})}),[g]),onChangeDescription:Object(n.useCallback)((function(e){return m({type:"SCENARIO_SET_DESCRIPTION",payload:{description:e}})}),[O]),onChangeIsActive:Object(n.useCallback)((function(e){return m({type:"SCENARIO_SET_IS_ACTIVE",payload:{is_active:e}})}),[_])}),r.a.createElement(at,{matchCriteria:y,filterCriteria:S,objectName:j,fields:C,docPrefixedFields:i,sObjects:d,onChangeMatchCriteria:function(e){return m({type:"SCENARIO_SET_MATCH_CRITERIA",payload:{matchCriteria:e}})},onChangeFilterCriteria:function(e){return m({type:"SCENARIO_SET_FILTER_CRITERIA",payload:{filterCriteria:e}})},onChangeObject:function(e,t){return m({type:"SCENARIO_SET_OBJECT_NAME",payload:{object_name:e,objectIndex:t}})},onChangeFields:function(e){return m({type:"SCENARIO_SET_FIELDS",payload:{fields:e}})}}),r.a.createElement(ie.a,{title:"Merge Actions",nonCollapsible:!0,className:"slds-m-bottom_medium"},r.a.createElement("div",{className:"slds-grid slds-gutters_small"},r.a.createElement(Fe,{scenarioAction:N,onChange:function(e){return m({type:"SCENARIO_SET_SCENARIO_ACTION",payload:{scenario_action:e}})}})))))))};nt.propType={},nt.displayName="DedupScenario";var rt,lt=nt,ct=function(e){var t=e.tableFields;return r.a.createElement("thead",null,r.a.createElement("tr",{class:"slds-line-height_reset"},r.a.createElement("th",{class:"slds-text-align_right",style:{width:"3.25rem"}}),t.map((function(e){return r.a.createElement("th",{"aria-label":"Contact"},r.a.createElement("div",null,r.a.createElement("span",{class:"slds-truncate",title:"Contact"},e)))})),r.a.createElement("th",{"aria-label":"Contact",style:{width:"3.25rem"}},r.a.createElement("div",null,r.a.createElement("span",{class:"slds-truncate",title:"Contact"})))))},it=function(e){var t=e.tableFields,a=e.row,l=e.onViewRecord,c=Object(n.useState)(!1),i=Object(v.a)(c,2),o=i[0],s=i[1];return r.a.createElement("tr",{"aria-level":"1",class:"slds-hint-parent"},r.a.createElement("td",{style:{width:"3.25rem"}},r.a.createElement("div",{class:"slds-checkbox"},r.a.createElement(_e.a,{checked:o,onChange:function(e){s(!o)}}))),t.map((function(e){return r.a.createElement("td",null,r.a.createElement("div",{class:"slds-truncate",title:"Acme"},function(e,t){return t[e]}(e,a)))})),r.a.createElement("td",{className:"slds-text-align_right"},r.a.createElement(p.a,{iconPath:"/assets/icons"},r.a.createElement(I.a,{align:"right",iconCategory:"utility",iconName:"expand",iconVariant:"border",iconSize:"small",onClick:function(e){l(a)}}))))},ot=function(){var e=Object(n.useState)([]),t=Object(v.a)(e,2),a=t[0],r=t[1],l=Object(n.useState)([]),c=Object(v.a)(l,2),i=c[0],o=c[1],s=Object(n.useState)([]),d=Object(v.a)(s,2),u=d[0],m=d[1],p=Object(n.useState)(null),f=Object(v.a)(p,2),b=f[0],E=f[1],g=function(){var e=ee(null,{data:{data:{results:[]}}}),t=Object(v.a)(e,2),a=t[0],n=t[1];return[a,function(e){return n({url:"".concat(S,"/").concat(e,"/results"),params:{sfdcorgid:""}})}]}(),O=Object(v.a)(g,2),_=O[0],j=O[1],C=Object(h.g)(),y=Object(n.useContext)(w).openToast,N=C.scenario_id;return Object(n.useEffect)((function(){return j(N)}),[N]),Object(n.useEffect)((function(){var e=_.data.data.results;if(e.length>0){var t=["doc.Name","doc.Website","doc.Phone","doc.BillingCity","doc.BillingState"].map((function(e){return e.split(".")[1]}));r(e),E(e[0].index_name),o(t.slice(0,4)),m(t)}}),[_.data]),Object(n.useEffect)((function(){"CREATED"===_.data.data.job_status&&y({heading:["Scenario Job Created"]})}),[_.data.data.job_status]),{tableFields:i,tableFieldsExpanded:u,rows:a,indexName:b}},st=function(e){var t=e.keyName,a=e.tableFields;return r.a.createElement("tr",{class:"slds-is-selected"},r.a.createElement("td",{colspan:a.length+1},"Duplicate key: ",t),r.a.createElement("td",{className:"slds-text-align_right",style:{width:"3.25rem"}},r.a.createElement(p.a,{iconPath:"/assets/icons"},r.a.createElement(z.a,{align:"right",iconCategory:"utility",iconName:"down",iconVariant:"border-filled",onSelect:function(e){},buttonClassName:"slds-button_icon-small",options:[{label:"Merge Records",value:"A0"}]}))))},dt=function(e){var t=e.field,a=e.record;return r.a.createElement("tr",{class:"slds-hint-parent"},r.a.createElement(n.Fragment,null,r.a.createElement("td",null,r.a.createElement("div",{class:"slds-truncate",title:"Acme"},t)),r.a.createElement("td",{colSpan:"3"},r.a.createElement("div",{class:"slds-truncate",title:"Acme"},function(e,t){return t[e]}(t,a)))))},ut=function(e){var t=e.setIsOpen,a=e.tableFields,l=e.record;return r.a.createElement(p.a,{iconPath:"/assets/icons"},r.a.createElement(be.a,{isOpen:!0,size:"medium",onRequestClose:function(){return t(!1)},hasNoHeader:!0},r.a.createElement("table",{"aria-multiselectable":"true",class:"slds-table slds-table_header-hidden slds-table_bordered slds-table_cell-buffer slds-no-row-hover slds-tree slds-table_tree",role:"grid"},r.a.createElement("thead",null,r.a.createElement("tr",{"aria-level":"1",class:"slds-hint-parent"},r.a.createElement("th",{role:"gridcell"},r.a.createElement("div",{class:"slds-truncate",title:"Acme"},"STANDARD FIELD NAMES")))),r.a.createElement("tbody",null,null!==l&&r.a.createElement(n.Fragment,null,a.map((function(e){return r.a.createElement(dt,{field:e,record:l})})))))))},mt=function(){var e=ot(),t=e.tableFields,a=e.tableFieldsExpanded,l=e.rows,c=e.indexName,i=Object(n.useState)(!1),o=Object(v.a)(i,2),s=o[0],d=o[1],u=Object(n.useState)(null),m=Object(v.a)(u,2),p=m[0],f=m[1],b=function(e){f(e)};return Object(n.useEffect)((function(){null!==p&&d(!0)}),[p]),r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,{className:"slds-m-bottom_large",title:"All Potential Duplicate Records",variant:"object-home",trail:[r.a.createElement("a",{href:"javascript:void(0);"},"Dedup")]}),r.a.createElement(k.a,{style:{flexGrow:1},hasNoHeader:null===c,heading:"Index: ".concat(c)},l.length>0&&r.a.createElement(n.Fragment,null,r.a.createElement("table",{"aria-multiselectable":"true",class:"slds-table  slds-table_bordered slds-no-row-hover ",role:"grid"},r.a.createElement(ct,{tableFields:t}),r.a.createElement("tbody",null,l.map((function(e){return r.a.createElement(n.Fragment,null,r.a.createElement(st,{keyName:e.key,tableFields:t}),e.records.map((function(e){return r.a.createElement(it,{tableFields:t,row:e,onViewRecord:b})})))})))),!0===s&&r.a.createElement(ut,{isOpen:s,setIsOpen:d,tableFields:a,record:p}))))},pt=[{exact:!0,path:"/grax-app/client/cloud",component:T,subRoutes:[{exact:!0,path:C,component:function(){return r.a.createElement(k.a,{hasNoHeader:!0},r.a.createElement("div",{class:"slds-text-longform slds-text-align_center"},r.a.createElement("h2",{class:"slds-text-heading_medium"},"Welcome to GRAX!"),r.a.createElement("p",{class:"slds-text-body_regular"},"Your Data Value Platform.")),r.a.createElement("footer",{class:"slds-card__footer"},r.a.createElement("button",{class:"slds-button slds-button_brand"},"Start")))}},{exact:!0,path:"".concat(y,"/scenarios"),component:ce},{exact:!0,path:"".concat(y,"/scenarios/:scenario_id"),component:lt},{exact:!0,path:"".concat(y,"/scenarios/new"),component:lt},{exact:!0,path:"".concat(y,"/duplicates/:scenario_id"),component:mt}]}],ft=Object(n.lazy)((function(){return a.e(21).then(a.bind(null,220))})),bt=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,226))})),Et=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(7)]).then(a.bind(null,227))})),ht=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(10)]).then(a.bind(null,228))})),gt=Object(n.lazy)((function(){return a.e(16).then(a.bind(null,229))})),vt=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(5)]).then(a.bind(null,225))})),Ot=Object(n.lazy)((function(){return Promise.all([a.e(0),a.e(15)]).then(a.bind(null,224))}));rt=null!=window.__grax__&&null!=window.__grax__.appName?window.__grax__.appname:window.location.pathname.split("/").pop()||"cloud";var _t={summarycharts:"summary-charts",delete:"datalake-delete",timemachine:"grax-object-time-machine",logging:"grax-logs"},jt=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(d.a)(t).call(this,e))).state={isLoading:!0},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;if("summarycharts"===rt){var t=document.createElement("script");t.src="https://www.gstatic.com/charts/loader.js",t.async=!0,t.onload=function(){e.setState({isLoading:!1})},document.body.appendChild(t)}else this.setState({isLoading:!1})}},{key:"render",value:function(){return this.state.isLoading?r.a.createElement(m.a,{size:"large",variant:"brand"}):r.a.createElement(r.a.Fragment,null,g.g&&r.a.createElement("style",null,"\n                    html, body {\n                        height: 100%;\n                        overflow: auto;\n                        -webkit-overflow-scrolling: touch;\n                    }\n                "),r.a.createElement("div",{className:g.h?"slds-tabs_scoped__content":""},null!=_t[rt]?r.a.createElement("div",{"aria-hidden":"false",id:"GRAXHelpLink"},r.a.createElement("h3",null,r.a.createElement("a",{href:"https://documentation.grax.io/docs/"+_t[rt],style:{position:"absolute",right:"27px"},rel:"noopener noreferrer",target:"_blank"},"GRAX Help"))):null,r.a.createElement(p.a,{iconPath:"./assets/icons"},r.a.createElement(n.Suspense,{fallback:r.a.createElement(m.a,{size:"large",variant:"brand"})},("restore"===rt||"mapping"===rt)&&r.a.createElement(ft,{variant:g.h?"default":"scoped",appName:rt}),"logging"===rt&&r.a.createElement(f.a,{variant:g.h?"default":"scoped",id:"grax-logging-tabs"},r.a.createElement(b.a,{label:"Error Logs"},r.a.createElement(bt,{columns:["CreatedDate","source","info","error","stack","description"]})),r.a.createElement(b.a,{label:"Restore Logs"},r.a.createElement(bt,{subtype:"restore",columns:["CreatedDate","objecttype","sourceId","destinationId","status","error","description"]}))),"timemachine"===rt&&r.a.createElement(f.a,{variant:g.h?"default":"scoped",id:"grax-history-tabs"},r.a.createElement(b.a,{label:"History"},r.a.createElement(Et,null))),"delete"===rt&&r.a.createElement(f.a,{variant:g.h?"default":"scoped",id:"grax-delete-tabs"},r.a.createElement(b.a,{label:"Delete"},r.a.createElement(ht,null))),"cloud"===rt&&r.a.createElement(gt,null),"audit"===rt&&r.a.createElement(vt,{columns:["LastModifiedDate","ObjectType","ObjectVersion"]}),"summarycharts"===rt&&r.a.createElement(Ot,{variant:g.h?"default":"scoped"}),r.a.createElement(E.a,null,r.a.createElement(h.c,null,pt.map((function(e,t){return r.a.createElement(h.a,{key:"route-".concat(t),path:e.path,render:function(t){return r.a.createElement(e.component,Object.assign({routes:e.subRoutes,exact:e.exact,isEmbeded:g.h},t))}})}))))))))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(jt,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},53:function(e,t,a){"use strict";a.d(t,"d",(function(){return l})),a.d(t,"c",(function(){return c})),a.d(t,"g",(function(){return i})),a.d(t,"e",(function(){return s})),a.d(t,"f",(function(){return d})),a.d(t,"b",(function(){return u}));var n=a(55),r=a.n(n);a.d(t,"a",(function(){return r.a}));var l=!1,c=l?"https://grax-datalake-demo2.herokuapp.com":"",i=window.__grax__.token,o=window.__grax__._csrf,s=window.__grax__.orgid,d=(window.__grax__.userid,window.__grax__.pageParams||{});function u(e){return null!==e&&void 0!==e||(e={}),null!==e.action&&void 0!==e.action&&""!==e.action||(e.action="load"),"?"+r.a.param(e)}r.a.ajaxSetup({beforeSend:function(e,t){var a;e.setRequestHeader("sfdcorgid",s),null!=d.authorization?e.setRequestHeader("Authorization",d.authorization):e.setRequestHeader("Authorization","Bearer "+i),a=t.type,/^(GET|HEAD|OPTIONS|TRACE)$/.test(a)||this.crossDomain||e.setRequestHeader("X-CSRFToken",o),e.withCredentials=!0,!0!==t.skipFail&&e.fail((function(e,t,a){console.error(e),404!==e.status&&"Not Found"!==a&&window.showError(e.statusText+": "+e.responseText)}))}})},72:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return v}));var n,r=a(48),l=a(49),c=a(52),i=a(50),o=a(54),s=a(51),d=a(1),u=a.n(d),m=a(35),p=a.n(m),f=a(70),b=a(173),E=a(53),h=a(11),g="Fields",v=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(c.a)(this,Object(i.a)(t).call(this,e))).state={options:[],inputValue:"",selection:[{id:"Id",label:"Id",type:"text"}],isLoaded:!1,error:null},a.getMappedFieldList=a.getMappedFieldList.bind(Object(o.a)(a)),a}return Object(s.a)(t,e),Object(l.a)(t,[{key:"getMappedFieldList",value:function(e){return p.a.map(e||this.state.selection,(function(e){return e.id}))}},{key:"onLoadHandler",value:function(e,t){var a=this.getMappedFieldList(t);this.props.onLoad&&this.props.onLoad(e,t,this.state.options,a)}},{key:"onChangeHandler",value:function(e,t){var a=this.getMappedFieldList(t);this.props.onChange&&this.props.onChange(e,t,this.state.options,a),Object(h.k)(n+g,JSON.stringify(a))}},{key:"componentDidMount",value:function(){var e=this;this._isMounted=!0,n=this.props.dataIndex,this.props.cookieSubfix&&(g+=this.props.cookieSubfix),E.a.ajax({type:"GET",url:E.c+"/grax-app/grax-data-lake/getDataTypeFields/"+n+Object(E.b)({action:"load"}),data:{},success:function(t){if(e._isMounted){var a=p.a.map(t,(function(e,t){return{id:t,label:t,type:e}}));e.setState({options:a,isLoaded:!0});var r=Object(h.f)(n+g);r.startsWith("[")||(r="[]");var l=JSON.parse(r);e.setState({selection:l.length>0?p.a.sortBy(p.a.reduce(a,(function(e,t){return-1!==l.indexOf(t.id)&&e.push(t),e}),[]),(function(e){return l.indexOf(e.id)})):e.state.selection})}e.onLoadHandler(null,e.state.selection)},error:function(t,a,n){console.error(t,a,n),e._isMounted&&e.setState({isLoaded:!0,error:n.toString()})}})}},{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this;return this.state.error?u.a.createElement("div",null,"Error: ",this.state.error):this.state.isLoaded?u.a.createElement(u.a.Fragment,null,u.a.createElement(b.a,{classNameMenu:"scrollable-GRAXFieldsCombobox",events:{onChange:function(t,a){var n=a.value;e.setState({inputValue:n})},onRequestRemoveSelectedOption:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.onChangeHandler(t,a.selection)},onSelect:function(t,a){e.setState({inputValue:"",selection:a.selection}),e.onChangeHandler(t,a.selection)},onRequestClose:function(t,a){if(e.props.onSelect&&e.state.inputValue){var n=e.getMappedFieldList(a.selection);e.props.onSelect(t,[{id:e.state.inputValue,label:e.state.inputValue}],e.state.options,n)}}},labels:{placeholder:"Select Option"},options:Object(h.e)({inputValue:this.state.inputValue,limit:1e3,options:this.state.options,selection:this.state.selection}),selection:this.state.selection,value:this.state.inputValue,required:!0,multiple:!0})):u.a.createElement("div",{style:{position:"relative",height:"2rem"}},u.a.createElement(f.a,{size:"small",variant:"base"}))}}]),t}(u.a.Component)}},[[122,2,3]]]);
//# sourceMappingURL=main.99612f24.chunk.js.map